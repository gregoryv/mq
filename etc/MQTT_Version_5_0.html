<html>

<head>
<base href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html">
<meta name="description" content="MQTT is a lightweight client/server publish/subscribe messaging transport protocol ideal for use in M2M and IoT contexts.">
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>MQTT Version 5.0</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:2 4 5 3 5 2 3 3 2 2;}
@font-face
	{font-family:Latha;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Raavi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Shruti;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tunga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:3 8 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial\,MingLiU-ExtB";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Arial\,Verdana";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Arial\,Consolas";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Shell Dlg 2";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial\,Arial Unicode MS";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Courier Std";
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Minion Pro";
	panose-1:2 4 5 3 5 3 6 2 2 3;}
@font-face
	{font-family:"Myriad Pro";
	panose-1:2 11 5 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Symbol Std";
	panose-1:5 2 1 2 1 0 0 0 0 0;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:"Bahnschrift Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Bahnschrift;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Light SemiCondensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight SemiConde";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiCondensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold SemiConden";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Light Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Candara Light";
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Corbel Light";
	panose-1:2 11 3 3 2 2 4 2 2 4;}
@font-face
	{font-family:Ebrima;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:Gabriola;
	panose-1:4 4 6 5 5 16 2 2 13 2;}
@font-face
	{font-family:Gadugi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:"Ink Free";
	panose-1:3 8 4 2 0 5 0 0 0 0;}
@font-face
	{font-family:"Javanese Text";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Leelawadee UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Leelawadee UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"Malgun Gothic Semilight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Malgun Gothic Semilight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Himalaya";
	panose-1:1 1 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft JhengHei UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft JhengHei Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft JhengHei UI Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei UI Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft New Tai Lue";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft PhagsPa";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Microsoft Tai Le";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft YaHei";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@Microsoft YaHei";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Microsoft YaHei UI";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@Microsoft YaHei UI";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Microsoft YaHei Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Microsoft YaHei Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft YaHei UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Microsoft YaHei UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Yi Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:PMingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Mongolian Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"MV Boli";
	panose-1:2 0 5 0 3 2 0 9 0 0;}
@font-face
	{font-family:"Myanmar Text";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Nirmala UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Nirmala UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe MDL2 Assets";
	panose-1:5 10 1 2 1 1 1 1 1 1;}
@font-face
	{font-family:"Segoe Print";
	panose-1:2 0 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Segoe Script";
	panose-1:3 11 5 4 2 0 0 0 0 3;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Black";
	panose-1:2 11 10 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Historic";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:NSimSun;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@NSimSun";
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun-ExtB;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@SimSun-ExtB";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"Sitka Small";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Text";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Subheading";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Heading";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Display";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Banner";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:"\@Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic UI";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic UI Semibold";
	panose-1:2 11 7 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Semibold";
	panose-1:2 11 7 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic UI Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic Medium";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic Medium";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic UI Semilight";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Semilight";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"HoloLens MDL2 Assets";
	panose-1:5 10 1 2 1 1 1 1 1 1;}
@font-face
	{font-family:"AR BERKLEY";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR BLANCA";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR BONNIE";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR CARTER";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR CENA";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR CHRISTY";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR DARLING";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR DECODE";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR DELANEY";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR DESTINE";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR ESSENCE";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR HERMANN";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"AR JULIAN";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"Albertus Medium";
	panose-1:2 14 6 2 3 3 4 2 3 4;}
@font-face
	{font-family:Albertus;
	panose-1:2 14 7 2 4 3 4 2 2 4;}
@font-face
	{font-family:"Albertus Extra Bold";
	panose-1:2 14 8 2 4 3 4 2 2 4;}
@font-face
	{font-family:"ITC Avant Garde Gothic";
	panose-1:2 11 6 2 2 2 2 2 2 4;}
@font-face
	{font-family:"ITC Avant Garde Gothic Demi";
	panose-1:2 11 8 2 2 2 2 2 2 4;}
@font-face
	{font-family:"ITC Bookman Light";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"ITC Bookman Demi";
	panose-1:2 5 8 4 4 5 5 2 2 4;}
@font-face
	{font-family:"CG Omega";
	panose-1:2 11 5 2 5 5 8 2 3 4;}
@font-face
	{font-family:"CG Times";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"ITC Zapf Chancery";
	panose-1:3 2 7 2 4 4 3 8 8 4;}
@font-face
	{font-family:Clarendon;
	panose-1:2 4 6 4 4 5 5 2 2 4;}
@font-face
	{font-family:"Clarendon Condensed";
	panose-1:2 4 7 6 4 7 5 4 2 4;}
@font-face
	{font-family:"Clarendon Extended";
	panose-1:2 4 8 5 5 5 5 2 2 4;}
@font-face
	{font-family:Coronet;
	panose-1:3 3 5 2 4 4 6 7 6 5;}
@font-face
	{font-family:CourierPS;
	panose-1:2 7 6 9 2 2 5 2 4 4;}
@font-face
	{font-family:"ITC Zapf Dingbats";
	panose-1:5 2 1 2 1 7 4 2 6 9;}
@font-face
	{font-family:"Helvetica Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"Letter Gothic";
	panose-1:2 11 4 9 2 2 2 3 2 4;}
@font-face
	{font-family:Marigold;
	panose-1:3 2 7 2 4 4 2 2 5 4;}
@font-face
	{font-family:"New Century Schoolbook";
	panose-1:2 4 6 3 5 7 5 2 3 4;}
@font-face
	{font-family:"Antique Olive";
	panose-1:2 11 6 3 2 2 4 3 2 4;}
@font-face
	{font-family:"Antique Olive Compact";
	panose-1:2 11 9 4 3 5 4 3 2 4;}
@font-face
	{font-family:Palatino;
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:SymbolPS;
	panose-1:5 5 1 2 1 6 7 2 6 7;}
@font-face
	{font-family:Times;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Univers;
	panose-1:2 11 6 3 2 2 2 3 2 4;}
@font-face
	{font-family:"Univers Condensed";
	panose-1:2 11 6 6 2 2 2 6 2 4;}
@font-face
	{font-family:Arimo;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Gentium Basic";
	panose-1:2 0 5 3 6 0 0 2 0 4;}
@font-face
	{font-family:"Gentium Book Basic";
	panose-1:2 0 5 3 6 0 0 2 0 4;}
@font-face
	{font-family:OpenSymbol;
	panose-1:5 1 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Liberation Sans Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"Linux Biolinum G";
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:"Open Sans";
	panose-1:2 11 6 6 3 5 4 2 2 4;}
@font-face
	{font-family:"Source Sans Pro Black";
	panose-1:2 11 8 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Liberation Mono";
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"DejaVu Sans";
	panose-1:2 11 6 3 3 8 4 2 2 4;}
@font-face
	{font-family:"PT Serif";
	panose-1:2 10 6 3 4 5 5 2 2 4;}
@font-face
	{font-family:"Source Code Pro";
	panose-1:2 11 5 9 3 4 3 2 2 4;}
@font-face
	{font-family:Caladea;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"DejaVu Sans Light";
	panose-1:2 11 2 3 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Condensed";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Serif";
	panose-1:2 6 6 3 5 6 5 2 2 4;}
@font-face
	{font-family:"DejaVu Serif Condensed";
	panose-1:2 6 6 6 5 6 5 2 2 4;}
@font-face
	{font-family:"Liberation Sans";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Liberation Serif";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Linux Libertine Display G";
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:"Linux Libertine G";
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:"Source Sans Pro";
	panose-1:2 11 5 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Source Sans Pro ExtraLight";
	panose-1:2 11 3 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Source Sans Pro Light";
	panose-1:2 11 4 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Source Sans Pro Semibold";
	panose-1:2 11 6 3 3 4 3 2 2 4;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.3in;
	text-indent:-.3in;
	page-break-before:always;
	page-break-after:avoid;
	border:none;
	padding:0in;
	font-size:18.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
h2
	{mso-style-name:"Heading 2\,H2";
	mso-style-link:"Heading 2 Char\,H2 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.4in;
	text-indent:-.4in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
h3
	{mso-style-name:"Heading 3\,H3";
	mso-style-link:"Heading 3 Char\,H3 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.5in;
	text-indent:-.5in;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
h4
	{mso-style-name:"Heading 4\,H4";
	mso-style-link:"Heading 4 Char\,H4 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.6in;
	text-indent:-.6in;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
h5
	{mso-style-link:"Heading 5 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.7in;
	text-indent:-.7in;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
h6
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.8in;
	text-indent:-.8in;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.9in;
	text-indent:-.9in;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:1.0in;
	text-indent:-1.0in;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:1.1in;
	text-indent:-1.1in;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:12.0pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:24.0pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.5in;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:48.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:60.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:1.0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	text-align:justify;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{mso-style-link:"Footnote Text Char";
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"Comment Text Char";
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	font-style:italic;}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoEndnoteReference
	{vertical-align:super;}
p.MsoEndnoteText, li.MsoEndnoteText, div.MsoEndnoteText
	{mso-style-link:"Endnote Text Char";
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListBullet, li.MsoListBullet, div.MsoListBullet
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListBullet2, li.MsoListBullet2, div.MsoListBullet2
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:24.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"Subtitle Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:18.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.MsoNoteHeading, li.MsoNoteHeading, div.MsoNoteHeading
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
a:link, span.MsoHyperlink
	{color:#0000EE;
	text-decoration:none;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial Unicode MS",sans-serif;}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial Unicode MS",sans-serif;}
tt
	{font-family:"Arial Unicode MS",sans-serif;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"Comment Subject Char";
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;}
p.MsoRMPane, li.MsoRMPane, div.MsoRMPane
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-link:"Intense Quote Char";
	margin-top:.25in;
	margin-right:.6in;
	margin-bottom:.25in;
	margin-left:.6in;
	text-align:center;
	border:none;
	padding:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	color:#4F81BD;
	font-style:italic;}
span.MsoSubtleEmphasis
	{color:#404040;
	font-style:italic;}
span.MsoIntenseEmphasis
	{color:#4F81BD;
	font-style:italic;}
span.MsoIntenseReference
	{font-variant:small-caps;
	color:#4F81BD;
	letter-spacing:.25pt;
	font-weight:bold;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char\,H2 Char";
	mso-style-link:"Heading 2\,H2";
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char\,H3 Char";
	mso-style-link:"Heading 3\,H3";
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char\,H4 Char";
	mso-style-link:"Heading 4\,H4";
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-link:"Heading 5";
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.SubtitleChar
	{mso-style-name:"Subtitle Char";
	mso-style-link:Subtitle;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.Titlepageinfo, li.Titlepageinfo, div.Titlepageinfo
	{mso-style-name:"Title page info";
	margin:0in;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.Titlepageinfodescription, li.Titlepageinfodescription, div.Titlepageinfodescription
	{mso-style-name:"Title page info description";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.TitlepageinfodescriptionCxSpFirst, li.TitlepageinfodescriptionCxSpFirst, div.TitlepageinfodescriptionCxSpFirst
	{mso-style-name:"Title page info descriptionCxSpFirst";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.TitlepageinfodescriptionCxSpMiddle, li.TitlepageinfodescriptionCxSpMiddle, div.TitlepageinfodescriptionCxSpMiddle
	{mso-style-name:"Title page info descriptionCxSpMiddle";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.TitlepageinfodescriptionCxSpLast, li.TitlepageinfodescriptionCxSpLast, div.TitlepageinfodescriptionCxSpLast
	{mso-style-name:"Title page info descriptionCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.Contributor, li.Contributor, div.Contributor
	{mso-style-name:Contributor;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.ContributorCxSpFirst, li.ContributorCxSpFirst, div.ContributorCxSpFirst
	{mso-style-name:ContributorCxSpFirst;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.ContributorCxSpMiddle, li.ContributorCxSpMiddle, div.ContributorCxSpMiddle
	{mso-style-name:ContributorCxSpMiddle;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.ContributorCxSpLast, li.ContributorCxSpLast, div.ContributorCxSpLast
	{mso-style-name:ContributorCxSpLast;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.Legalnotice, li.Legalnotice, div.Legalnotice
	{mso-style-name:"Legal notice";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.LegalnoticeCxSpFirst, li.LegalnoticeCxSpFirst, div.LegalnoticeCxSpFirst
	{mso-style-name:"Legal noticeCxSpFirst";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.LegalnoticeCxSpMiddle, li.LegalnoticeCxSpMiddle, div.LegalnoticeCxSpMiddle
	{mso-style-name:"Legal noticeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.LegalnoticeCxSpLast, li.LegalnoticeCxSpLast, div.LegalnoticeCxSpLast
	{mso-style-name:"Legal noticeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
span.Datatype
	{mso-style-name:Datatype;
	font-family:"Courier New";}
p.Code, li.Code, div.Code
	{mso-style-name:Code;
	margin-top:0in;
	margin-right:.3in;
	margin-bottom:0in;
	margin-left:.3in;
	margin-bottom:.0001pt;
	background:#D9D9D9;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Courier New";}
p.AppendixHeading2, li.AppendixHeading2, div.AppendixHeading2
	{mso-style-name:AppendixHeading2;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.Element
	{mso-style-name:Element;
	font-family:"Courier New";}
span.Attribute
	{mso-style-name:Attribute;
	font-family:"Courier New";}
span.Keyword
	{mso-style-name:Keyword;
	font-family:"Courier New";}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Arial Unicode MS",sans-serif;}
p.Note, li.Note, div.Note
	{mso-style-name:Note;
	margin-top:6.0pt;
	margin-right:.5in;
	margin-bottom:6.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.Definitionterm, li.Definitionterm, div.Definitionterm
	{mso-style-name:"Definition term";
	margin-top:4.0pt;
	margin-right:2.0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.Definition, li.Definition, div.Definition
	{mso-style-name:Definition;
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.Ref, li.Ref, div.Ref
	{mso-style-name:Ref;
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:2.0pt;
	margin-left:1.5in;
	text-indent:-1.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Arial",sans-serif;}
p.AppendixHeading1, li.AppendixHeading1, div.AppendixHeading1
	{mso-style-name:AppendixHeading1;
	margin-right:0in;
	margin-left:.25in;
	text-indent:-.25in;
	page-break-before:always;
	page-break-after:avoid;
	border:none;
	padding:0in;
	font-size:18.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.Refterm
	{mso-style-name:"Ref term";
	font-weight:bold;}
p.Example, li.Example, div.Example
	{mso-style-name:Example;
	margin-top:0in;
	margin-right:.3in;
	margin-bottom:0in;
	margin-left:.3in;
	margin-bottom:.0001pt;
	background:#E6E6E6;
	font-size:9.0pt;
	font-family:"Courier New";}
span.CODEtemp
	{mso-style-name:"CODE temp";
	font-family:"Courier New";}
p.Codesmall, li.Codesmall, div.Codesmall
	{mso-style-name:"Code small";
	margin-top:0in;
	margin-right:.3in;
	margin-bottom:0in;
	margin-left:.3in;
	margin-bottom:.0001pt;
	background:#E6E6E6;
	border:none;
	padding:0in;
	font-size:8.0pt;
	font-family:"Courier New";}
p.Examplesmall, li.Examplesmall, div.Examplesmall
	{mso-style-name:"Example small";
	margin-top:0in;
	margin-right:.3in;
	margin-bottom:0in;
	margin-left:.3in;
	margin-bottom:.0001pt;
	background:#E6E6E6;
	font-size:8.0pt;
	font-family:"Courier New";}
span.Variable
	{mso-style-name:Variable;
	font-style:italic;}
span.FootnoteTextChar
	{mso-style-name:"Footnote Text Char";
	mso-style-link:"Footnote Text";
	font-family:"Arial",sans-serif;}
p.RelatedWork, li.RelatedWork, div.RelatedWork
	{mso-style-name:"Related Work";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.75in;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.RelatedWorkCxSpFirst, li.RelatedWorkCxSpFirst, div.RelatedWorkCxSpFirst
	{mso-style-name:"Related WorkCxSpFirst";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.75in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.RelatedWorkCxSpMiddle, li.RelatedWorkCxSpMiddle, div.RelatedWorkCxSpMiddle
	{mso-style-name:"Related WorkCxSpMiddle";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.75in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.RelatedWorkCxSpLast, li.RelatedWorkCxSpLast, div.RelatedWorkCxSpLast
	{mso-style-name:"Related WorkCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.75in;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.Abstract, li.Abstract, div.Abstract
	{mso-style-name:Abstract;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.5in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.Notices, li.Notices, div.Notices
	{mso-style-name:Notices;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	page-break-before:always;
	border:none;
	padding:0in;
	font-size:18.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.TextBody, li.TextBody, div.TextBody
	{mso-style-name:"Text Body";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.AppendixHeading3, li.AppendixHeading3, div.AppendixHeading3
	{mso-style-name:AppendixHeading3;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.EndnoteTextChar
	{mso-style-name:"Endnote Text Char";
	mso-style-link:"Endnote Text";
	font-family:"Arial",sans-serif;}
p.AppendixHeading4, li.AppendixHeading4, div.AppendixHeading4
	{mso-style-name:AppendixHeading4;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.AppendixHeading5, li.AppendixHeading5, div.AppendixHeading5
	{mso-style-name:AppendixHeading5;
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma",sans-serif;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.CommentTextChar
	{mso-style-name:"Comment Text Char";
	mso-style-link:"Comment Text";
	font-family:"Arial",sans-serif;}
p.Heading1WP, li.Heading1WP, div.Heading1WP
	{mso-style-name:"Heading 1 WP";
	margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	page-break-after:avoid;
	border:none;
	padding:0in;
	font-size:18.0pt;
	font-family:"Arial",sans-serif;
	color:#446CAA;
	font-weight:bold;}
p.ColorfulShading-Accent11, li.ColorfulShading-Accent11, div.ColorfulShading-Accent11
	{mso-style-name:"Colorful Shading - Accent 11";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
span.CommentSubjectChar
	{mso-style-name:"Comment Subject Char";
	mso-style-link:"Comment Subject";
	font-family:"Arial",sans-serif;
	font-weight:bold;}
span.h1
	{mso-style-name:h1;}
p.ColorfulShading-Accent12, li.ColorfulShading-Accent12, div.ColorfulShading-Accent12
	{mso-style-name:"Colorful Shading - Accent 12";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
span.Mention1
	{mso-style-name:Mention1;
	color:#2B579A;
	background:#E6E6E6;}
span.font231
	{mso-style-name:font231;
	font-family:"Arial",sans-serif;
	color:black;
	font-weight:normal;
	font-style:normal;
	text-decoration:none none;}
span.Mention2
	{mso-style-name:Mention2;
	color:#2B579A;
	background:#E6E6E6;}
span.IntenseQuoteChar
	{mso-style-name:"Intense Quote Char";
	mso-style-link:"Intense Quote";
	font-family:"Arial",sans-serif;
	color:#4F81BD;
	font-style:italic;}
span.UnresolvedMention1
	{mso-style-name:"Unresolved Mention1";
	color:gray;
	background:#E6E6E6;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Arial",sans-serif;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:red;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:green;}
.MsoChpDefault
	{font-size:10.0pt;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in .5in 1.0in;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:8.5in 11.0in;
	margin:1.0in 1.0in .5in 1.0in;}
div.WordSection2
	{page:WordSection2;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link="#0000EE" vlink=purple>

<div class=WordSection1>

<p><a href="https://www.oasis-open.org">
<img border="0" src="https://docs.oasis-open.org/templates/OASISLogo-v2.0.jpg" alt="OASIS logo" width="250" height="55"></a></p>

<div style='border:none;border-top:solid gray 1.0pt;padding:1.0pt 0in 0in 0in'>

<p class=MsoTitle>MQTT Version 5.0</p>

<p class=MsoSubtitle>OASIS Standard</p>

<p class=MsoSubtitle>07 March 2019</p>

</div>

<p class=Titlepageinfo><span style='font-size:12.0pt'>Specification URIs</span></p>

<p class=Titlepageinfo>This version:</p>

<p class=TitlepageinfodescriptionCxSpFirst><a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.docx">https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.docx</a><span
class=MsoHyperlink><span style='color:black'> (Authoritative)</span></span></p>

<p class=TitlepageinfodescriptionCxSpMiddle><a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html">https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html</a></p>

<p class=TitlepageinfodescriptionCxSpLast><a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.pdf">https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.pdf</a></p>

<p class=Titlepageinfo>Previous version:</p>

<p class=TitlepageinfodescriptionCxSpFirst><a
href="http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.docx">http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.docx</a><span
class=MsoHyperlink><span style='color:black'> (Authoritative)</span></span></p>

<p class=TitlepageinfodescriptionCxSpMiddle><a
href="http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.html">http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.html</a></p>

<p class=TitlepageinfodescriptionCxSpLast><a
href="http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.pdf">http://docs.oasis-open.org/mqtt/mqtt/v5.0/cos01/mqtt-v5.0-cos01.pdf</a></p>

<p class=Titlepageinfo>Latest version:</p>

<p class=TitlepageinfodescriptionCxSpFirst><a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.docx">https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.docx</a><span
class=MsoHyperlink><span style='color:black'> (Authoritative)</span></span></p>

<p class=TitlepageinfodescriptionCxSpMiddle><a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html">https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html</a></p>

<p class=TitlepageinfodescriptionCxSpLast><a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.pdf">https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.pdf</a></p>

<p class=Titlepageinfo>Technical Committee:</p>

<p class=MsoNormal style='margin-left:.5in'><a
href="https://www.oasis-open.org/committees/mqtt/">OASIS Message Queuing
Telemetry Transport (MQTT) TC</a><a name="_Toc473619913"></a></p>

<p class=Titlepageinfo>Chairs:</p>

<p class=Titlepageinfodescription>Richard Coppen (<a
href="mailto:coppen@uk.ibm.com">coppen@uk.ibm.com</a>), <a
href="http://www.ibm.com">IBM</a></p>

<p class=Titlepageinfo>Editors:</p>

<p class=ContributorCxSpFirst><a name="_Toc473619917">Andrew Banks (</a><a
href="mailto:andrew_banks@uk.ibm.com">andrew_banks@uk.ibm.com</a>), <a
href="http://www.ibm.com">IBM</a></p>

<p class=ContributorCxSpMiddle>Ed Briggs (<a
href="mailto:edbriggs@microsoft.com">edbriggs@microsoft.com</a>), <a
href="http://www.microsoft.com">Microsoft</a></p>

<p class=ContributorCxSpMiddle>Ken Borgendale (<a href="mailto:kwb@us.ibm.com">kwb@us.ibm.com</a>),
<a href="http://www.ibm.com">IBM</a></p>

<p class=ContributorCxSpLast>Rahul Gupta (<a
href="mailto:rahul.gupta@us.ibm.com">rahul.gupta@us.ibm.com</a>), <a
href="http://www.ibm.com">IBM</a></p>

<p class=Titlepageinfo><a name=RelatedWork>Related work</a>:</p>

<p class=Titlepageinfodescription>This specification replaces or supersedes:</p>

<p class=RelatedWork><span style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><i>MQTT Version 3.1.1</i>. Edited by Andrew Banks and Rahul
Gupta. 29 October 2014. OASIS Standard. <a
href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html</a>.
Latest version: <span class=MsoHyperlink><span lang=DE><a
href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html</a></span></span>.</p>

<p class=Titlepageinfodescription>This specification is related to:</p>

<p class=RelatedWork><span style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><i>MQTT and the NIST Cybersecurity Framework Version 1.0</i>.
Edited by Geoff Brown and Louis-Philippe Lamoureux. <span lang=DE>Latest
version: </span><a
href="http://docs.oasis-open.org/mqtt/mqtt-nist-cybersecurity/v1.0/mqtt-nist-cybersecurity-v1.0.html"><span
lang=DE>http://docs.oasis-open.org/mqtt/mqtt-nist-cybersecurity/v1.0/mqtt-nist-cybersecurity-v1.0.html</span></a><span
lang=DE>.</span></p>

<p class=Titlepageinfo>Abstract:</p>

<p class=Abstract>MQTT is a Client Server publish/subscribe messaging transport
protocol. It is light weight, open, simple, and designed to be easy to
implement. These characteristics make it ideal for use in many situations,
including constrained environments such as for communication in Machine to
Machine (M2M) and Internet of Things (IoT) contexts where a small code
footprint is required and/or network bandwidth is at a premium.</p>

<p class=Abstract>The protocol runs over TCP/IP, or over other network
protocols that provide ordered, lossless, bi-directional connections. Its
features include:</p>

<p class=Abstract style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Use of the publish/subscribe message pattern which provides
one-to-many message distribution and decoupling of applications.</p>

<p class=Abstract style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A messaging transport that is agnostic to the content of the
payload. </p>

<p class=Abstract style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Three qualities of service for message delivery:</p>

<p class=Abstract style='margin-left:1.25in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>&quot;At most once&quot;, where messages are delivered according
to the best efforts of the operating environment. Message loss can occur. This
level could be used, for example, with ambient sensor data where it does not
matter if an individual reading is lost as the next one will be published soon
after.</p>

<p class=Abstract style='margin-left:1.25in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>&quot;At least once&quot;, where messages are assured to arrive
but duplicates can occur.</p>

<p class=Abstract style='margin-left:1.25in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>&quot;Exactly once&quot;, where messages are assured to arrive
exactly once. This level could be used, for example, with billing systems where
duplicate or lost messages could lead to incorrect charges being applied.</p>

<p class=Abstract style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A small transport overhead and protocol exchanges minimized to
reduce network traffic.</p>

<p class=Abstract style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A mechanism to notify interested parties when an abnormal disconnection
occurs.</p>

<p class=Titlepageinfo>Status:</p>

<p class=Abstract>This document was last revised or approved by the membership
of OASIS on the above date. The level of approval is also listed above. Check
the Latest version location noted above for possible later revisions of this
document. Any other numbered Versions and other technical work produced by the
Technical Committee (TC) are listed at <a
href="https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=mqtt#technical">https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=mqtt#technical</a>.</p>

<p class=Abstract>TC members should send comments on this document to the TCs
email list. Others should send comments to the TCs public comment list, after
subscribing to it by following the instructions at the <a
href="https://www.oasis-open.org/committees/comments/index.php?wg_abbrev=mqtt">Send
A Comment</a> button on the TCs web page at <a
href="https://www.oasis-open.org/committees/mqtt/">https://www.oasis-open.org/committees/mqtt/</a><span
class=MsoHyperlink><span style='color:black'>.</span></span></p>

<p class=Abstract>This specification is provided under the <a
href="https://www.oasis-open.org/policies-guidelines/ipr#Non-Assertion-Mode">Non-Assertion</a>
Mode of the <a href="https://www.oasis-open.org/policies-guidelines/ipr">OASIS
IPR Policy</a>, the mode chosen when the Technical Committee was established. For
information on whether any patents have been disclosed that may be essential to
implementing this specification, and any offers of patent licensing terms,
please refer to the Intellectual Property Rights section of the TCs web page (<a
href="https://www.oasis-open.org/committees/mqtt/ipr.php">https://www.oasis-open.org/committees/mqtt/ipr.php</a><span
class=MsoHyperlink>).</span></p>

<p class=Abstract>Note that any machine-readable content (<a
href="https://www.oasis-open.org/policies-guidelines/tc-process#wpComponentsCompLang">Computer
Language Definitions</a>) declared Normative for this Work Product is provided
in separate plain text files. In the event of a discrepancy between any such
plain text file and display content in the Work Product's prose narrative document(s),
the content in the separate plain text file prevails.</p>

<p class=Titlepageinfo>Citation format:</p>

<p class=Abstract>When referencing this specification the following citation
format should be used:</p>

<p class=Abstract><span class=Refterm>[mqtt-v5.0]</span></p>

<p class=Titlepageinfodescription><i>MQTT Version 5.0</i>. Edited by Andrew
Banks, Ed Briggs, Ken Borgendale, and Rahul Gupta. 07 March 2019. OASIS
Standard. <a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html">https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html</a><span
class=MsoHyperlink>. </span>Latest version: <a
href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html">https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html</a><span
class=MsoHyperlink>.</span></p>

<div style='border:none;border-top:solid gray 1.0pt;padding:1.0pt 0in 0in 0in'>

<p class=Notices>Notices</p>

</div>

<p class=MsoNormal>Copyright  OASIS Open 2019. All Rights Reserved.</p>

<p class=MsoNormal>All capitalized terms in the following text have the
meanings assigned to them in the OASIS Intellectual Property Rights Policy (the
&quot;OASIS IPR Policy&quot;). The full <a
href="https://www.oasis-open.org/policies-guidelines/ipr">Policy</a> may be
found at the OASIS website.</p>

<p class=MsoNormal>This document and translations of it may be copied and
furnished to others, and derivative works that comment on or otherwise explain
it or assist in its implementation may be prepared, copied, published, and
distributed, in whole or in part, without restriction of any kind, provided
that the above copyright notice and this section are included on all such copies
and derivative works. However, this document itself may not be modified in any
way, including by removing the copyright notice or references to OASIS, except
as needed for the purpose of developing any document or deliverable produced by
an OASIS Technical Committee (in which case the rules applicable to copyrights,
as set forth in the OASIS IPR Policy, must be followed) or as required to
translate it into languages other than English.</p>

<p class=MsoNormal>The limited permissions granted above are perpetual and will
not be revoked by OASIS or its successors or assigns.</p>

<p class=MsoNormal>This document and the information contained herein is
provided on an &quot;AS IS&quot; basis and OASIS DISCLAIMS ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED
WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>

<p class=MsoNormal>OASIS requests that any OASIS Party or any other party that
believes it has patent claims that would necessarily be infringed by
implementations of this OASIS Committee Specification or OASIS Standard, to
notify OASIS TC Administrator and provide an indication of its willingness to
grant patent licenses to such patent claims in a manner consistent with the IPR
Mode of the OASIS Technical Committee that produced this specification.</p>

<p class=MsoNormal>OASIS invites any party to contact the OASIS TC
Administrator if it is aware of a claim of ownership of any patent claims that
would necessarily be infringed by implementations of this specification by a
patent holder that is not willing to provide a license to such patent claims in
a manner consistent with the IPR Mode of the OASIS Technical Committee that
produced this specification. OASIS may include such claims on its website, but
disclaims any obligation to do so.</p>

<p class=MsoNormal>OASIS takes no position regarding the validity or scope of
any intellectual property or other rights that might be claimed to pertain to
the implementation or use of the technology described in this document or the
extent to which any license under such rights might or might not be available;
neither does it represent that it has made any effort to identify any such
rights. Information on OASIS' procedures with respect to rights in any document
or deliverable produced by an OASIS Technical Committee can be found on the
OASIS website. Copies of claims of rights made available for publication and
any assurances of licenses to be made available, or the result of an attempt
made to obtain a general license or permission for the use of such proprietary
rights by implementers or users of this OASIS Committee Specification or OASIS
Standard, can be obtained from the OASIS TC Administrator. OASIS makes no
representation that any information or list of intellectual property rights
will at any time be complete, or that any claims in such list are, in fact,
Essential Claims.</p>

<p class=MsoNormal>The name &quot;OASIS&quot; is a trademark of <a
href="https://www.oasis-open.org/">OASIS</a>, the owner and developer of this
specification, and should be used only to refer to the organization and its
official outputs. OASIS welcomes reference to, and implementation and use of,
specifications, while reserving the right to enforce its marks against misleading
uses. Please see <a
href="https://www.oasis-open.org/policies-guidelines/trademark">https://www.oasis-open.org/policies-guidelines/trademark</a>
for above guidance.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:1.0pt 0in 0in 0in'>

<p class=Notices>Table of Contents</p>

</div>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901000">1<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>Introduction<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>11</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901001">1.0
Intellectual property rights policy<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>11</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901002">1.1
Organization of the MQTT specification<span style='color:windowtext;display:
none'>. </span><span
style='color:windowtext;display:none'>11</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901003">1.2
Terminology<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>11</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901004">1.3 Normative
references<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>13</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901005">1.4
Non-normative references<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>13</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901006">1.5 Data
representation<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>16</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901007">1.5.1 Bits<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>16</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901008">1.5.2 Two Byte
Integer<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>16</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901009">1.5.3 Four
Byte Integer<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>16</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901010">1.5.4 UTF-8
Encoded String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>16</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901011">1.5.5 Variable
Byte Integer<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>18</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901012">1.5.6 Binary
Data<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>19</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901013">1.5.7 UTF-8
String Pair<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>19</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901014">1.6 Security<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>19</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901015">1.7 Editing
convention<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>20</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901016">1.8 Change
history<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>20</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901017">1.8.1 MQTT
v3.1.1<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>20</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901018">1.8.2 MQTT
v5.0<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>20</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901019">2<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>MQTT
Control Packet format<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>21</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901020">2.1 Structure
of an MQTT Control Packet<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>21</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901021">2.1.1 Fixed
Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>21</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901022">2.1.2 MQTT
Control Packet type<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>21</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901023">2.1.3 Flags<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>22</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901024">2.1.4
Remaining Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>23</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901025">2.2 Variable
Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>23</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901026">2.2.1 Packet
Identifier<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>23</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901027">2.2.2
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>25</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901028">2.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>25</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901029">2.2.2.2
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>25</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901030">2.3 Payload<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>26</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901031">2.4 Reason
Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>27</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901032">3<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>MQTT
Control Packets<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>30</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901033">3.1 CONNECT 
Connection Request<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>30</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901034">3.1.1 CONNECT
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>30</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901035">3.1.2 CONNECT
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>30</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901036">3.1.2.1
Protocol Name<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>30</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901037">3.1.2.2
Protocol Version<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>31</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901038">3.1.2.3
Connect Flags<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>31</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901039">3.1.2.4 Clean
Start<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>32</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901040">3.1.2.5 Will
Flag<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>32</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901041">3.1.2.6 Will
QoS<span style='color:windowtext;display:none'>.. </span><span style='color:windowtext;display:none'>33</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901042">3.1.2.7 Will
Retain<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>33</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901043">3.1.2.8 User
Name Flag<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>33</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901044">3.1.2.9
Password Flag<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>33</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901045">3.1.2.10 Keep
Alive<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>34</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901046">3.1.2.11
CONNECT Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>34</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901047">3.1.2.11.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>34</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901048"><span
lang=EN-GB>3.1.2.11.2 Session Expiry Interval</span><span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>35</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901049">3.1.2.11.3
Receive Maximum<span style='color:windowtext;display:none'>... </span><span style='color:windowtext;display:none'>36</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901050">3.1.2.11.4
Maximum Packet Size<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>36</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901051">3.1.2.11.5
Topic Alias Maximum<span style='color:windowtext;display:none'>... </span><span style='color:windowtext;display:none'>37</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901052">3.1.2.11.6
Request Response Information<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>37</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901053">3.1.2.11.7
Request Problem Information<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>37</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901054">3.1.2.11.8
User Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>38</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901055">3.1.2.11.9
Authentication Method<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>38</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901056">3.1.2.11.10
Authentication Data<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>38</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901057">3.1.2.12
Variable Header non-normative example<span style='color:windowtext;display:
none'>. </span><span
style='color:windowtext;display:none'>39</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901058">3.1.3 CONNECT
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>40</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901059">3.1.3.1 Client
Identifier (ClientID)<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>40</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901060">3.1.3.2 Will
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>40</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901061">3.1.3.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>40</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901062">3.1.3.2.2 Will
Delay Interval<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>41</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901063">3.1.3.2.3
Payload Format Indicator<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>41</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901064">3.1.3.2.4
Message Expiry Interval<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>41</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901065">3.1.3.2.5
Content Type<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>42</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901066">3.1.3.2.6
Response Topic<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>42</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901067">3.1.3.2.7
Correlation Data<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>42</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901068">3.1.3.2.8 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>42</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901069">3.1.3.3 Will
Topic<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>42</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901070">3.1.3.4 Will
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>43</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901071">3.1.3.5 User
Name<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>43</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901072">3.1.3.6
Password<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>43</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901073">3.1.4 CONNECT
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>43</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901074">3.2 CONNACK 
Connect acknowledgement<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>44</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901075">3.2.1 CONNACK
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>45</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901076">3.2.2 CONNACK
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>45</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901077">3.2.2.1
Connect Acknowledge Flags<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>45</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901078">3.2.2.1.1
Session Present<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>45</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901079">3.2.2.2
Connect Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>46</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901080">3.2.2.3
CONNACK Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>47</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901081">3.2.2.3.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>47</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901082"><span
lang=EN-GB>3.2.2.3.2 Session Expiry Interval</span><span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>47</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901083">3.2.2.3.3
Receive Maximum<span style='color:windowtext;display:none'>... </span><span style='color:windowtext;display:none'>48</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901084">3.2.2.3.4
Maximum QoS<span style='color:windowtext;display:none'>.. </span><span style='color:windowtext;display:none'>48</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901085">3.2.2.3.5
Retain Available<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>49</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901086">3.2.2.3.6
Maximum Packet Size<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>49</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901087">3.2.2.3.7
Assigned Client Identifier<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>49</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901088">3.2.2.3.8
Topic Alias Maximum<span style='color:windowtext;display:none'>... </span><span style='color:windowtext;display:none'>50</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901089">3.2.2.3.9
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>50</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901090">3.2.2.3.10
User Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>50</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901091">3.2.2.3.11
Wildcard Subscription Available<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>50</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901092">3.2.2.3.12
Subscription Identifiers Available<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>51</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901093">3.2.2.3.13
Shared Subscription Available<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>51</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901094">3.2.2.3.14
Server Keep Alive<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>51</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901095">3.2.2.3.15
Response Information<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>52</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901096">3.2.2.3.16
Server Reference<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>52</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901097">3.2.2.3.17
Authentication Method<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>52</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901098">3.2.2.3.18
Authentication Data<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>52</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901099">3.2.3 CONNACK
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>53</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901100">3.3 PUBLISH 
Publish message<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>53</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901101">3.3.1 PUBLISH
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>53</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901102">3.3.1.1 DUP<span
style='color:windowtext;display:none'>.. </span><span
style='color:windowtext;display:none'>53</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901103">3.3.1.2 QoS<span
style='color:windowtext;display:none'>.. </span><span
style='color:windowtext;display:none'>54</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901104">3.3.1.3 RETAIN<span
style='color:windowtext;display:none'>.. </span><span
style='color:windowtext;display:none'>54</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901105">3.3.1.4
Remaining Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>55</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901106">3.3.2 PUBLISH
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>55</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901107">3.3.2.1 Topic
Name<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>55</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901108">3.3.2.2 Packet
Identifier<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>56</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901109">3.3.2.3
PUBLISH Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>56</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901110">3.3.2.3.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>56</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901111">3.3.2.3.2
Payload Format Indicator<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>56</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901112">3.3.2.3.3
Message Expiry Interval`<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>56</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901113">3.3.2.3.4
Topic Alias<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>57</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901114">3.3.2.3.5
Response Topic<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>58</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901115">3.3.2.3.6
Correlation Data<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>58</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901116">3.3.2.3.7 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>58</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901117">3.3.2.3.8
Subscription Identifier<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>59</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901118">3.3.2.3.9
Content Type<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>59</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901119">3.3.3 PUBLISH
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>60</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901120">3.3.4 PUBLISH
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>60</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901121">3.4 PUBACK 
Publish acknowledgement<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>62</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901122">3.4.1 PUBACK
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>63</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901123">3.4.2 PUBACK
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>63</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901124">3.4.2.1 PUBACK
Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>63</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901125">3.4.2.2 PUBACK
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>64</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901126">3.4.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>64</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901127">3.4.2.2.2
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>64</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901128">3.4.2.2.3 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>64</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901129">3.4.3 PUBACK
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>65</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901130">3.4.4 PUBACK
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>65</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901131">3.5 PUBREC 
Publish received (QoS 2 delivery part 1)<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>65</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901132">3.5.1 PUBREC
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>65</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901133">3.5.2 PUBREC
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>65</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901134">3.5.2.1 PUBREC
Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>65</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901135">3.5.2.2 PUBREC
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>66</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901136">3.5.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>66</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901137">3.5.2.2.2
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>66</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901138">3.5.2.2.3 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>67</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901139">3.5.3 PUBREC
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>67</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901140">3.5.4 PUBREC
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>67</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901141">3.6 PUBREL 
Publish release (QoS 2 delivery part 2)<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>67</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901142">3.6.1 PUBREL
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>67</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901143">3.6.2 PUBREL
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>67</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901144">3.6.2.1 PUBREL
Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>68</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901145">3.6.2.2 PUBREL
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>68</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901146">3.6.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>68</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901147">3.6.2.2.2
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>68</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901148">3.6.2.2.3 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>69</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901149">3.6.3 PUBREL
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>69</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901150">3.6.4 PUBREL
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>69</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901151">3.7 PUBCOMP 
Publish complete (QoS 2 delivery part 3)<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>69</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901152">3.7.1 PUBCOMP
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>69</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901153">3.7.2 PUBCOMP
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>69</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901154">3.7.2.1
PUBCOMP Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>70</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901155">3.7.2.2
PUBCOMP Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>70</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901156">3.7.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>70</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901157">3.7.2.2.2
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>70</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901158">3.7.2.2.3 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>70</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901159">3.7.3 PUBCOMP
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>71</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901160">3.7.4 PUBCOMP
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>71</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901161">3.8 SUBSCRIBE
- Subscribe request<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>71</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901162">3.8.1
SUBSCRIBE Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>71</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901163">3.8.2
SUBSCRIBE Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>71</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901164">3.8.2.1
SUBSCRIBE Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>72</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901165">3.8.2.1.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>72</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901166">3.8.2.1.2
Subscription Identifier<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>72</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901167">3.8.2.1.3 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>72</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901168">3.8.3
SUBSCRIBE Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>72</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901169">3.8.3.1
Subscription Options<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>73</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901170">3.8.4 SUBSCRIBE
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>75</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901171">3.9 SUBACK 
Subscribe acknowledgement<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>77</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901172">3.9.1 SUBACK
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>77</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901173">3.9.2 SUBACK
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>77</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901174">3.9.2.1 SUBACK
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>77</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901175">3.9.2.1.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>77</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901176">3.9.2.1.2
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>78</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901177">3.9.2.1.3 User
Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>78</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901178">3.9.3 SUBACK
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>78</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901179">3.10
UNSUBSCRIBE  Unsubscribe request<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>79</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901180">3.10.1
UNSUBSCRIBE Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>79</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901181">3.10.2
UNSUBSCRIBE Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>80</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901182">3.10.2.1
UNSUBSCRIBE Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>80</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901183">3.10.2.1.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>80</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901184">3.10.2.1.2
User Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>80</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901185">3.10.3
UNSUBSCRIBE Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>80</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901186">3.10.4
UNSUBSCRIBE Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>81</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901187">3.11 UNSUBACK
 Unsubscribe acknowledgement<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>81</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901188">3.11.1
UNSUBACK Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>82</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901189">3.11.2
UNSUBACK Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>82</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901190">3.11.2.1
UNSUBACK Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>82</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901191">3.11.2.1.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>82</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901192">3.11.2.1.2
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>82</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901193">3.11.2.1.3
User Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>83</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901194">3.11.3
UNSUBACK Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>83</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901195">3.12 PINGREQ 
PING request<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>83</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901196">3.12.1 PINGREQ
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>84</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901197">3.12.2 PINGREQ
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>84</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901198">3.12.3 PINGREQ
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>84</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901199">3.12.4 PINGREQ
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>84</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901200">3.13 PINGRESP
 PING response<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>84</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901201">3.13.1
PINGRESP Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>84</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901202">3.13.2
PINGRESP Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>85</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901203">3.13.3
PINGRESP Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>85</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901204">3.13.4
PINGRESP Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>85</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901205">3.14
DISCONNECT  Disconnect notification<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>85</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901206">3.14.1
DISCONNECT Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>85</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901207">3.14.2
DISCONNECT Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>85</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901208">3.14.2.1
Disconnect Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>86</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901209">3.14.2.2
DISCONNECT Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>88</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901210">3.14.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>88</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901211">3.14.2.2.2
Session Expiry Interval<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>88</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901212">3.14.2.2.3
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>88</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901213">3.14.2.2.4
User Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>88</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901214">3.14.2.2.5
Server Reference<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>88</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901215">3.14.3 DISCONNECT
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>89</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901216">3.14.4
DISCONNECT Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>89</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901217">3.15 AUTH 
Authentication exchange<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>89</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901218">3.15.1 AUTH
Fixed Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>90</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901219">3.15.2 AUTH
Variable Header<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>90</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901220">3.15.2.1
Authenticate Reason Code<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>90</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901221">3.15.2.2 AUTH
Properties<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>90</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901222">3.15.2.2.1
Property Length<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>90</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901223">3.15.2.2.2
Authentication Method<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>91</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901224">3.15.2.2.3
Authentication Data<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>91</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901225">3.15.2.2.4
Reason String<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>91</span></a></span></p>

<p class=MsoToc5><span class=MsoHyperlink><a href="#_Toc3901226">3.15.2.2.5
User Property<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>91</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901227">3.15.3 AUTH
Payload<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>91</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901228">3.15.4 AUTH
Actions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>91</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901229">4<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>Operational
behavior<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>92</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901230">4.1 Session
State<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>92</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901231">4.1.1 Storing
Session State<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>92</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901232">4.1.2 Session
State non-normative examples<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>93</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901233">4.2 Network
Connections<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>93</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901234">4.3 Quality of
Service levels and protocol flows<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>93</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901235">4.3.1 QoS 0:
At most once delivery<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>94</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901236">4.3.2 QoS 1:
At least once delivery<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>94</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901237">4.3.3 QoS 2:
Exactly once delivery<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>95</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901238">4.4 Message
delivery retry<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>96</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901239">4.5 Message
receipt<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>97</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901240">4.6 Message
ordering<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>97</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901241">4.7 Topic
Names and Topic Filters<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>98</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901242">4.7.1 Topic
wildcards<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>98</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901243">4.7.1.1 Topic
level separator<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>98</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901244">4.7.1.2
Multi-level wildcard<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>98</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901245">4.7.1.3
Single-level wildcard<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>99</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901246">4.7.2 Topics
beginning with $<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>99</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901247">4.7.3 Topic
semantic and usage<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>100</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901248">4.8
Subscriptions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>101</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901249">4.8.1 Non&#8209;shared
Subscriptions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>101</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901250">4.8.2 Shared
Subscriptions<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>101</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901251">4.9 Flow Control<span
style='color:windowtext;display:none'> </span><span
style='color:windowtext;display:none'>103</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901252">4.10 Request /
Response<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>104</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901253">4.10.1 Basic
Request Response (non-normative)<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>104</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901254">4.10.2
Determining a Response Topic value (non-normative)<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>105</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901255">4.11 Server
redirection<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>106</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901256">4.12 Enhanced
authentication<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>106</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901257">4.12.1
Re-authentication<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>108</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901258">4.13 Handling
errors<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>109</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901259">4.13.1
Malformed Packet and Protocol Errors<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>109</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901260">4.13.2 Other
errors<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>110</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901261">5<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>Security
(non-normative)<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>111</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901262">5.1
Introduction<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>111</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901263">5.2 MQTT
solutions: security and certification<span style='color:windowtext;display:
none'>. </span><span
style='color:windowtext;display:none'>111</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901264">5.3
Lightweight crytography and constrained devices<span style='color:windowtext;
display:none'>. </span><span
style='color:windowtext;display:none'>112</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901265">5.4
Implementation notes<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>112</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901266">5.4.1
Authentication of Clients by the Server<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>112</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901267">5.4.2
Authorization of Clients by the Server<span style='color:windowtext;display:
none'> </span><span
style='color:windowtext;display:none'>112</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901268">5.4.3
Authentication of the Server by the Client<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>113</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901269">5.4.4
Integrity of Application Messages and MQTT Control Packets<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>113</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901270">5.4.5 Privacy
of Application Messages and MQTT Control Packets<span style='color:windowtext;
display:none'>. </span><span
style='color:windowtext;display:none'>113</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901271">5.4.6
Non-repudiation of message transmission<span style='color:windowtext;
display:none'>. </span><span
style='color:windowtext;display:none'>114</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901272">5.4.7
Detecting compromise of Clients and Servers<span style='color:windowtext;
display:none'>. </span><span
style='color:windowtext;display:none'>114</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901273">5.4.8
Detecting abnormal behaviors<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>114</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901274">5.4.9 Handling
of Disallowed Unicode code points<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>115</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901275">5.4.9.1
Considerations for the use of Disallowed Unicode code points<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>115</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901276">5.4.9.2
Interactions between Publishers and Subscribers<span style='color:windowtext;
display:none'>. </span><span
style='color:windowtext;display:none'>115</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901277">5.4.9.3
Remedies<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>116</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901278">5.4.10 Other
security considerations<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>116</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901279">5.4.11 Use of
SOCKS<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>116</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901280">5.4.12
Security profiles<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>117</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901281">5.4.12.1 Clear
communication profile<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>117</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901282">5.4.12.2
Secured network communication profile<span style='color:windowtext;display:
none'>. </span><span
style='color:windowtext;display:none'>117</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901283">5.4.12.3
Secured transport profile<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>117</span></a></span></p>

<p class=MsoToc4><span class=MsoHyperlink><a href="#_Toc3901284">5.4.12.4
Industry specific security profiles<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>117</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901285">6<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>Using
WebSocket as a network transport<span style='color:windowtext;display:none'> </span><span style='color:windowtext;display:none'>118</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901286">6.1 IANA
considerations<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>118</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901287">7<span
style='font-size:11.0pt;font-family:"Calibri",sans-serif;color:windowtext'> </span>Conformance<span
style='color:windowtext;display:none'>. </span><span
style='color:windowtext;display:none'>119</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc3901288">7.1
Conformance clauses<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>119</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901289">7.1.1 MQTT
Server conformance clause<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>119</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc3901290">7.1.2 MQTT
Client conformance clause<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>119</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901291">Appendix A.
Acknowledgments<span style='color:windowtext;display:none'>. </span><span style='color:windowtext;display:none'>120</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901292">Appendix B.
Mandatory normative statement (non-normative)<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>121</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc3901293">Appendix C.
Summary of new features in MQTT v5.0 (non-normative)<span style='color:windowtext;
display:none'> </span><span
style='color:windowtext;display:none'>136</span></a></span></p>

<p class=TextBody>&nbsp;</p>

<p class=TextBody>&nbsp;</p>

</div>

<span style='font-size:10.0pt;font-family:"Arial",sans-serif'><br clear=all
style='page-break-before:always'>
</span>

<div class=WordSection2>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc3901000"></a><a name="_Toc514847873"></a><a
name="_Toc511988477"></a><a name="_Toc473619924"></a><a name="_Toc471483519"></a><a
name="_Toc471282689"></a><a name="_Toc464635074"></a><a name="_Toc464547779"></a><a
name="_Toc462729059">1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Introduction</a></h1>

</div>

<h2><a name="_Toc473619925"></a><a name="_Toc471483520"></a><a
name="_Toc471282690"></a><a name="_Toc464635075"></a><a name="_Toc464547780"></a><a
name="_Toc462729060"></a><a name="_Toc3901001"></a><a name="_Toc514847874"></a><a
name="_Toc511988478"></a><a name="_Toc489530032">1.0 Intellectual property
rights policy</a></h2>

<p class=MsoNormal>This specification is provided under the <a
href="https://www.oasis-open.org/policies-guidelines/ipr#Non-Assertion-Mode">Non-Assertion</a>
Mode of the <a href="https://www.oasis-open.org/policies-guidelines/ipr">OASIS
IPR Policy</a>, the mode chosen when the Technical Committee was established. For
information on whether any patents have been disclosed that may be essential to
implementing this specification, and any offers of patent licensing terms,
please refer to the Intellectual Property Rights section of the TCs web page (<a
href="https://www.oasis-open.org/committees/mqtt/ipr.php">https://www.oasis-open.org/committees/mqtt/ipr.php</a><span
class=MsoHyperlink>).</span></p>

<h2><a name="_Toc3901002"></a><a name="_Toc514847875"></a><a
name="_Toc511988479">1.1 Organization of the MQTT</a> specification</h2>

<p class=MsoNormal>The specification is split into seven chapters:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><span style='font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Introduction">Chapter 1 - Introduction</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><a name="_Toc370160699"></a><a name="_Toc370160558"></a><span
style='font-family:Symbol;color:black'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'><a href="#_MQTT_Control_Packet">Chapter
2 - MQTT Control Packet format</a></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><a name="_Toc370160700"></a><a name="_Toc370160559"></a><a
name="_Toc366615113"></a><a name="_Toc361871089"></a><a name="_Toc360556051"></a><a
name="_Toc359155648"></a><a name="_Toc359155536"></a><a name="_Toc358278239"></a><a
name="_Toc358220079"></a><a name="_Toc358219855"></a><a name="_Toc354228415"></a><a
name="_Toc354177526"></a><a name="_Toc353484665"></a><a name="_Toc353481296"></a><a
name="_Toc353481150"></a><span style='font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=MsoHyperlink><a href="#_MQTT_Control_Packets">Chapter
3 - MQTT Control Packets</a></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><a name="_Toc370160701"></a><a name="_Toc370160560"></a><a
name="_Toc366615114"></a><a name="_Toc361871090"></a><a name="_Toc360556052"></a><a
name="_Toc359155649"></a><a name="_Toc359155537"></a><a name="_Toc358278240"></a><a
name="_Toc358220080"></a><a name="_Toc358219856"></a><a name="_Toc354228416"></a><a
name="_Toc354177527"></a><a name="_Toc353484666"></a><a name="_Toc353481297"></a><a
name="_Toc353481151"></a><span style='font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'><a href="#_Operational_behavior">Chapter
4 - Operational behavior</a></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><span style='font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Security">Chapter 5 - Security</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><span style='font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Using_WebSocket_as">Chapter 6 - Using WebSocket as a
network transport</a></p>

<p class=MsoListParagraphCxSpLast style='margin-left:45.0pt;text-indent:-.25in;
line-height:11.5pt'><span class=MsoHyperlink><span style='font-family:Symbol;
color:black'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><a href="#_Conformance">Chapter 7 - Conformance Targets</a></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<h2><a name="_Toc3901003"></a><a name="_Toc514847876"></a><a
name="_Toc511988480"></a><a name="_Ref480182899"></a><a name="_Toc473619926"></a><a
name="_Toc471483521"></a><a name="_Toc471282691"></a><a name="_Toc464635076"></a><a
name="_Toc464547781"></a><a name="_Toc462729061"></a><a name="_Terminology"></a>1.2
Terminology</h2>

<p class=MsoNormal><a name="_Toc287332009"></a><a name="_Toc85472895">The key
words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;,
&quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD
NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot;
in this specification are to be interpreted as described in IETF RFC 2119 </a><a
href="#RFC2119">[RFC2119]</a>, except where they appear in text that is marked
as non-normative.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619927"><span class=Refterm>Network
Connection:</span></a></p>

<p class=MsoNormal><span class=Refterm>A construct provided by the underlying
transport protocol that is being used by MQTT. </span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:5.0pt;margin-left:35.7pt;
text-indent:-17.85pt'><span style='font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Arial",sans-serif;color:black'>It
connects the Client to the Server.</span></p>

<p style='margin-left:.5in;text-indent:-.25in'><span style='font-family:Symbol;
color:black'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Arial",sans-serif;color:black'>It
provides the means to send an ordered, lossless, stream of bytes in both
directions.</span></p>

<p class=MsoNormal>Refer to <a href="#_Network_Connections">section 4.2</a> Network
Connection for non-normative examples.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619928"><span class=Refterm>Application
Message:</span></a></p>

<p class=MsoNormal>The data carried by the MQTT protocol across the network for
the application. When an Application Message is transported by MQTT it contains
payload data, a Quality of Service (QoS), a collection of Properties, and a
Topic Name.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619929"></a><a name=Client></a><b>Client:</b></p>

<p class=MsoNormal>A program or device that uses MQTT. A Client:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>opens the Network Connection to the Server</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>publishes Application Messages that other Clients might be
interested in.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>subscribes to request Application Messages that it is interested
in receiving.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>unsubscribes to remove a request for Application Messages.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>closes the Network Connection to the Server.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619930"></a><a name=Server></a><b>Server:</b></p>

<p class=MsoNormal>A program or device that acts as an intermediary between
Clients which publish Application Messages and Clients which have made
Subscriptions. A Server:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>accepts Network Connections from Clients.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>accepts Application Messages published by Clients.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>processes Subscribe and Unsubscribe requests from Clients.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>forwards Application Messages that match Client Subscriptions.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>closes the Network Connection from the Client.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619931"><b>Session:</b></a></p>

<p class=MsoNormal>A stateful interaction between a Client and a Server. Some
Sessions last only as long as the Network Connection, others can span multiple
consecutive Network Connections between a Client and a Server.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619932"><b>Subscription:</b></a></p>

<p class=MsoNormal>A Subscription comprises a Topic Filter and a maximum QoS. A
Subscription is associated with a single Session. A Session can contain more
than one Subscription. Each Subscription within a Session has a different Topic
Filter.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619933"><b>Shared Subscription:</b></a></p>

<p class=MsoNormal>A Shared Subscription comprises a Topic Filter and a maximum
QoS. A Shared Subscription can be associated with more than one Session to
allow a wider range of message exchange patterns. An Application Message that
matches a Shared Subscription is only sent to the Client associated with one of
these Sessions. A Session can subscribe to more than one Shared Subscription
and can contain both Shared Subscriptions and Subscriptions which are not
shared.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619934"><b>Wildcard Subscription:</b></a></p>

<p class=MsoNormal>A Wildcard Subscription is a Subscription with a Topic
Filter containing one or more wildcard characters. This allows the subscription
to match more than one Topic Name. Refer to <a href="#_Topic_Names_and">section
4.7</a> for a description of wildcard characters in a Topic Filter.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619935"><b>Topic Name:</b></a></p>

<p class=MsoNormal>The label attached to an Application Message which is
matched against the Subscriptions known to the Server.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619936"><b>Topic Filter:</b></a></p>

<p class=MsoNormal>An expression contained in a Subscription to indicate an
interest in one or more topics. A Topic Filter can include wildcard characters.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619937"><b>MQTT Control Packet:</b></a></p>

<p class=MsoNormal>A packet of information that is sent across the Network
Connection. The MQTT specification defines fifteen different types of MQTT Control
Packet, for example the PUBLISH packet is used to convey Application Messages.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619938"><b>Malformed Packet:</b></a></p>

<p class=MsoNormal>A control packet that cannot be parsed according to this
specification. Refer to <a href="#_Handling_errors">section 4.13</a> for
information about error handling.</p>

<p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>&nbsp;</span></p>

<p class=MsoNormal><b>Protocol Error:</b></p>

<p class=MsoNormal>An error that is detected after the packet has been parsed
and found to contain data that is not allowed by the protocol or is
inconsistent with the state of the Client or Server. Refer to <a
href="#S4_13_Errors">section 4.13</a> for information about error handling.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>Will Message:</b></p>

<p class=MsoNormal>An Application Message which is published by the Server
after the Network Connection is closed in cases where the Network Connection is
not closed normally. Refer to <a href="#_Toc479576982">section 3.1.2.5</a> for
information about Will Messages.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>Disallowed Unicode code point:</b></p>

<p class=MsoNormal><a name="_Toc473619939"></a><a name="_Toc471483522"></a><a
name="_Toc471282692"></a><a name="_Toc464635077"></a><a name="_Toc464547782"></a><a
name="_Toc462729062">The set of Unicode Control Codes and Unicode Noncharacters
which should not be included in a UTF-8 Encoded String. Refer to </a><a
href="#_UTF-8_Encoded_String">section 1.5.4</a><span class=MsoHyperlink> f</span>or
more information about the Disallowed Unicode code points.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901004"></a><a name="_Toc514847877"></a><a
name="_Toc511988481">1.3 Normative references</a></h2>

<p class=MsoNormal><a name=RFC2119><em><b><span style='font-family:"Arial",sans-serif;
font-style:normal'>[RFC2119]</span></b></em></a></p>

<p class=MsoNormal>Bradner, S., &quot;Key words for use in RFCs to Indicate
Requirement Levels&quot;, BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, </p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC3629><b>[RFC3629]</b></a></p>

<p class=MsoNormal>Yergeau, F., &quot;UTF-8, a transformation format of ISO
10646&quot;, STD 63, RFC 3629, DOI 10.17487/RFC3629, November 2003,</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc3629">http://www.rfc-editor.org/info/rfc3629</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC6455><b>[</b></a><b>RFC6455]</b></p>

<p class=MsoNormal>Fette, I. and A. Melnikov, &quot;The WebSocket
Protocol&quot;, RFC 6455, DOI 10.17487/RFC6455, December 2011,</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc6455">http://www.rfc-editor.org/info/rfc6455</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=Unicode><b>[Unicode]</b></a></p>

<p class=MsoNormal>The Unicode Consortium. The Unicode Standard, </p>

<p class=MsoNormal><a href="http://www.unicode.org/versions/latest/">http://www.unicode.org/versions/latest/</a></p>

<p class=MsoNormal><span style='color:#0000EE'>&nbsp;</span></p>

<h2><a name="_Toc3901005"></a><a name="_Toc514847878"></a><a
name="_Toc511988482"></a><a name="_Toc473619940"></a><a name="_Toc471483523"></a><a
name="_Toc471282693"></a><a name="_Toc464635078"></a><a name="_Toc464547783"></a><a
name="_Toc462729063">1.4 Non-normative references</a></h2>

<p class=MsoNormal><a name=RFC793><b>[RFC0793]</b></a></p>

<p class=MsoNormal>Postel, J., &quot;Transmission Control Protocol&quot;, STD
7, RFC 793, DOI 10.17487/RFC0793, September 1981, <a
href="http://www.rfc-editor.org/info/rfc793">http://www.rfc-editor.org/info/rfc793</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC5246></a><b>[RFC5246]</b></p>

<p class=MsoNormal>Dierks, T. and E. Rescorla, &quot;The Transport Layer
Security (TLS) Protocol Version 1.2&quot;, RFC 5246, DOI 10.17487/RFC5246,
August 2008, </p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=AES><b>[AES]</b></a></p>

<p class=MsoNormal>Advanced Encryption Standard (AES) (FIPS PUB 197).</p>

<p class=MsoNormal><a
href="https://csrc.nist.gov/csrc/media/publications/fips/197/final/documents/fips-197.pdf">https://csrc.nist.gov/csrc/media/publications/fips/197/final/documents/fips-197.pdf</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=CHACHA20></a><b>[CHACHA20]</b></p>

<p class=MsoNormal><span lang=EN>ChaCha20 and Poly1305 for IETF Protocols</span></p>

<p class=MsoNormal><a href="https://tools.ietf.org/html/rfc7539"><span lang=EN>https://tools.ietf.org/html/rfc7539</span></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=FIPS1402><b>[FIPS1402]</b></a></p>

<p class=MsoNormal>Security Requirements for Cryptographic Modules (FIPS PUB
140-2)</p>

<p class=MsoNormal><a
href="https://csrc.nist.gov/csrc/media/publications/fips/140/2/final/documents/fips1402.pdf">https://csrc.nist.gov/csrc/media/publications/fips/140/2/final/documents/fips1402.pdf</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=IEEE8021AR><b>[IEEE 802.1AR]</b></a></p>

<p class=MsoNormal>IEEE Standard for Local and metropolitan area networks -
Secure Device Identity</p>

<p class=MsoNormal><a
href="http://standards.ieee.org/findstds/standard/802.1AR-2009.html">http://standards.ieee.org/findstds/standard/802.1AR-2009.html</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=ISO29192><b>[ISO29192]</b></a></p>

<p class=MsoNormal>ISO/IEC 29192-1:2012 Information technology -- Security
techniques -- Lightweight cryptography -- Part 1: General</p>

<p class=MsoNormal><a href="https://www.iso.org/standard/56425.html">https://www.iso.org/standard/56425.html</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>[MQTT NIST]</b></p>

<p class=MsoNormal>MQTT supplemental publication, MQTT and the NIST Framework
for Improving Critical Infrastructure Cybersecurity</p>

<p class=MsoNormal><a
href="http://docs.oasis-open.org/mqtt/mqtt-nist-cybersecurity/v1.0/mqtt-nist-cybersecurity-v1.0.html">http://docs.oasis-open.org/mqtt/mqtt-nist-cybersecurity/v1.0/mqtt-nist-cybersecurity-v1.0.html</a></p>

<p class=MsoNormal><span class=MsoHyperlink><span style='color:black'>&nbsp;</span></span></p>

<p class=MsoNormal><a name=MQTTNIST></a><a name=MQTTV311><span
class=MsoHyperlink><b><span style='color:black'>[MQTTV311</span></b></span></a><span
class=MsoHyperlink><b><span style='color:black'>]</span></b></span></p>

<p class=MsoNormal>MQTT V3.1.1 Protocol Specification</p>

<p class=MsoNormal><a
href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html</a></p>

<p class=MsoNormal><span class=MsoHyperlink><b><span style='color:black'>&nbsp;</span></b></span></p>

<p class=MsoNormal><a name=ISO20922></a><span class=MsoHyperlink><b><span
style='color:black'>[ISO20922]</span></b></span></p>

<p class=MsoNormal><span class=MsoHyperlink><span style='color:black'>MQTT V3.1.1
ISO Standard (ISO/IEC 20922:2016)</span></span></p>

<p class=MsoNormal><a href="https://www.iso.org/standard/69466.html">https://www.iso.org/standard/69466.html</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=NISTCSF><b>[NISTCSF]</b></a></p>

<p class=MsoNormal>Improving Critical Infrastructure Cybersecurity Executive
Order 13636</p>

<p class=MsoNormal><a
href="https://www.nist.gov/sites/default/files/documents/itl/preliminary-cybersecurity-framework.pdf">https://www.nist.gov/sites/default/files/documents/itl/preliminary-cybersecurity-framework.pdf</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>[<a name=NIST7628>NIST7628</a>]</b></p>

<p class=MsoNormal>NISTIR 7628 Guidelines for Smart Grid Cyber Security Catalogue</p>

<p class=MsoNormal><a
href="https://www.nist.gov/sites/default/files/documents/smartgrid/nistir-7628_total.pdf">https://www.nist.gov/sites/default/files/documents/smartgrid/nistir-7628_total.pdf</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=NSAB><b>[NSAB]</b></a></p>

<p class=MsoNormal>NSA Suite B Cryptography</p>

<p class=MsoNormal><a href="http://www.nsa.gov/ia/programs/suiteb_cryptography/">http://www.nsa.gov/ia/programs/suiteb_cryptography/</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=PCIDSS><b>[PCIDSS]</b></a></p>

<p class=MsoNormal>PCI-DSS Payment Card Industry Data Security Standard</p>

<p class=MsoNormal><a href="https://www.pcisecuritystandards.org/pci_security/">https://www.pcisecuritystandards.org/pci_security/</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC1928><b>[RFC1928]</b></a></p>

<p class=MsoNormal>Leech, M., Ganis, M., Lee, Y., Kuris, R., Koblas, D., and L.
Jones, &quot;SOCKS Protocol Version 5&quot;, RFC 1928, DOI 10.17487/RFC1928,
March 1996, </p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc1928">http://www.rfc-editor.org/info/rfc1928</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC4511><b>[RFC4511]</b></a></p>

<p class=MsoNormal>Sermersheim, J., Ed., &quot;Lightweight Directory Access
Protocol (LDAP): The Protocol&quot;, RFC 4511, DOI 10.17487/RFC4511, June 2006,
</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc4511">http://www.rfc-editor.org/info/rfc4511</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC5280><b>[RFC5280]</b></a></p>

<p class=MsoNormal>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley,
R., and W. Polk, &quot;Internet X.509 Public Key Infrastructure Certificate and
Certificate Revocation List (CRL) Profile&quot;, RFC 5280, DOI 10.17487/RFC5280,
May 2008, </p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc5280">http://www.rfc-editor.org/info/rfc5280</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC6066><b>[RFC6066]</b></a></p>

<p class=MsoNormal>Eastlake 3rd, D., &quot;Transport Layer Security (TLS)
Extensions: Extension Definitions&quot;, RFC 6066, DOI 10.17487/RFC6066,
January 2011,</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc6066">http://www.rfc-editor.org/info/rfc6066</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC6749><b>[RFC6749]</b></a></p>

<p class=MsoNormal>Hardt, D., Ed., &quot;The OAuth 2.0 Authorization
Framework&quot;, RFC 6749, DOI 10.17487/RFC6749, October 2012, </p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc6749">http://www.rfc-editor.org/info/rfc6749</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=RFC6960><b>[RFC6960]</b></a></p>

<p class=MsoNormal>Santesson, S., Myers, M., Ankney, R., Malpani, A., Galperin,
S., and C. Adams, &quot;X.509 Internet Public Key Infrastructure Online
Certificate Status Protocol - OCSP&quot;, RFC 6960, DOI 10.17487/RFC6960, June
2013,</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc6960">http://www.rfc-editor.org/info/rfc6960</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=SARBANES><b>[SARBANES]</b></a></p>

<p class=MsoNormal>Sarbanes-Oxley Act of 2002.</p>

<p class=MsoNormal><a
href="http://www.gpo.gov/fdsys/pkg/PLAW-107publ204/html/PLAW-107publ204.htm">http://www.gpo.gov/fdsys/pkg/PLAW-107publ204/html/PLAW-107publ204.htm</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name=USEUSAFEHARB></a><a name=USEUPRIVSH></a><b>[USEUPRIVSH]</b></p>

<p class=MsoNormal>U.S.-EU Privacy Shield Framework</p>

<p class=MsoNormal><a href="https://www.privacyshield.gov">https://www.privacyshield.gov</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>[RFC39<a name=RFC3986></a>86]</b></p>

<p class=MsoNormal>Berners-Lee, T., Fielding, R., and L. Masinter,
&quot;Uniform Resource Identifier (URI): Generic Syntax&quot;, STD 66, RFC
3986, DOI 10.17487/RFC3986, January 2005, </p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a></p>

<p class=MsoNormal><span class=MsoHyperlink><span style='color:black'>&nbsp;</span></span></p>

<p class=MsoNormal><a name=RFC1035><span class=MsoHyperlink><b><span
style='color:black'>[RFC1035]</span></b></span></a></p>

<p class=MsoNormal>Mockapetris, P., &quot;Domain names - implementation and
specification&quot;, STD 13, RFC 1035, DOI 10.17487/RFC1035, November 1987,</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc1035">http://www.rfc-editor.org/info/rfc1035</a></p>

<p class=MsoNormal><span class=MsoHyperlink><span style='color:black'>&nbsp;</span></span></p>

<p class=MsoNormal><a name=RFC2782><span class=MsoHyperlink><b><span
style='color:black'>[RFC2782]</span></b></span></a></p>

<p class=MsoNormal>Gulbrandsen, A., Vixie, P., and L. Esibov, &quot;A DNS RR
for specifying the location of services (DNS SRV)&quot;, RFC 2782, DOI
10.17487/RFC2782, February 2000,</p>

<p class=MsoNormal><a href="http://www.rfc-editor.org/info/rfc2782">http://www.rfc-editor.org/info/rfc2782</a></p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901006"></a><a name="_Toc514847879"></a><a
name="_Toc511988483"></a><a name="_Toc473619941"></a><a name="_Toc471483524"></a><a
name="_Toc471282694"></a><a name="_Toc464635079"></a><a name="_Toc464547784"></a><a
name="_Toc462729064">1.5 Data representation</a></h2>

<h3><a name="_Toc3901007"></a><a name="_Toc514847880"></a><a
name="_Toc511988484"></a><a name="_Toc473619942"></a><a name="_Toc471483525"></a><a
name="_Toc471282695"></a><a name="_Toc464635080"></a><a name="_Toc464547785"></a><a
name="_Toc462729065">1.5.1 Bits</a></h3>

<p class=MsoNormal>Bits in a byte are labelled 7 to 0. Bit number 7 is the most
significant bit, the least significant bit is assigned bit number 0.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901008"></a><a name="_Toc514847881"></a><a
name="_Toc511988485"></a><a name="_Toc473619943"></a><a name="_Toc471483526"></a><a
name="_Toc471282696"></a><a name="_Toc464635081"></a><a name="_Toc464547786"></a><a
name="_Toc462729066">1.5.2 Two Byte Integer</a></h3>

<p class=MsoNormal>Two Byte Integer data values are 16-bit unsigned integers in
big-endian order: the high order byte precedes the lower order byte. This means
that a 16-bit word is presented on the network as Most Significant Byte (MSB),
followed by Least Significant Byte (LSB).</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901009"></a><a name="_Toc514847882"></a><a
name="_Toc511988486"></a><a name="_Toc473619944"></a><a name="_Toc471483527"></a><a
name="_Toc471282697"></a><a name="_Toc464635082"></a><a name="_Toc464547787"></a><a
name="_Toc462729067">1.5.3 Four Byte Integer</a></h3>

<p class=MsoNormal>Four Byte Integer data values are 32-bit unsigned integers
in big-endian order: the high order byte precedes the successively lower order
bytes. This means that a 32-bit word is presented on the network as Most
Significant Byte (MSB), followed by the next most Significant Byte (MSB),
followed by the next most Significant Byte (MSB), followed by Least Significant
Byte (LSB). </p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901010"></a><a name="_Toc514847883"></a><a
name="_Toc511988487"></a><a name="_Ref511135420"></a><a name="_Ref476844429"></a><a
name="_Ref476844359"></a><a name="_Ref473621725"></a><a name="_Ref473621699"></a><a
name="_Ref473621654"></a><a name="_Toc473619945"></a><a name="_Toc471483528"></a><a
name="_Toc471282698"></a><a name="_Ref468180301"></a><a name="_Ref468107599"></a><a
name="_Toc464635083"></a><a name="_Toc464547788"></a><a name="_Toc462729068"></a><a
name="_UTF-8_Encoded_String"></a>1.5.4 UTF-8 Encoded String</h3>

<p class=MsoNormal>Text fields within the MQTT Control Packets described later
are encoded as UTF-8 strings. UTF-8 <a href="#RFC3629">[RFC3629]</a> is an
efficient encoding of Unicode <a href="#Unicode">[Unicode]</a> characters that
optimizes the encoding of ASCII characters in support of text-based
communications.<a href="#RFC3629"></a><a href="#Unicode"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Each of these strings is prefixed with a Two Byte Integer
length field that gives the number of bytes in a UTF-8 encoded string itself,
as illustrated in <span class=MsoHyperlink>Figure 1.1 Structure of UTF-8 Encoded
Strings</span> below. Consequently, the maximum size of a UTF-8 Encoded String is
65,535 bytes.<a href="#_Figure_1.1_Structure"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619946">Unless stated otherwise all UTF-8
encoded strings can have any length in the range 0 to 65,535 bytes.</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619947"></a><a name="_Figure_1.1_Structure"></a>Figure
1&#8209;1 Structure of UTF-8 Encoded Strings</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=213 valign=top style='width:159.6pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=213 valign=top style='width:159.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=426 colspan=8 valign=top style='width:319.2pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>String length MSB</p>
  </td>
 </tr>
 <tr>
  <td width=213 valign=top style='width:159.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=426 colspan=8 valign=top style='width:319.2pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>String length LSB</p>
  </td>
 </tr>
 <tr>
  <td width=213 valign=top style='width:159.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3 .</p>
  </td>
  <td width=426 colspan=8 valign=top style='width:319.2pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>UTF-8 encoded
  character data, if length &gt; 0.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The character data in a
UTF-8 Encoded String MUST be well-formed UTF-8 as defined by the Unicode
specification </span><a href="#Unicode"><span style='background:yellow'>[Unicode]</span></a><span
style='background:yellow'> and restated in RFC 3629 </span><a href="#RFC3629"><span
style='background:yellow'>[RFC3629]</span></a><span style='background:yellow'>.
In particular, the character data MUST NOT include encodings of code points
between U+D800 and U+DFFF</span> <span style='color:red'>[MQTT-1.5.4-1]</span>.<span
style='color:red'> </span><span style='color:black'>If the Client or Server
receives an MQTT Control Packet containing ill-formed UTF-8 it is a Malformed
Packet. Refer to </span><a href="#S4_13_Errors">section 4.13</a><span
style='color:black'> for information about handling errors<a
name="_Hlk511139803">.</a></span><a href="#Unicode"></a><a href="#RFC3629"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A UTF-8 Encoded String MUST
NOT include an encoding of the null character U+0000. </span><span
style='color:red'>[MQTT-1.5.4-2]</span>. If a receiver (Server or Client)
receives an MQTT Control Packet containing U+0000 it is a Malformed Packet.
Refer to<a href="#S4_13_Errors"> section 4.13</a> for information about
handling errors.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The data SHOULD NOT include encodings of the Unicode
[Unicode] code points listed below. If a receiver (Server or Client) receives an
MQTT Control Packet containing any of them it MAY treat it as a Malformed Packet.
These are the Disallowed Unicode code points. <span style='color:black'>Refer
to </span><a href="#S4_13_Errors">section </a><span
style='color:black'>5.4.9</span><span style='color:black'> for more information
about handling Disallowed Unicode code points.</span><a href="#Unicode"></a><a
href="#RFC3629"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>U+0001..U+001F control characters </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>U+007F..U+009F control characters </p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Code points defined in the Unicode specification <a
href="#Unicode">[Unicode]</a> to be non-characters (for example U+0FFFF) </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A UTF-8 encoded sequence
0xEF 0xBB 0xBF is always interpreted as U+FEFF (&quot;ZERO WIDTH NO-BREAK SPACE&quot;)
wherever it appears in a string and MUST NOT be skipped over or stripped off by
a packet receiver</span> <span style='color:red'>[MQTT-1.5.4-3]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:27.0pt'><a name="_Toc473619948"></a><a
name="_Toc462729069"><b>Non-normative example</b></a></p>

<p class=MsoNormal style='margin-left:27.0pt;text-align:justify'>For example,
the string A<span style='font-family:"Arial,MingLiU-ExtB",serif;color:black'>&#173780;</span>
which is <span style='font-family:"Arial,Verdana",serif;color:black'>LATIN
CAPITAL Letter A followed by the code point U+2A6D4 (which represents a CJK
IDEOGRAPH EXTENSION B character)</span> is encoded as follows: </p>

<p class=MsoNormal style='margin-left:27.0pt;text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619949"></a><a name="_Figure_1.2_UTF-8_1"></a>Figure
1&#8209;2 UTF-8 Encoded String non-normative example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>String Length MSB
  (0x00)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>String Length LSB
  (0x05)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>A (0x41)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>(0xF0)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>(0xAA)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr style='height:24.9pt'>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt;height:24.9pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:24.9pt'>
  <p class=MsoNormal align=center style='text-align:center'>(0x9B)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>(0x94)</p>
  </td>
 </tr>
 <tr>
  <td width=128 valign=top style='width:95.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901011"></a><a name="_Toc514847884"></a><a
name="_Toc511988488"></a><a name="_Toc473619950">1.5.5 Variable Byte Integer</a></h3>

<p class=MsoNormal>The Variable Byte Integer is encoded using an encoding
scheme which uses a single byte for values up to 127. Larger values are handled
as follows. The least significant seven bits of each byte encode the data, and
the most significant bit is used to indicate whether there are bytes following
in the representation. Thus, each byte encodes 128 values and a
&quot;continuation bit&quot;. The maximum number of bytes in the Variable Byte
Integer field is four. <span style='background:yellow'>The encoded value MUST
use the minimum number of bytes necessary to represent the value</span> <span
style='color:red'>[MQTT-1.5.5-1]. </span><span style='color:black'>This is
shown in </span>Table 1&#8209;1 Size of Variable Byte Integer<span
style='color:red'>.</span></p>

<p class=MsoCaption>&nbsp;</p>

<p class=MsoNormal><a name="_Ref482714684"></a><a name="_Toc473619951">Table </a>1&#8209;1
Size of Variable Byte Integer</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=61 valign=top style='width:45.9pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Digits</b></p>
  </td>
  <td width=240 valign=top style='width:2.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>From</b></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>To</b></p>
  </td>
 </tr>
 <tr>
  <td width=61 valign=top style='width:45.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=240 valign=top style='width:2.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>0 (0x00)</p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>127 (0x7F)</p>
  </td>
 </tr>
 <tr>
  <td width=61 valign=top style='width:45.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>2</p>
  </td>
  <td width=240 valign=top style='width:2.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>128 (0x80, 0x01)</p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>16,383 (0xFF, 0x7F)</p>
  </td>
 </tr>
 <tr>
  <td width=61 valign=top style='width:45.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>3</p>
  </td>
  <td width=240 valign=top style='width:2.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>16,384 (0x80, 0x80, 0x01)</p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>2,097,151 (0xFF, 0xFF, 0x7F)</p>
  </td>
 </tr>
 <tr>
  <td width=61 valign=top style='width:45.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>4</p>
  </td>
  <td width=240 valign=top style='width:2.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>2,097,152 (0x80, 0x80, 0x80,
  0x01)</p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>268,435,455 (0xFF, 0xFF, 0xFF,
  0x7F)</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473619952"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>The algorithm
for encoding a non-negative integer (X) into the Variable Byte Integer encoding
scheme is as follows:</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>&nbsp;</p>

<p class=MsoListParagraphCxSpFirst><span style='font-family:"Courier New"'>do</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> encodedByte
= X MOD 128</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> X
= X DIV 128</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> //
if there are more data to encode, set the top bit of this byte</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> if
(X &gt; 0)</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> encodedByte
= encodedByte OR 128</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> endif</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> 'output'
encodedByte</span></p>

<p class=MsoListParagraphCxSpLast><span style='font-family:"Courier New"'>while
(X &gt; 0)</span></p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>Where <span
style='font-family:"Arial,Consolas",serif'>MOD</span> is the modulo operator (<span
style='font-family:"Arial,Consolas",serif'>%</span> in C), <span
style='font-family:"Arial,Consolas",serif'>DIV</span> is integer division (<span
style='font-family:"Arial,Consolas",serif'>/ </span>in C), and <span
style='font-family:"Arial,Consolas",serif'>OR</span> is bit-wise or (<span
style='font-family:"Arial,Consolas",serif'>|</span> in C).</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473619953"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>The algorithm
for decoding a Variable Byte Integer type is as follows:</p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
font-family:"Courier New"'> </span></p>

<p class=MsoListParagraphCxSpFirst><span style='font-family:"Courier New"'>multiplier
= 1</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'>value
= 0</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'>do</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> encodedByte
= 'next byte from stream' </span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'>value
+= (encodedByte AND 127) * multiplier</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> if
(multiplier &gt; 128*128*128)</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> throw
Error(Malformed Variable Byte Integer)</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'> multiplier
*= 128</span></p>

<p class=MsoListParagraphCxSpLast><span style='font-family:"Courier New"'>while
((encodedByte AND 128) != 0)</span></p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>where <span
style='font-family:"Arial,Consolas",serif'>AND</span> is the bit-wise and
operator (<span style='font-family:"Arial,Consolas",serif'>&amp;</span> in C).</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619954">When this algorithm terminates, </a><span
style='font-family:"Arial,Consolas",serif'>value</span> contains the Variable
Byte Integer value.</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify'>&nbsp;</p>

<h3><a name="_Toc3901012"></a><a name="_Toc514847885"></a><a
name="_Toc511988489"></a><a name="_Toc473619955"></a><a name="_Toc471483530"></a><a
name="_Toc471282700"></a><a name="_Toc464635085"></a><a name="_Toc464547790">1.5.6
Binary Data</a></h3>

<p class=MsoNormal>Binary Data is represented by a Two Byte Integer length
which indicates the number of data bytes, followed by that number of bytes. Thus,
the length of Binary Data is limited to the range of 0 to 65,535 Bytes. </p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901013"></a><a name="_Toc514847886"></a><a
name="_Toc511988490"></a><a name="_Toc473619956"></a><a name="_Toc471483531"></a><a
name="_Toc471282701"></a><a name="_Toc464635086"></a><a name="_Toc464547791">1.5.7
UTF-8 String Pair</a></h3>

<p class=MsoNormal>A UTF-8 String Pair consists of two UTF-8 Encoded Strings.
This data type is used to hold name-value pairs. The first string serves as the
name, and the second string contains the value.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Both strings MUST comply
with the requirements for UTF-8 Encoded Strings</span> <span style='color:red'>[MQTT-1.5.7-1]</span>.
If a receiver (Client or Server) receives a string pair which does not meet
these requirements it is a Malformed Packet. Refer to <a href="#S4_13_Errors">section
4.13</a> for information about handling errors.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc462729071"></a><a name="_Toc3901014"></a><a
name="_Toc514847887"></a><a name="_Toc511988491"></a><a name="_Toc473619957"></a><a
name="_Toc471483532"></a><a name="_Toc471282702"></a><a name="_Toc464635087"></a><a
name="_Toc464547792">1.6 Security</a></h2>

<p class=MsoNormal><span style='background:white'>MQTT Client and Server
implementations SHOULD offer Authentication, Authorization and secure
communication options, such as those discussed in Chapter </span><span style='background:white'>5</span><span style='background:white'>. Applications
concerned with critical infrastructure, personally identifiable information, or
other personal or sensitive information are strongly advised to use these
security capabilities.</span></p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901015"></a><a name="_Toc514847888"></a><a
name="_Toc511988492"></a><a name="_Toc473619958"></a><a name="_Toc471483533"></a><a
name="_Toc471282703"></a><a name="_Toc464635088"></a><a name="_Toc464547793"><em><span
style='font-family:"Arial",sans-serif;font-style:normal'>1.7 </span></em><em><span
style='font-family:"Arial",sans-serif;font-style:normal'>Editing convention</span></em></a></h2>

<p class=MsoNormal>Text highlighted in <span style='background:yellow'>Yellow</span>
within this specification identifies conformance statements. Each conformance
statement has been assigned a reference in the format<span style='color:black'>
</span><span style='color:red'>[MQTT-x.x.x-y] </span><span style='color:black'>where
</span><span style='color:red'>x.x.x </span><span style='color:black'>is the
section number and </span><span style='color:red'>y</span><span
style='color:black'> is a statement counter within the section.</span></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<h2><a name="_Toc3901016"></a><a name="_Toc514847889"></a><a
name="_Toc511988493">1.8 Change history</a></h2>

<h3><a name="_Toc3901017"></a><a name="_Toc514847890"></a><a
name="_Toc511988494">1.8.1 MQTT v3.1.1</a></h3>

<p class=MsoNormal>MQTT v3.1.1 was the first OASIS standard version of MQTT <span class=MsoHyperlink><b><span style='color:black'>[MQTTV311</span></b></span><b>]</b>.</p>

<p class=MsoNormal>MQTT v3.1.1 is also standardized as ISO/IEC 20922:2016<a
href="#ISO20922"> <b>[ISO20922]</b>.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901018"></a><a name="_Toc514847891"></a><a
name="_Toc511988495">1.8.2 MQTT v5.0</a></h3>

<p class=MsoNormal>MQTT v5.0 adds a significant number of new features to MQTT
while keeping much of the core in place. The major functional objectives are: </p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Enhancements for scalability and large scale systems</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Improved error reporting</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Formalize common patterns including capability discovery and
request response</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Extensibility mechanisms including user properties</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Performance improvements and support for small clients</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#AppendixC">Appendix C</a> for a summary
of changes in MQTT v5.0.</p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc3901019"></a><a name="_Toc514847892"></a><a
name="_Toc511988496"></a><a name="_Toc473619959"></a><a name="_Toc471483534"></a><a
name="_Toc471282704"></a><a name="_Toc464635089"></a><a name="_Toc464547794"></a><a
name="_Toc462729072"></a><a name="_MQTT_Control_Packet"></a>2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>MQTT
Control Packet format</h1>

</div>

<h2><a name="_Toc3901020"></a><a name="_Toc514847893"></a><a
name="_Toc511988497"></a><a name="_Toc473619960"></a><a name="_Toc471483535"></a><a
name="_Toc471282705"></a><a name="_Toc464635090"></a><a name="_Toc464547795"></a><a
name="_Toc462729073"></a><a name="_Toc442180832"></a><a name="_Toc385349755"></a><a
name="_Toc385349204"></a><a name="_Toc384800392">2.1 Structure of an MQTT
Control Packet</a></h2>

<p class=MsoNormal>The MQTT protocol operates by exchanging a series of MQTT
Control Packets in a defined way. This section describes the format of these
packets. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An MQTT Control Packet consists of up to three parts, always
in the following order as shown below. <a href="#_Figure_2.1_-"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619961"></a><a name="_Ref459299432"></a><a
name="_Figure_2.1_-"></a><a name="_Figure_2.1_"></a>Figure 2&#8209;1
Structure of an MQTT Control Packet</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=643
 style='width:6.7in;border-collapse:collapse;border:none'>
 <tr>
  <td width=643 valign=top style='width:6.7in;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Fixed Header,
  present in all MQTT Control Packets</p>
  </td>
 </tr>
 <tr>
  <td width=643 valign=top style='width:6.7in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Variable Header,
  present in some MQTT Control Packets</p>
  </td>
 </tr>
 <tr>
  <td width=643 valign=top style='width:6.7in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Payload, present in
  some MQTT Control Packets</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc473619962"></a><a name="_Toc471483536"></a><a
name="_Toc471282706"></a><a name="_Toc464635091"></a><a name="_Toc464547796"></a><a
name="_Toc462729074"></a><a name="_Toc442180833"></a><a name="_Toc385349756"></a><a
name="_Toc385349206"></a><a name="_Toc384800393"></a><a name="_Toc353481305"></a><a
name="_Toc353481159"></a><a name="_Toc353481060">&nbsp;</a></p>

<h3><a name="_Toc3901021"></a><a name="_Toc514847894"></a><a
name="_Toc511988498">2.1.1 Fixed Header</a></h3>

<p class=MsoNormal>Each MQTT Control Packet contains a Fixed Header as shown
below.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoCaption><a name="_Ref459299955"></a><a name="_Figure_2.2_-"></a>Figure
2&#8209;2 Fixed Header format</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=69 valign=top style='width:51.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:.7in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=261 colspan=4 valign=top style='width:195.6pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Flags specific to
  each MQTT Control Packet type</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=532 colspan=8 valign=top style='width:399.0pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901022"></a><a name="_Toc514847895"></a><a
name="_Toc511988499"></a><a name="_Toc473619963"></a><a name="_Toc471483537"></a><a
name="_Toc471282707"></a><a name="_Toc464635092"></a><a name="_Toc464547797"></a><a
name="_Toc462729075"></a><a name="_Toc442180834"></a><a name="_Toc385349757"></a><a
name="_Toc385349208"></a><a name="_Toc384800394"></a><a name="_Toc353481306"></a><a
name="_Toc353481160"></a><a name="_Toc353481061">2.1.2 MQTT Control Packet type</a></h3>

<p class=MsoNormal><b>Position:</b> byte 1, bits 7-4.</p>

<p class=MsoNormal>Represented as a 4-bit unsigned value, the values are shown
below.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619964"></a><a name="_Ref459299555"></a><a
name="_Table_2.1_-"></a>Table 2&#8209;1 MQTT Control Packet types</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=667
 style='width:6.95in;border-collapse:collapse;border:none'>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Name</b></p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Direction of
  flow</b></p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Forbidden</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Connection request</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>2</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Connect acknowledgment</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>3</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or</p>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Publish message</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBACK</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>4</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or</p>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Publish acknowledgment (QoS 1)</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREC</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>5</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or</p>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Publish received (QoS 2 delivery part 1)</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREL</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>6</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or</p>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Publish release (QoS 2 delivery part 2)</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBCOMP</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>7</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or</p>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Publish complete (QoS 2 delivery part 3)</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBSCRIBE</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>8</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscribe request</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>9</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscribe acknowledgment</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UNSUBSCRIBE</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>10</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unsubscribe request</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UNSUBACK</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>11</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unsubscribe acknowledgment</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PINGREQ</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>12</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PING request</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PINGRESP</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>13</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PING response</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>14</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or</p>
  <p class=MsoNormal align=center style='text-align:center'>Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Disconnect notification</p>
  </td>
 </tr>
 <tr style='height:3.0pt'>
  <td width=111 valign=top style='width:83.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt;height:3.0pt'>
  <p class=MsoNormal>AUTH</p>
  </td>
  <td width=70 valign=top style='width:52.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:3.0pt'>
  <p class=MsoNormal align=center style='text-align:center'>15</p>
  </td>
  <td width=132 valign=top style='width:99.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:3.0pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client to Server or
  Server to Client</p>
  </td>
  <td width=354 valign=top style='width:265.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:3.0pt'>
  <p class=MsoNormal>Authentication exchange</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901023"></a><a name="_Toc514847896"></a><a
name="_Toc511988500"></a><a name="_Toc473619965"></a><a name="_Toc471483538"></a><a
name="_Toc471282708"></a><a name="_Toc464635093"></a><a name="_Toc464547798"></a><a
name="_Toc462729076"></a><a name="_Toc442180835"></a><a name="_Toc385349758"></a><a
name="_Toc385349210"></a><a name="_Toc384800395"></a><a name="_Toc353481307"></a><a
name="_Toc353481161"></a><a name="_Toc353481062">2.1.3 Flags</a></h3>

<p class=MsoNormal>The remaining bits [3-0] of byte 1 in the Fixed Header
contain flags specific to each MQTT Control Packet type as shown below<span
class=MsoHyperlink>.</span> <span style='background:yellow'>Where a flag bit is
marked as Reserved, it is reserved for future use and MUST be set to the
value listed</span> <span style='color:red'>[MQTT-2.1.3-1]</span>. If invalid
flags are received it is a Malformed Packet.<span style='color:red'> </span><span
style='color:black'>Refer to </span><a href="#S4_13_Errors">section 4.13</a><span
style='color:black'> for details about handling errors.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619966"></a><a name="_Table_2.2_-"></a>Table
2&#8209;2 Flag Bits</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=487
 style='width:365.4pt;margin-left:.25in;border-collapse:collapse;border:none'>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>MQTT Control
  Packet</b></p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Fixed Header
  flags</b></p>
  </td>
  <td width=48 valign=top style='width:.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit 3</b></p>
  </td>
  <td width=48 valign=top style='width:.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit 2</b></p>
  </td>
  <td width=48 valign=top style='width:.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit 1</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit 0</b></p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Used in MQTT v5.0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DUP</p>
  </td>
  <td width=96 colspan=2 valign=top style='width:1.0in;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>QoS</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>RETAIN</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBACK</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREC</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREL</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 style='width:.5in;border-top:none;border-left:none;border-bottom:
  solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBCOMP</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBSCRIBE</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UNSUBSCRIBE</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UNSUBACK</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PINGREQ</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PINGRESP</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
 <tr>
  <td width=121 valign=top style='width:90.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>AUTH</p>
  </td>
  <td width=150 valign=top style='width:112.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved </p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>DUP = Duplicate delivery of a PUBLISH packet</p>

<p class=MsoNormal>QoS = PUBLISH Quality of Service</p>

<p class=MsoNormal>RETAIN = PUBLISH retained message flag </p>

<p class=MsoNormal>Refer to <a href="#_CONNECT_Fixed_Header">section 3.3.1</a>
for a description of the DUP, QoS, and RETAIN flags in the PUBLISH packet.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901024"></a><a name="_Toc514847897"></a><a
name="_Toc511988501"></a><a name="_Ref475349700"></a><a name="_Toc473619967"></a><a
name="_Toc471483539"></a><a name="_Toc471282709"></a><a name="_Toc464635094"></a><a
name="_Toc464547799"></a><a name="_Toc462729077"></a><a name="_Dup"></a><a
name="_Toc384202089"></a><a name="_Toc384202090"></a><a name="_Toc384202091"></a><a
name="_Toc384202092"></a><a name="_Toc384202093"></a><a name="_Toc384202094"></a><a
name="_Toc384202095"></a><a name="_Toc384202096"></a><a name="_Toc384202097"></a><a
name="_Toc384202098"></a><a name="_Toc384202099"></a><a name="_Toc384202100"></a><a
name="_Toc384202101"></a><a name="_QoS"></a><a name="_Toc384202102"></a><a
name="_Toc384202104"></a><a name="_Toc384202105"></a><a name="_Table_2.3_-"></a><a
name="_RETAIN"></a><a name="_Toc384202132"></a><a name="_Toc384202135"></a><a
name="_Toc384202136"></a><a name="_Toc384202137"></a><a name="_Toc384202138"></a><a
name="_Toc384202139"></a><a name="_Toc384202141"></a><a name="_Toc384202142"></a><a
name="_Toc384202143"></a><a name="_Toc384202144"></a><a name="_Toc384202145"></a><a
name="_Remaining_Length"></a>2.1.4 Remaining Length</h3>

<p class=MsoNormal style='text-align:justify'><b>Position:</b> starts at byte
2.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal>The Remaining Length is a Variable Byte Integer that
represents the number of bytes remaining within the current Control Packet,
including data in the Variable Header and the Payload. The Remaining Length
does not include the bytes used to encode the Remaining Length. <span
lang=EN-GB>The packet size is the total number of bytes in an MQTT Control
Packet, this is equal to the length of the Fixed Header plus the Remaining
Length. </span></p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901025"></a><a name="_Toc514847898"></a><a
name="_Toc511988502"></a><a name="_Toc473619968">2.2 Variable Header</a></h2>

<p class=MsoNormal>Some types of MQTT Control Packet contain a Variable Header
component. It resides between the Fixed Header and the Payload. The content of
the Variable Header varies depending on the packet type. The Packet Identifier
field of Variable Header is common in several packet types. </p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901026"></a><a name="_Toc514847899"></a><a
name="_Toc511988503"></a><a name="_Toc473619969"></a><a name="_Toc471483541"></a><a
name="_Toc471282711"></a><a name="_Toc464635096"></a><a name="_Toc464547801"></a><a
name="_Toc462729079"></a><a name="_Toc442180838"></a><a name="_Toc385349761"></a><a
name="_Toc385349215"></a><a name="_Toc384800398"></a><a name="_Ref363726497"></a><a
name="_Ref363644896"></a><a name="_Ref363568656"></a><a name="_Ref363568594"></a><a
name="_Ref363041167"></a><a name="_Toc358219870"></a><a name="_Toc358220094"></a><a
name="_Toc358278254"></a><a name="_Toc359155438"></a><a name="_Toc359155550"></a><a
name="_Toc359155662"></a><a name="_Toc358219871"></a><a name="_Toc358220095"></a><a
name="_Toc358278255"></a><a name="_Toc359155439"></a><a name="_Toc359155551"></a><a
name="_Toc359155663"></a><a name="_Toc358219872"></a><a name="_Toc358220096"></a><a
name="_Toc358278256"></a><a name="_Toc359155440"></a><a name="_Toc359155552"></a><a
name="_Toc359155664"></a><a name="_Packet_Identifier"></a>2.2.1 Packet
Identifier</h3>

<p class=MsoNormal><a name="_Figure_2.3_-"></a>The Variable Header component of
many of the MQTT Control Packet types includes a Two Byte Integer Packet
Identifier field. These MQTT Control Packets are PUBLISH (where QoS &gt; 0),
PUBACK, PUBREC, PUBREL, PUBCOMP, SUBSCRIBE, SUBACK, UNSUBSCRIBE, UNSUBACK.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>MQTT Control Packets that require a Packet Identifier are shown
below:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoCaption>Table 2&#8209;3 MQTT Control Packets that contain a Packet
Identifier</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:.25in;border-collapse:collapse;border:none'>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-GB>MQTT Control Packet</span></b></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-GB>Packet Identifier field</span></b></p>
  </td>
 </tr>
 <tr style='height:17.05pt'>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt;height:17.05pt'>
  <p class=MsoNormal><span lang=EN-GB>CONNECT</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:17.05pt'>
  <p class=MsoNormal>NO</p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>CONNACK</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>NO</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBLISH</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES (If QoS &gt; 0)</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBACK</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBREC</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBREL</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBCOMP</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>SUBSCRIBE</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>SUBACK</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>UNSUBSCRIBE</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>UNSUBACK</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>YES</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PINGREQ</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>NO</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PINGRESP</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>NO</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>DISCONNECT</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>NO</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 valign=top style='width:96.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>AUTH</span></p>
  </td>
  <td width=171 valign=top style='width:128.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>NO</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A PUBLISH packet MUST NOT
contain a Packet Identifier if its QoS value is set to 0</span> <span
style='color:red'>[MQTT-2.2.1-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Each time a Client sends a
new SUBSCRIBE, UNSUBSCRIBE,or PUBLISH (where QoS &gt; 0) MQTT Control Packet it
MUST assign it a non-zero Packet Identifier that is currently unused</span> <span
style='color:red'>[MQTT-2.2.1-3]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Each time a Server sends a
new PUBLISH (with QoS &gt; 0) MQTT Control Packet it MUST assign it a non zero
Packet Identifier that is currently unused</span> <span style='color:red'>[MQTT-2.2.1-4]</span>.
</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Packet Identifier becomes available for reuse after the sender
has processed the corresponding acknowledgement packet, defined as follows. In
the case of a QoS 1 PUBLISH, this is the corresponding PUBACK; in the case of
QoS 2 PUBLISH it is PUBCOMP or a PUBREC with a Reason Code of 128 or greater.
For SUBSCRIBE or UNSUBSCRIBE it is the corresponding SUBACK or UNSUBACK. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Packet Identifiers used with PUBLISH, SUBSCRIBE and
UNSUBSCRIBE packets form a single, unified set of identifiers separately for
the Client and the Server in a Session. A Packet Identifier cannot be used by
more than one command at any time.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A PUBACK, PUBREC , PUBREL,
or PUBCOMP packet MUST contain the same Packet Identifier as the PUBLISH packet
that was originally sent</span> <span style='color:red'>[MQTT-2.2.1-5]</span>. <span
style='background:yellow'>A SUBACK and UNSUBACK MUST contain the Packet
Identifier that was used in the corresponding SUBSCRIBE and UNSUBSCRIBE packet respectively</span>
<span style='color:red'>[MQTT-2.2.1-6]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client and Server assign Packet Identifiers
independently of each other. As a result, Client-Server pairs can participate
in concurrent message exchanges using the same Packet Identifiers. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473619971"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>It is possible for a Client to send
a PUBLISH packet with Packet Identifier 0x1234 and then receive a different
PUBLISH packet with Packet Identifier 0x1234 from its Server before it receives
a PUBACK for the PUBLISH packet that it sent.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>Client  Server</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;text-autospace:none'><a
name="_Ref458502361"></a><a name="_Toc473619972"></a><a name="_Toc471483542"></a><a
name="_Identifier/Value_pairs"></a>PUBLISH Packet Identifier=0x1234 <span
style='font-size:13.0pt'>&#8210;&#8594;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;text-autospace:none'> 
<span style='font-size:13.0pt'>&#8592;&#8210; </span>PUBLISH Packet
Identifier=0x1234</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;text-autospace:none'>PUBACK Packet
Identifier=0x1234 <span style='font-size:13.0pt'>&#8210;&#8594;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;text-autospace:none'> 
 <span style='font-size:13.0pt'>&#8592;&#8210; </span>PUBACK
Packet Identifier=0x1234</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901027"></a><a name="_Toc514847900"></a><a
name="_Toc511988504"></a><a name="_Toc473619974"></a><a name="_Toc471483543"></a><a
name="_Toc471282713"></a><a name="_Ref468107682"></a><a name="_Toc464635098"></a><a
name="_Toc464547803"></a><a name="_Toc462729081"></a><a name="_Ref468182472"></a><a
name="_Properties"></a>2.2.2 Properties</h3>

<p class=MsoNormal>The last field in the Variable Header of the CONNECT, CONNACK,
PUBLISH, PUBACK, PUBREC, PUBREL, PUBCOMP, SUBSCRIBE, SUBACK, UNSUBSCRIBE,
UNSUBACK, DISCONNECT, and AUTH packet is a set of Properties. In the CONNECT
packet there is also an optional set of Properties in the Will Properties field
with the Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The set of Properties is composed of a Property Length followed
by the Properties.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc462729082"></a><a name="_Ref458502211"></a><a
name="_Toc464635099"></a><a name="_Toc464547804"></a><a name="_Toc3901028"></a><a
name="_Toc514847901"></a><a name="_Toc511988505"></a><a name="_Toc473619975"></a><a
name="_Toc471483544"></a><a name="_Toc471282714">2.2.2.1 Property Length</a> </h4>

<p class=MsoNormal>The Property Length is encoded as a Variable Byte Integer.
The Property Length does not include the bytes used to encode itself, but
includes the length of the Properties. <span style='background:yellow'>If there
are no properties, this MUST be indicated by including a Property Length of
zero</span> <span style='color:red'>[MQTT-2.2.2-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901029"></a><a name="_Toc514847902"></a><a
name="_Toc511988506"></a><a name="_Toc473619976"></a><a name="_Toc471483545"></a><a
name="_Toc471282715"></a><a name="_Ref468110273"></a><a name="_Toc462729083"></a><a
name="_Toc464635100"></a><a name="_Toc464547805">2.2.2.2 Property</a></h4>

<p class=MsoNormal>A Property consists of an Identifier which defines its usage
and data type, followed by a value. The Identifier is encoded as a Variable
Byte Integer. A Control Packet which contains an Identifier which is not valid
for its packet type, or contains a value not of the specified data type, is a
Malformed Packet. If received, use a CONNACK or DISCONNECT packet with Reason
Code 0x81 (Malformed Packet) as described in <a href="#S4_13_Errors">section
4.13</a> Handling errors. There is no significance in the order of Properties
with different Identifiers.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoCaption style='page-break-after:avoid'>Table 2&#8209;4
- Properties</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=685
 style='width:513.9pt;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=95 colspan=2 valign=top style='width:71.55pt;border:solid windowtext 1.0pt;
  background:white;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Identifier</b></p>
  </td>
  <td width=188 rowspan=2 valign=top style='width:141.3pt;border:solid windowtext 1.0pt;
  border-left:none;background:white;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Name (usage)</b></p>
  </td>
  <td width=150 rowspan=2 valign=top style='width:112.6pt;border:solid windowtext 1.0pt;
  border-left:none;background:white;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Type</b></p>
  </td>
  <td width=251 rowspan=2 valign=top style='width:188.45pt;border:solid windowtext 1.0pt;
  border-left:none;background:white;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Packet / Will Properties</b></p>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Dec</b></p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Hex</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x01</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Payload Format Indicator</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH, Will Properties</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x02</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Message Expiry Interval</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Four Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH, Will Properties</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>3</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x03</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Content Type</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH, Will Properties</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>8</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x08</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Response Topic</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH, Will Properties</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>9</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x09</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Correlation Data</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Binary Data</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH, Will Properties</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>11</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x0B</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Identifier</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Variable Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH, SUBSCRIBE</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>17</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x11</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session Expiry Interval</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Four Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>18</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x12</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Assigned Client Identifier</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>19</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x13</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Server Keep Alive</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Two Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>21</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x15</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Authentication Method</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK, AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>22</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x16</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Authentication Data</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Binary Data</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK, AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>23</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x17</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Request Problem Information</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>24</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x18</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Will Delay Interval</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Four Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Will Properties</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>25</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x19</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Request Response Information</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>26</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x1A</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Response Information</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>28</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x1C</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Server Reference </p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>31</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x1F</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Reason String</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 Encoded String</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, PUBREL, PUBCOMP, SUBACK,
  UNSUBACK, DISCONNECT, AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>33</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x21</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Receive Maximum</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Two Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>34</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x22</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Alias Maximum</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Two Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>35</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x23</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Alias</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Two Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>36</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x24</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Maximum QoS</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>37</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x25</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Retain Available</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>38</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x26</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>User Property</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UTF-8 String Pair</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK, PUBLISH, Will Properties, PUBACK,
  PUBREC, PUBREL, PUBCOMP, SUBSCRIBE, SUBACK, UNSUBSCRIBE, UNSUBACK,
  DISCONNECT, AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>39</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x27</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Maximum Packet Size</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Four Byte Integer</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNECT, CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>40</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x28</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Wildcard Subscription Available</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>41</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x29</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Identifier Available</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=45 valign=top style='width:33.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>42</p>
  </td>
  <td width=51 valign=top style='width:38.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x2A</p>
  </td>
  <td width=188 valign=top style='width:141.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Shared Subscription Available</p>
  </td>
  <td width=150 valign=top style='width:112.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Byte</p>
  </td>
  <td width=251 valign=top style='width:188.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:.4in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.4in'>Although the Property Identifier is
defined as a Variable Byte Integer, in this version of the specification all of
the Property Identifiers are one byte long.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901030"></a><a name="_Toc514847903"></a><a
name="_Toc511988507"></a><a name="_Toc473619979"></a><a name="_Toc471483546"></a><a
name="_Toc471282716"></a><a name="_Toc464635101"></a><a name="_Toc464547806"></a><a
name="_Toc462729084">2.3 Payload</a></h2>

<p class=MsoNormal>Some MQTT Control Packets contain a Payload as the final
part of the packet. In the PUBLISH packet this is the Application Message </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Ref486836985"></a><a name="_Table_2.6_-"></a>Table
2&#8209;5 - MQTT Control Packets that contain a Payload</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:.25in;border-collapse:collapse;border:none'>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-GB>MQTT Control Packet</span></b></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-GB>Payload</span></b></p>
  </td>
 </tr>
 <tr style='height:17.05pt'>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt;height:17.05pt'>
  <p class=MsoNormal><span lang=EN-GB>CONNECT</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:17.05pt'>
  <p class=MsoNormal>Required</p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>CONNACK</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBLISH</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>Optional</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBACK</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBREC</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBREL</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PUBCOMP</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>SUBSCRIBE</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>Required</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>SUBACK</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>Required</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>UNSUBSCRIBE</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>Required</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>UNSUBACK</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>Required</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PINGREQ</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>PINGRESP</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>DISCONNECT</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=124 valign=top style='width:93.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>AUTH</span></p>
  </td>
  <td width=105 valign=top style='width:78.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB>None</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901031"></a><a name="_Toc514847904"></a><a
name="_Toc511988508">2.4 Reason Code</a></h2>

<p class=MsoNormal>A Reason Code is a one byte unsigned value that indicates
the result of an operation. Reason Codes less than 0x80 indicate successful
completion of an operation. The normal Reason Code for success is 0. Reason
Code values of 0x80 or greater indicate failure.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The CONNACK, PUBACK, PUBREC, PUBREL, PUBCOMP, DISCONNECT and
AUTH Control Packets have a single Reason Code as part of the Variable Header.
The SUBACK and UNSUBACK packets contain a list of one or more Reason Codes in
the Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Reason Codes share a common set of values as shown
below.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoCaption style='page-break-after:avoid'><a name="_Ref486836950">Table
</a>2&#8209;6 - Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=673
 style='width:504.9pt;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=113 colspan=2 valign=top style='width:84.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code</b></p>
  </td>
  <td width=211 rowspan=2 valign=top style='width:158.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Name</b></p>
  </td>
  <td width=349 rowspan=2 valign=top style='width:261.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Packets</b></p>
  <p class=MsoNormal align=center style='text-align:center'><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Decimal</b></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Success</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, PUBREL, PUBCOMP, UNSUBACK, AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Normal disconnection</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Granted QoS 0</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x01</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Granted QoS 1</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x02</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Granted QoS 2</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>4</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x04</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Disconnect with Will Message</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>16</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x10</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No matching subscribers</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBACK, PUBREC</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>17</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x11</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No subscription existed</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>UNSUBACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>24</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x18</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Continue authentication</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>25</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x19</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Re-authenticate</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>AUTH</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>128</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x80</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unspecified error</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, SUBACK, UNSUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>129</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x81</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Malformed Packet</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>130</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x82</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Error</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>131</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x83</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Implementation specific error</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, SUBACK, UNSUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>132</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x84</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unsupported Protocol Version</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>133</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x85</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Client Identifier not valid</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>134</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x86</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Bad User Name or Password</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>135</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x87</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Not authorized</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, SUBACK, UNSUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>136</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x88</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server unavailable</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>137</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x89</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server busy</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>138</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8A</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Banned</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>139</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8B</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server shutting down</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>140</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8C</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Bad authentication method</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>141</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8D</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive timeout</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>142</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8E</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session taken over</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>143</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8F</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter invalid</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK, UNSUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>144</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x90</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Name invalid</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>145</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x91</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier in use</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBACK, PUBREC, SUBACK, UNSUBACK</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>146</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x92</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier not found</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREL, PUBCOMP</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>147</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x93</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Receive Maximum exceeded</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>148</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x94</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Alias invalid</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>149</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x95</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet too large</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>150</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x96</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Message rate too high</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>151</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x97</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Quota exceeded</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, SUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>152</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x98</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Administrative action</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>153</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x99</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Payload format invalid</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, PUBACK, PUBREC, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>154</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9A</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Retain not supported</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>155</p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9B</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>QoS not supported</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>156</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9C</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Use another server</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>157</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9D</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server moved</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>158</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9E</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Shared Subscriptions not supported</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>159</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9F</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Connection rate exceeded</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CONNACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>160</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0xA0</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Maximum connect time</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>161</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0xA1</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Identifiers not supported</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK, DISCONNECT</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=66 valign=top style='width:49.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>162</span></p>
  </td>
  <td width=47 valign=top style='width:35.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0xA2</p>
  </td>
  <td width=211 valign=top style='width:158.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Wildcard Subscriptions not supported</p>
  </td>
  <td width=349 valign=top style='width:261.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>SUBACK, DISCONNECT</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>For Reason Code 0x91 (Packet
identifier in use), the response to this is either to try to fix the state, or
to reset the Session state by connecting using Clean Start set to 1, or to
decide if the Client or Server implementations are defective.</p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc3901032"></a><a name="_Toc514847905"></a><a
name="_Toc511988509"></a><a name="_Toc473619980"></a><a name="_Toc471483547"></a><a
name="_Toc471282717"></a><a name="_Toc464635102"></a><a name="_Toc464547807"></a><a
name="_Toc462729085"></a><a name="_MQTT_Control_Packets"></a>3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>MQTT
Control Packets</h1>

</div>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901033"></a><a name="_Toc514847906"></a><a
name="_Toc511988510"></a><a name="_Toc473619981"></a><a name="_Toc471483548"></a><a
name="_Toc471282718"></a><a name="_Toc464635103"></a><a name="_Toc464547808"></a><a
name="_Toc462729086"></a><a name="_Toc442180841"></a><a name="_Toc385349764"></a><a
name="_Toc385349221"></a><a name="_Toc384800401"></a><a name="_Ref363033523"></a><a
name="_CONNECT__Connection"></a>3.1 CONNECT  Connection Request </h2>

<p class=MsoNormal><span style='background:yellow'>After a Network Connection
is established by a Client to a Server, the first packet sent from the Client to
the Server MUST be a CONNECT packet</span> <span style='color:red'>[MQTT-3.1.0-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Client can only send the CONNECT packet once over a
Network Connection. <span style='background:yellow'>The Server MUST process a
second CONNECT packet sent from a Client as a Protocol Error and close the
Network Connection</span> <span style='color:red'>[MQTT-3.1.0-2]</span>. Refer to
<a href="#S4_13_Errors">section 4.13</a> for information about handling errors.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'>The Payload contains one or more
encoded fields. They specify a unique Client identifier for the Client, a Will Topic,
Will Payload, User Name and Password. All but the Client identifier can be
omitted and their presence is determined based on flags in the Variable Header.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h3><a name="_Toc3901034"></a><a name="_Toc514847907"></a><a
name="_Toc511988511"></a><a name="_Toc473619982"></a><a
name="_CONNECT_Fixed_Header"></a>3.1.1 CONNECT Fixed Header</h3>

<p class=MsoCaption><a name="_Figure_3.1_"></a>Figure 3&#8209;1
- CONNECT packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=64 valign=top style='width:47.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=70 valign=top style='width:52.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=62 valign=top style='width:46.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=249 colspan=4 valign=top style='width:186.6pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (1)</p>
  </td>
  <td width=283 colspan=4 valign=top style='width:2.95in;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=53 valign=top style='width:39.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=70 valign=top style='width:52.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=62 valign=top style='width:46.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=79 valign=top style='width:59.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=532 colspan=8 valign=top style='width:399.0pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473619983"><b>Remaining Length field</b></a></p>

<p class=MsoNormal>This is the length of the Variable Header plus the length of
the Payload. It is encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901035"></a><a name="_Toc514847908"></a><a
name="_Toc511988512"></a><a name="_Toc473619984">3.1.2 CONNECT Variable Header</a></h3>

<p class=MsoNormal>The Variable Header for the CONNECT Packet contains the following
fields in this order: Protocol Name, Protocol Level, Connect Flags, Keep Alive,
and Properties. The rules for encoding Properties are described in <a
href="#_Properties">section 2.2.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901036"></a><a name="_Toc514847909"></a><a
name="_Toc511988513"></a><a name="_Toc473619985"></a><a name="_Toc471483551"></a><a
name="_Toc471282721"></a><a name="_Toc464635106"></a><a name="_Toc464547811"></a><a
name="_Toc462729089"></a><a name="_Toc385349225">3.1.2.1 Protocol Name</a></h4>

<p class=MsoCaption><a name="_Figure_3.2_-"></a>Figure 3&#8209;2
- Protocol Name bytes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:-.05in;border-collapse:collapse;border:none'>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=643 colspan=10 valign=top style='width:6.7in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Name</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length MSB (0)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length LSB (4)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>M</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Q</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>T</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>T</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'>The Protocol Name is a UTF-8
Encoded String that represents the protocol name MQTT, capitalized as shown.
The string, its offset and length will not be changed by future versions of the
MQTT specification.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Server which support multiple protocols uses the Protocol
Name to determine whether the data is MQTT. <span style='background:yellow'>The
protocol name MUST be the UTF-8 String &quot;MQTT&quot;. If the Server does not
want to accept the CONNECT, and wishes to reveal that it is an MQTT Server it
MAY send a CONNACK packet with Reason Code of 0x84 (Unsupported Protocol
Version), and then it MUST close the Network Connection</span><span
style='color:red'> [MQTT-3.1.2-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473619986"><b>Non-normative
comment</b></a><b> </b></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473619987">Packet
inspectors, such as firewalls, could use the Protocol Name to identify MQTT
traffic.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901037"></a><a name="_Toc514847910"></a><a
name="_Toc511988514"></a><a name="_Toc473619988"></a><a name="_Toc471483552"></a><a
name="_Toc471282722"></a><a name="_Toc464635107"></a><a name="_Toc464547812"></a><a
name="_Toc462729090"></a><a name="_Toc385349227">3.1.2.2 Protocol Version</a></h4>

<p class=MsoCaption><a name="_Figure_3.3_-"></a>Figure 3&#8209;3
- Protocol Version byte</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:-.05in;border-collapse:collapse;border:none'>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=643 colspan=10 valign=top style='width:6.7in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Level</p>
  </td>
 </tr>
 <tr>
  <td width=111 valign=top style='width:83.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Version(5)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal>The one byte unsigned value that represents the revision
level of the protocol used by the Client. The value of the Protocol Version
field for version 5.0 of the protocol is 5 (0x05). </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Server which supports multiple versions of the MQTT
protocol uses the Protocol Version to determine which version of MQTT the
Client is using. <span style='background:yellow'>If the Protocol Version is not
5 and the Server does not want to accept the CONNECT packet, the Server MAY
send a CONNACK packet with Reason </span><span style='background:yellow'>Code
0x84 (Unsupported Protocol Version) and then MUST close the Network Connection</span>
<span style='color:red'>[MQTT-3.1.2-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901038"></a><a name="_Toc514847911"></a><a
name="_Toc511988515"></a><a name="_Toc473619989"></a><a name="_Toc471483553"></a><a
name="_Toc471282723"></a><a name="_Toc464635108"></a><a name="_Toc464547813"></a><a
name="_Toc462729091"></a><a name="_Toc385349229">3.1.2.3 Connect Flags</a></h4>

<p class=MsoNormal>The Connect Flags byte contains several parameters
specifying the behavior of the MQTT connection. It also indicates the presence
or absence of fields in the Payload.</p>

<p class=MsoCaption><a name="_Figure_3.4_-"></a>Figure 3&#8209;4
- Connect Flag bits</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=65 valign=top style='width:48.55pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=85 valign=top style='width:63.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=84 valign=top style='width:63.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=47 valign=top style='width:35.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=47 valign=top style='width:35.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=76 valign=top style='width:56.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=78 valign=top style='width:58.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=71 valign=top style='width:53.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=65 valign=top style='width:48.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=85 valign=top style='width:63.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>User Name Flag</p>
  </td>
  <td width=84 valign=top style='width:63.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Password Flag</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Will Retain</p>
  </td>
  <td width=95 colspan=2 valign=top style='width:70.9pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Will QoS</p>
  </td>
  <td width=76 valign=top style='width:56.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Will Flag</p>
  </td>
  <td width=78 valign=top style='width:58.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Clean Start</p>
  </td>
  <td width=71 valign=top style='width:53.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=65 valign=top style='width:48.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 8</p>
  </td>
  <td width=85 valign=top style='width:63.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=84 valign=top style='width:63.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=47 valign=top style='width:35.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=47 valign=top style='width:35.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=76 valign=top style='width:56.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=78 valign=top style='width:58.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=71 valign=top style='width:53.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='background:yellow'>The Server MUST validate
that the reserved flag in the CONNECT packet is set to 0</span> <span
style='color:red'>[MQTT-3.1.2-3]</span>. If the reserved flag is not 0 it is a
Malformed Packet. Refer to <a href="#S4_13_Errors">section 4.13</a> for
information about handling errors.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h4><a name="_Toc3901039"></a><a name="_Toc514847912"></a><a
name="_Toc511988516"></a><a name="_Ref475089814"></a><a name="_Toc473619990"></a><a
name="_Toc471483554"></a><a name="_Toc471282724"></a><a name="_Toc464635109"></a><a
name="_Toc464547814"></a><a name="_Toc462729092"></a><a name="_Clean_Start"></a>3.1.2.4
Clean Start</h4>

<p class=MsoNormal style='text-align:justify'><b>Position:</b> bit 1 of the
Connect Flags byte.</p>

<p class=MsoCommentText>&nbsp;</p>

<p class=MsoCommentText>This bit specifies whether the Connection starts a new
Session or is a continuation of an existing Session. Refer to <a
href="#_Session_State">section 4.1</a> for a definition of the Session State.</p>

<p class=MsoCommentText>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'><span style='background:yellow'>If
a CONNECT packet is received with Clean Start is set to 1, the Client and
Server MUST discard any existing Session and start a new Session</span> <span
style='color:red'>[MQTT-3.1.2-4]</span>. Consequently, the Session Present flag
in CONNACK is always set to 0 if Clean Start is set to 1.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'><span style='background:yellow'>If
a CONNECT packet is received with Clean Start set to 0 and there is a Session
associated with the Client Identifier, the Server MUST resume communications
with the Client based on state from the existing Session</span> <span
style='color:red'>[MQTT-3.1.2-5]</span>. <span style='background:yellow'>If a
CONNECT packet is received with Clean Start set to 0 and there is no Session
associated with the Client Identifier, the Server MUST create a new Session</span>
<span style='color:red'>[MQTT-3.1.2-6]</span>.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h4><a name="_Toc3901040"></a><a name="_Toc514847913"></a><a
name="_Toc511988517"></a><a name="_Toc473619992"></a><a name="_Toc471483555"></a><a
name="_Toc471282725"></a><a name="_Toc464635110"></a><a name="_Toc464547815"></a><a
name="_Toc462729093"></a><a name="_Toc385349232"></a><a name="_Ref363648298"></a><a
name="_Toc479576982"></a><a name="_Toc479577304"></a><a name="_Toc479924807"></a><a
name="_Toc479932916"></a><a name="_Toc479937089"></a><a name="_Will_Flag"></a>3.1.2.5
Will Flag</h4>

<p class=MsoNormal><b>Position:</b> bit 2 of the Connect Flags.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Will Flag is set to 1
this indicates that a Will Message MUST be stored on the Server and associated
with the Session</span> <span style='color:red'>[MQTT-3.1.2-7]</span>. The Will
Message consists of the Will Properties, Will Topic, and Will Payload fields in
the CONNECT Payload. <span style='background:yellow'>The Will Message MUST be
published after the Network Connection is subsequently closed and either the
Will Delay Interval has elapsed or the Session ends, unless the Will Message
has been deleted by the Server on receipt of a DISCONNECT packet with Reason
Code 0x00 (Normal disconnection) or a new Network Connection for the ClientID
is opened before the Will Delay Interval has elapsed</span> <span
style='color:red'>[MQTT-3.1.2-8]</span><span style='color:black'>.</span><span
style='font-size:7.0pt;color:black;background:white'> </span></p>

<p class=MsoNormal>Situations in which the Will Message is published include,
but are not limited to:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>An I/O error or network failure detected by the Server.</li>
 <li class=MsoNormal>The Client fails to communicate within the Keep Alive
     time.</li>
 <li class=MsoNormal>The Client closes the Network Connection without first
     sending a DISCONNECT packet with a Reason Code 0x00 (Normal disconnection).</li>
 <li class=MsoNormal>The Server closes the Network Connection without first
     receiving a DISCONNECT packet with a Reason Code 0x00 (Normal
     disconnection).</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Will Flag is set to
1, the Will Properties, Will Topic, and Will Payload fields MUST be present in
the Payload</span> <span style='color:red'>[MQTT-3.1.2-9]</span>. <span
style='background:yellow'>The Will Message MUST be removed from the stored
Session State in the Server once it has been published or the Server has
received a DISCONNECT packet with a Reason Code of 0x00 (Normal disconnection)
from the Client</span> <span style='color:red'>[MQTT-3.1.2-10]</span><span
style='color:black'>.</span> </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server SHOULD publish Will Messages promptly after the
Network Connection is closed and the Will Delay Interval has passed, or when
the Session ends, whichever occurs first. In the case of a Server shutdown or
failure, the Server MAY defer publication of Will Messages until a subsequent
restart. If this happens, there might be a delay between the time the Server
experienced failure and when the Will Message is published.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_Will_Delay_Interval_1">section 3.1.3.2</a>
for information about the Will Delay Interval.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Hlk483497062"></a><a
name="_Toc473619993"><b>Non-normative comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The Client can arrange for the Will
Message to notify that Session Expiry has occurred by setting the Will Delay
Interval to be longer than the Session Expiry Interval and sending DISCONNECT
with Reason Code 0x04 (Disconnect with Will Message).</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901041"></a><a name="_Toc514847914"></a><a
name="_Toc511988518"></a><a name="_Toc473619994"></a><a name="_Toc471483556"></a><a
name="_Toc471282726"></a><a name="_Toc464635111"></a><a name="_Toc464547816"></a><a
name="_Toc462729094"></a><a name="_Toc385349233">3.1.2.6 Will QoS</a></h4>

<p class=MsoNormal><b>Position:</b> bits 4 and 3 of the Connect Flags.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>These two bits specify the QoS level to be used when
publishing the Will Message. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Will Flag is set to 0,
then the Will QoS MUST be set to 0</span><span class=apple-converted-space><span
style='font-size:6.0pt;color:black;background:yellow'> </span></span><span
style='background:yellow'>(0x00)</span> <span style='color:red'>[MQTT-3.1.2-11]</span>.</p>

<p class=MsoNormal><span style='background:yellow'>If the Will Flag is set to
1, the value of Will QoS can be 0 (0x00), 1 (0x01), or 2 (0x02)</span> <span
style='color:red'>[MQTT-3.1.2-12]</span>.<span style='color:red'> </span>A
value of 3 (0x03) is a Malformed Packet.<span style='color:red'> </span>Refer to
<a href="#S4_13_Errors">section 4.13</a> for information about handling errors.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901042"></a><a name="_Toc514847915"></a><a
name="_Toc511988519"></a><a name="_Toc473619995"></a><a name="_Toc471483557"></a><a
name="_Toc471282727"></a><a name="_Toc464635112"></a><a name="_Toc464547817"></a><a
name="_Toc462729095"></a><a name="_Toc385349234">3.1.2.7 Will Retain</a></h4>

<p class=MsoNormal><b>Position:</b> bit 5 of the Connect Flags.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This bit specifies if the Will Message is to be retained
when it is published.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Will Flag is set to
0, then Will Retain MUST be set to 0</span><span style='color:red'> [MQTT-3.1.2-13]</span>.<span
style='color:red'> </span><span style='background:yellow'>If the Will Flag is
set to 1 and Will Retain is set to 0, the Server MUST publish the Will Message
as a non-retained message</span> <span style='color:red'>[MQTT-3.1.2-14]</span>.<span
style='color:red'> </span><span style='background:yellow'>If the Will Flag is
set to 1 and Will Retain is set to 1, the Server MUST publish the Will Message
as a retained message</span><span style='color:black'> </span><span
style='color:red'>[MQTT-3.1.2-15]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901043"></a><a name="_Toc514847916"></a><a
name="_Toc511988520"></a><a name="_Toc473619996"></a><a name="_Toc471483558"></a><a
name="_Toc471282728"></a><a name="_Toc464635113"></a><a name="_Toc464547818"></a><a
name="_Toc462729096"></a><a name="_Toc385349235">3.1.2.8 User Name Flag</a></h4>

<p class=MsoNormal><b>Position:</b> bit 7 of the Connect Flags.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the User Name Flag is set
to 0, a User Name MUST NOT be present in the Payload</span> <span
style='color:red'>[MQTT-3.1.2-16]</span>. <span style='background:yellow'>If
the User Name Flag is set to 1, a User Name MUST be present in the Payload</span>
<span style='color:red'>[MQTT-3.1.2-17]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901044"></a><a name="_Toc514847917"></a><a
name="_Toc511988521"></a><a name="_Toc473619997"></a><a name="_Toc471483559"></a><a
name="_Toc471282729"></a><a name="_Toc464635114"></a><a name="_Toc464547819"></a><a
name="_Toc462729097"></a><a name="_Toc385349236">3.1.2.9 Password Flag</a></h4>

<p class=MsoNormal><b>Position:</b> bit 6 of the Connect Flags.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Password Flag is set
to 0, a Password MUST NOT be present in the Payload</span> <span
style='color:red'>[MQTT-3.1.2-18]</span>. <span style='background:yellow'>If
the Password Flag is set to 1, a Password MUST be present in the Payload</span><a
name="_Toc462729098"></a><a name="_Toc385349237"></a><a name="_Ref363645900"></a><a
name="_Keep_Alive"></a> <span style='color:red'>[MQTT-3.1.2-19].</span></p>

<p class=MsoNormal><b><span lang=EN-GB>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>This version of the protocol allows
the sending of a Password with no User Name, where MQTT v3.1.1 did not. This
reflects the common use of Password for credentials other than a password.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h4><a name="_Toc3901045"></a><a name="_Toc514847918"></a><a
name="_Toc511988522"></a><a name="_Ref477964003"></a><a name="_Ref477963967"></a><a
name="_Toc473619998"></a><a name="_Toc471483560"></a><a name="_Toc471282730"></a><a
name="_Toc464635115"></a><a name="_Toc464547820"></a><a name="_Keep_Alive_1"></a>3.1.2.10
Keep Alive</h4>

<p class=MsoCaption><a name="_Figure_3.5_Keep"></a>Figure 3&#8209;5
- Keep Alive bytes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=70 valign=top style='width:52.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Bit</b></p>
  </td>
  <td width=75 valign=top style='width:56.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>7</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>6</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>4</b></p>
  </td>
  <td width=66 valign=top style='width:49.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>3</b></p>
  </td>
  <td width=69 valign=top style='width:51.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>2</b></p>
  </td>
  <td width=71 valign=top style='width:52.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>1</b></p>
  </td>
  <td width=71 valign=top style='width:53.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=70 valign=top style='width:52.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 9</p>
  </td>
  <td width=568 colspan=8 valign=top style='width:425.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive MSB</p>
  </td>
 </tr>
 <tr>
  <td width=70 valign=top style='width:52.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 10</p>
  </td>
  <td width=568 colspan=8 valign=top style='width:425.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive LSB</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Keep Alive is a Two Byte Integer which is a time
interval measured in seconds. It is the maximum time interval that is permitted
to elapse between the point at which the Client finishes transmitting one MQTT Control
Packet and the point it starts sending the next. It is the responsibility of
the Client to ensure that the interval between MQTT Control Packets being sent
does not exceed the Keep Alive value. <span style='background:yellow'>If Keep
Alive is non-zero and in the absence of sending any other MQTT Control Packets,
the Client MUST send a PINGREQ packet</span> <span style='color:red'>[MQTT-3.1.2-20]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Server returns a
Server Keep Alive on the CONNACK packet, the Client MUST use that value instead
of the value it sent as the Keep Alive</span> <span style='color:red'>[MQTT-3.1.2-21]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client can send PINGREQ at any time, irrespective of the
Keep Alive value, and check for a corresponding PINGRESP to determine that the
network and the Server are available. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Keep Alive value is
non-zero and the Server does not receive an MQTT Control Packet from the Client
within one and a half times the Keep Alive time period, it MUST close the
Network Connection to the Client as if the network had failed</span> <span
style='color:red'>[MQTT-3.1.2-22]</span><span style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Client does not receive a PINGRESP packet within a
reasonable amount of time after it has sent a PINGREQ, it SHOULD close the
Network Connection to the Server.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Keep Alive value of 0 has the effect of turning off the Keep
Alive mechanism. If Keep Alive is 0 the Client is not obliged to send MQTT
Control Packets on any particular schedule.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The Server may have other reasons
to disconnect the Client, for instance because it is shutting down. Setting
Keep Alive does not guarantee that the Client will remain connected. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473619999"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The actual value of the Keep Alive
is application specific; typically, this is a few minutes. The maximum value of
65,535 is 18 hours 12 minutes and 15 seconds. </p>

<p class=MsoNormal><a name="_Toc473620000"></a><a name="_Toc471483561"></a><a
name="_Toc471282731"></a><a name="_Toc464635116"></a><a name="_Toc464547821"></a><a
name="_Toc462729099">&nbsp;</a></p>

<h4><a name="_Toc3901046"></a><a name="_Toc514847919"></a><a
name="_Toc511988523">3.1.2.11 CONNECT Properties</a></h4>

<h5><a name="_Toc3901047"></a><a name="_Toc514847920"></a><a
name="_Toc511988524">3.1.2.11.1 Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the CONNECT packet Variable
Header encoded as a Variable Byte Integer.</p>

<p class=MsoNormal><span lang=EN-GB style='color:black'>&nbsp;</span></p>

<h5><a name="_Toc3901048"></a><a name="_Ref1477159"><span lang=EN-GB>3.1.2.11.2
</span><span lang=EN-GB>Session Expiry Interval</span></a></h5>

<p class=MsoNormal><a name="_Toc471465450"></a><a name="_Toc471483563"></a><a
name="_Optional_Session_State"></a><a name="_Toc471465452"></a><a
name="_Toc471483565"></a><b>17 (0x11) Byte,</b> Identifier of the Session
Expiry Interval.</p>

<p class=MsoNormal>Followed by the Four Byte Integer representing the Session Expiry
Interval in seconds. It is a Protocol Error to include the Session Expiry Interval
more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Session Expiry Interval is absent the value 0 is
used. If it is set to 0, or is absent, the Session ends when the Network Connection
is closed. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Session Expiry Interval is 0xFFFFFFFF (UINT_MAX), the
Session does not expire. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client and Server MUST
store the Session State after the Network Connection is closed if the Session
Expiry Interval is greater than 0</span> <span style='color:red'>[MQTT-3.1.2-23]</span>.</p>

<p class=MsoNormal style='margin-left:.5in'><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The clock in the Client or Server
may not be running for part of the time interval, for instance because the
Client or Server are not running. This might cause the deletion of the state to
be delayed. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620002">Refer </a>to <a
href="#_Session_State">section 4.1</a> for more information about Sessions.
Refer to <a href="#_Storing_Session_State">section 4.1.1</a> for details and
limitations of stored state.</p>

<p class=MsoNormal></p>

<p class=MsoNormal><a name="_Toc473620003">When the Session expires the Client
and Server need not process the deletion of state atomically.</a></p>

<p class=MsoNormal style='margin-left:.5in'><b></b></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620004"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Setting Clean Start to 1 and a
Session Expiry Interval of 0, is equivalent to setting CleanSession to 1 in the
MQTT Specification Version 3.1.1. Setting Clean Start to 0 and no Session
Expiry Interval, is equivalent to setting CleanSession to 0 in the MQTT
Specification Version 3.1.1. </p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620005"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>A Client that only wants to process
messages while connected will set the Clean Start to 1 and set the Session
Expiry Interval to 0. It will not receive Application Messages published before
it connected and has to subscribe afresh to any topics that it is interested in
each time it connects.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620006"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>A Client might be connecting to a Server
using a network that provides intermittent connectivity. This Client can use a
short Session Expiry Interval so that it can reconnect when the network is
available again and continue reliable message delivery. If the Client does not
reconnect, allowing the Session to expire, then Application Messages will be
lost.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>When a Client connects with a long
Session Expiry Interval, it is requesting that the Server maintain its MQTT
session state after it disconnects for an extended period. Clients should only
connect with a long Session Expiry Interval if they intend to reconnect to the
Server at some later point in time. When a Client has determined that it has no
further use for the Session it should disconnect with a Session Expiry Interval
set to 0.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The Client should always use the Session
Present flag in the CONNACK to determine whether the Server has a Session State
for this Client. </p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620009"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The Client can avoid implementing
its own Session expiry and instead rely on the Session Present flag returned
from the Server to determine if the Session had expired. If the Client does
implement its own Session expiry, it needs to store the time at which the Session
State will be deleted as part of its Session State.</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Will_Delay_Interval"></a>&nbsp;</p>

<h5><a name="_Toc3901049"></a><a name="_Toc514847922"></a><a
name="_Toc511988526"></a><a name="_Ref479241317"></a><a name="_Ref476844531"></a><a
name="_Ref476844480"></a><a name="_Toc473620013"></a><a name="_Receive_Maximum"></a>3.1.2.11.3
Receive Maximum</h5>

<p class=MsoNormal><b>33 (0x21) Byte,</b> Identifier of the Receive Maximum. </p>

<p class=MsoNormal>Followed by the Two Byte Integer representing the Receive
Maximum value. It is a Protocol Error to include the Receive Maximum value more
than once or for it to have the value 0.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client uses this value to limit the number of QoS 1 and
QoS 2 publications that it is willing to process concurrently. There is no mechanism
to limit the QoS 0 publications that the Server might try to send.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The value of Receive Maximum applies only to the current
Network Connection.<a name="_Toc473620014"> </a>If the Receive Maximum value is
absent then its value defaults to 65,535.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620015">Refer to </a><a href="#_Flow_Control">section
4.9</a> Flow Control for details of how the Receive Maximum is used.</p>

<p class=MsoNormal><a name="_Toc471282735"></a>&nbsp;</p>

<h5><a name="_Toc3901050"></a><a name="_Toc514847923"></a><a
name="_Toc511988527"></a><a name="_Toc473620018"></a><a name="_Toc471483569">3.1.2.11.4
Maximum Packet Size</a></h5>

<p class=MsoNormal><b><span lang=EN-GB>39 (0x27) Byte</span></b><span
lang=EN-GB>, Identifier of the Maximum Packet Size. </span></p>

<p class=MsoNormal><span lang=EN-GB>Followed by a Four Byte Integer
representing the Maximum Packet Size the Client is willing to accept. If the
Maximum Packet Size is not present, no limit on the packet size is imposed
beyond the limitations in the protocol as a result of the remaining length
encoding and the protocol header sizes.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>It is a Protocol Error to include the Maximum Packet Size
more than once, or for the value to be set to zero.</p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB> <b>Non-normative comment</b></span></p>

<p class=MsoNormal style='margin-left:.5in'><span lang=EN-GB>It is the
responsibility of the application to select a suitable Maximum Packet Size
value if it chooses to restrict the Maximum Packet Size.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>The packet size is the total number of
bytes in an MQTT Control Packet, as defined in </span><a
href="#_Remaining_Length"><span lang=EN-GB>section 2.1.4</span></a><span
lang=EN-GB>. The Client uses the Maximum Packet Size to inform the Server that
it will not process packets exceeding this limit.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB style='background:yellow'>The Server MUST
NOT send packets exceeding Maximum Packet Size to the Client</span><span
lang=EN-GB> <span style='color:red'>[MQTT-3.1.2-24]</span>. If a Client
receives a packet whose size exceeds this limit, this is a Protocol Error, the
Client uses DISCONNECT with Reason Code 0x95 (Packet too large), as described
in </span><a href="#S4_13_Errors"><span lang=EN-GB>section 4.13</span></a><span
lang=EN-GB>.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB style='background:yellow'>Where a Packet is
too large to send, the Server MUST discard it without sending it and then
behave as if it had completed sending that Application Message</span><span
lang=EN-GB> <span style='color:red'>[MQTT-3.1.2-25]</span>. </span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>In the case of a Shared Subscription where the
message is too large to send to one or more of the Clients but other Clients can
receive it, the Server can choose either discard the message without sending
the message to any of the Clients, or to send the message to one of the Clients
that can receive it.</span></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620061"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Where a packet is discarded without
being sent, the Server could place the discarded packet on a dead letter
queue or perform other diagnostic action. Such actions are outside the scope
of this specification.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h5><a name="_Toc3901051"></a><a name="_Toc514847924"></a><a
name="_Toc511988528"></a><a name="_Toc473620019"></a><a name="_Toc471483570"></a><a
name="_Toc471282736"></a><a name="_Toc464635120"></a><a name="_Toc464547825">3.1.2.11.5
Topic Alias Maximum</a></h5>

<p class=MsoNormal><b>34 (0x22) Byte,</b> Identifier of the Topic Alias Maximum.
</p>

<p class=MsoNormal>Followed by the Two Byte Integer representing the Topic
Alias Maximum value. It is a Protocol Error to include the Topic Alias Maximum
value more than once. If the Topic Alias Maximum property is absent, the
default value is 0.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This value indicates the highest value that the Client will
accept as a Topic Alias sent by the Server. The Client uses this value to limit
the number of Topic Aliases that it is willing to hold on this Connection. <span
style='background:yellow'>The Server MUST NOT send a Topic Alias in a PUBLISH
packet to the Client greater than Topic Alias Maximum</span> <span
style='color:red'>[MQTT-3.1.2-26]</span>. A value of 0 indicates that the
Client does not accept any Topic Aliases on this connection. <span
style='background:yellow'>If Topic Alias Maximum is absent or zero, the Server
MUST NOT send any Topic Aliases to the Client</span> <span style='color:red'>[MQTT-3.1.2-27]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901052"></a><a name="_Toc514847925"></a><a
name="_Toc511988529"></a><a name="_Ref488075541"></a><a name="_Ref488075488"></a><a
name="_Ref473881802"></a><a name="_Toc473620020"></a><a name="_Toc471483571"></a><a
name="_Toc471282737"></a><a name="_Toc464635121"></a><a name="_Toc464547826"></a><a
name="_Request_Response_Information"></a>3.1.2.11.6 Request Response Information</h5>

<p class=MsoNormal><b>25 (0x19) Byte,</b> Identifier of the Request Response
Information. </p>

<p class=MsoNormal>Followed by a Byte with a value of either 0 or 1. It is
Protocol Error to include the Request Response Information more than once, or
to have a value other than 0 or 1. If the Request Response Information is
absent, the value of 0 is used.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client uses this value to request the Server to return
Response Information in the CONNACK. <span style='background:yellow'>A value of
0 indicates that the Server MUST NOT return Response Information</span> <span
style='color:red'>[MQTT-3.1.2-28]</span>. If the value is 1 the Server MAY
return Response Information in the CONNACK packet.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620021">Non-normative
comment</a></p>

<p class=MsoNormal style='margin-left:.5in'>The Server can choose not to
include Response Information in the CONNACK, even if the Client requested it.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620022">Refer to </a><a
href="#_Request_/_Response">section 4.10</a> for more information about Request
/ Response.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901053"></a><a name="_Toc514847926"></a><a
name="_Toc511988530"></a><a name="_Toc473620023"></a><a name="_Toc471483572"></a><a
name="_Toc471282738"></a><a name="_Toc464635122"></a><a name="_Toc464547827">3.1.2.11.7
Request Problem Info</a>rmation</h5>

<p class=MsoNormal><b>23 (0x17) Byte,</b> Identifier of the Request Problem
Information. </p>

<p class=MsoNormal>Followed by a Byte with a value of either 0 or 1. It is a
Protocol Error to include Request Problem Information more than once, or to
have a value other than 0 or 1. If the Request Problem Information is absent, the
value of 1 is used. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client uses this value to indicate whether the Reason
String or User Properties are sent in the case of failures. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the value of Request
Problem Information is 0, the Server MAY return a Reason String or User
Properties on a CONNACK or DISCONNECT packet, but MUST NOT send a Reason String
or User Properties on any packet <span style='color:black'>other than PUBLISH,
CONNACK, or DISCONNECT</span></span> <span style='color:red'>[MQTT-3.1.2-29]</span>.
If the value is 0 and the Client receives a Reason String or User Properties in
a packet other than PUBLISH, CONNACK, or DISCONNECT, it uses a DISCONNECT packet
with Reason Code 0x82 (Protocol Error) as described in <a href="#S4_13_Errors">section
4.13</a> Handling errors.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If this value is 1, the Server MAY return a Reason String or
User Properties on any packet where it is allowed.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901054"></a><a name="_Toc514847927"></a><a
name="_Toc511988531"></a><a name="_Toc473620024"></a><a name="_Toc471483573"></a><a
name="_Toc471282739"></a><a name="_Toc464635123"></a><a name="_Toc464547828"></a><a
name="_Toc470189624"></a>3.1.2.11.8 User Property</h5>

<p class=MsoNormal><b>38 (0x26) Byte</b>, Identifier of the User Property. </p>

<p class=MsoNormal>Followed by a UTF-8 String Pair. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620025">The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</a> </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620026"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>User Properties on the CONNECT
packet can be used to send connection related properties from the Client to the
Server. The meaning of these properties is not defined by this specification.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h5><a name="_Toc3901055"></a><a name="_Toc514847928"></a><a
name="_Toc511988532">3.1.2.11.9 Authentication Method</a></h5>

<p class=MsoNormal><b>21 (0x15) Byte,</b> Identifier of the Authentication
Method. </p>

<p class=MsoNormal>Followed by a UTF-8 Encoded String containing the name of
the authentication method used for extended authentication .It is a Protocol
Error to include Authentication Method more than once.</p>

<p class=MsoNormal>If Authentication Method is absent, extended authentication
is not performed. Refer to <a href="#_Enhanced_authentication">section 4.12</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Client sets an Authentication
Method in the CONNECT, the Client MUST NOT send any packets other than AUTH or
DISCONNECT packets until it has received a CONNACK packet</span> <span
style='color:red'>[MQTT-3.1.2-30]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901056"></a><a name="_Toc514847929"></a><a
name="_Toc511988533">3.1.2.11.10 Authentication Data</a></h5>

<p class=MsoNormal><b>22 (0x16) Byte,</b> Identifier of the Authentication
Data. </p>

<p class=MsoNormal>Followed by Binary Data containing authentication data. It
is a Protocol Error to include Authentication Data if there is no
Authentication Method. It is a Protocol Error to include Authentication Data
more than once. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The contents of this data are defined by the authentication
method. Refer to <a href="#_Enhanced_authentication">section 4.12</a> for more
information about extended authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901057"></a><a name="_Toc514847930"></a><a
name="_Toc511988534"></a><a name="_Toc473620029"></a><a name="_Toc471483576"></a><a
name="_Toc471282742"></a><a name="_Toc464635126"></a><a name="_Toc464547831"></a><a
name="_Toc385349239">3.1.2.12 Variable Header non-normative example</a></h4>

<p class=MsoCaption><a name="_Figure_3.6_-"></a>Figure 3&#8209;6
- Variable Header example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Name</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length MSB (0)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length LSB (4)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>M</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Q</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>T</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>T</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Version</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Version (5)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Connect Flags</p>
  </td>
 </tr>
 <tr style='height:139.5pt'>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal>&nbsp;</p>
  <p class=MsoNormal>&nbsp;</p>
  <p class=MsoNormal>&nbsp;</p>
  <p class=MsoNormal>&nbsp;</p>
  <p class=MsoNormal>byte 8</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal style='line-height:150%'><span lang=DE>User Name Flag (1)</span></p>
  <p class=MsoNormal style='line-height:150%'><span lang=DE>Password Flag (1)</span></p>
  <p class=MsoNormal style='line-height:150%'>Will Retain (0)</p>
  <p class=MsoNormal style='line-height:150%'>Will QoS (01)</p>
  <p class=MsoNormal style='line-height:150%'>Will Flag (1)</p>
  <p class=MsoNormal style='line-height:150%'>Clean Start(1)</p>
  <p class=MsoNormal style='line-height:150%'><i>Reserved</i> (0)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt;height:139.5pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 9</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive MSB (0)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 10</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive LSB (10)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Properties</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 11</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length (5)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 12</p>
  </td>
  <td width=248 valign=top style='width:186.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session Expiry Interval identifier (17)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 13</p>
  </td>
  <td width=248 rowspan=4 valign=top style='width:186.2pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session Expiry Interval (10)</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 14</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 15</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 16</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 valign=top style='width:26.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><b><span style='font-size:12.0pt'>&nbsp;</span></b></p>

<h3><a name="_Toc3901058"></a><a name="_Toc514847931"></a><a
name="_Toc511988535"></a><a name="_Toc473620030"></a><a name="_Toc471483577"></a><a
name="_Toc471282743"></a><a name="_Toc464635127"></a><a name="_Toc464547832"></a><a
name="_Toc462729102"></a><a name="_Toc442180844"></a><a name="_Toc385349767"></a><a
name="_Toc385349241"></a><a name="_Toc384800404">3.1.3 CONNECT Payload</a></h3>

<p class=MsoNormal><span style='background:yellow'>The Payload of the CONNECT
packet contains one or more length-prefixed fields, whose presence is
determined by the flags in the Variable Header. These fields, if present, MUST
appear in the order Client Identifier, Will Properties, Will Topic, Will Payload,
User Name, Password</span> <span style='color:red'>[MQTT-3.1.3-1]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901059"></a><a name="_Toc514847932"></a><a
name="_Toc511988536"></a><a name="_Toc473620031"></a><a name="_Toc471483578"></a><a
name="_Toc471282744"></a><a name="_Toc464635128"></a><a name="_Toc464547833"></a><a
name="_Toc462729103"></a><a name="_Toc385349242">3.1.3.1 Client Identifier</a>
(ClientID)</h4>

<p class=MsoNormal style='text-align:justify'>The Client Identifier (ClientID)
identifies the Client to the Server. Each Client connecting to the Server has a
unique ClientID. <span style='background:yellow'>The ClientID MUST be used by
Clients and by Servers to identify state that they hold relating to this MQTT
Session between the Client and the Server</span> <span style='color:red'>[MQTT-3.1.3-2]</span><span
style='color:black'>. Refer to </span><a href="#_Session_State">section 4.1</a><span
style='color:black'> for more information about Session State.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620032"><span style='background:yellow'>The
ClientID MUST be present and is the first field in the CONNECT packet Payload</span></a>
<span style='color:red'>[MQTT-3.1.3-3]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The ClientID MUST be a UTF-8
Encoded String</span> as defined in <a href="#_UTF-8_Encoded_String">section
1.5.4</a> <span style='color:red'>[MQTT-3.1.3-4]</span><span style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Server MUST allow ClientIDs
which are between 1 and 23 UTF-8 encoded bytes in length, and that contain only
the characters</span></p>

<p class=MsoNormal><span style='background:yellow'>&quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
<span style='color:red'>[MQTT-3.1.3-5]</span><span style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server MAY allow ClientIDs that contain more than 23 encoded
bytes. The Server MAY allow ClientIDs that contain characters not included in
the list given above. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Server MAY allow a Client
to supply a ClientID that has a length of zero bytes, however if it does so the
Server MUST treat this as a special case and assign a unique ClientID to that
Client</span> <span style='color:red'>[MQTT-3.1.3-6]</span>. <span
style='background:yellow'>It MUST then process the CONNECT packet as if the
Client had provided that unique ClientID<span style='color:black'>, and MUST
return the Assigned Client Identifier in the CONNACK packet</span></span><span
style='color:black'> </span><span style='color:red'>[MQTT-3.1.3-7]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Server rejects the
ClientID it MAY respond to the CONNECT packet with a CONNACK using Reason Code
0x85 (Client Identifier not valid) as described in </span><a
href="#S4_13_Errors"><span style='background:yellow'>section 4.13</span></a><span
style='background:yellow'> Handling errors, and then it MUST close the Network
Connection</span> <span style='color:red'>[MQTT-3.1.3-8]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620033"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>A Client implementation could
provide a convenience method to generate a random ClientID. Clients using this
method should take care to avoid creating long-lived orphaned Sessions.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h4><a name="_Toc473620034"></a><a name="_Toc471483579"></a><a
name="_Toc471282745"></a><a name="_Toc464635129"></a><a name="_Toc464547834"></a><a
name="_Toc462729104"></a><a name="_Toc385349243"></a><a name="_Toc3901060"></a><a
name="_Toc514847933"></a><a name="_Toc511988537">3.1.3.2 Will Properties</a></h4>

<p class=MsoNormal>If the Will Flag is set to 1, the Will Properties is the
next field in the Payload. The Will Properties field defines the Application
Message properties to be sent with the Will Message when it is published, and
properties which define when to publish the Will Message. The Will Properties
consists of a Property Length and the Properties.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901061"></a><a name="_Toc514847934"></a><a
name="_Toc511988538">3.1.3.2.1 Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the Will Properties encoded
as a Variable Byte Integer.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h5><a name="_Toc3901062"></a><a name="_Toc514847935"></a><a
name="_Toc511988539"></a><a name="_Will_Delay_Interval_1"></a>3.1.3.2.2 Will
Delay Interval</h5>

<p class=MsoNormal><b>24 (0x18) Byte,</b> Identifier of the Will Delay
Interval.</p>

<p class=MsoNormal>Followed by the Four Byte Integer representing the Will
Delay Interval in seconds. It is a Protocol Error to include the Will Delay Interval
more than once. If the Will Delay Interval is absent, the default value is 0
and there is no delay before the Will Message is published.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server delays publishing the Clients Will Message until
the Will Delay Interval has passed or the Session ends, whichever happens
first. <span style='background:yellow'>If a new Network Connection to this
Session is made before the Will Delay Interval has passed, the Server MUST NOT
send the Will Message</span> <span style='color:red'>[MQTT-3.1.3-9]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>One use of this is to avoid
publishing Will Messages if there is a temporary network disconnection and the
Client succeeds in reconnecting and continuing its Session before the Will
Message is published.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If a Network Connection uses a
Client Identifier of an existing Network Connection to the Server, the Will
Message for the exiting connection is sent unless the new connection specifies
Clean Start of 0 and the Will Delay is greater than zero. If the Will Delay is 0
the Will Message is sent at the close of the existing Network Connection, and
if Clean Start is 1 the Will Message is sent because the Session ends.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901063"></a><a name="_Toc514847936"></a><a
name="_Toc511988540"></a><a name="_Toc487096858">3.1.3.2.3 Payload Format
Indicator</a></h5>

<p class=MsoNormal><b>1 (0x01) Byte,</b> Identifier of the Payload Format
Indicator. </p>

<p class=MsoNormal>Followed by the value of the Payload Format Indicator,
either of: </p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0 (0x00) Byte Indicates that the Will Message is unspecified
bytes, which is equivalent to not sending a Payload Format Indicator.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>1 (0x01) Byte Indicates that the Will Message is UTF-8 Encoded
Character Data. The UTF-8 data in the Payload <span style='font-size:10.5pt;
color:#333333;background:white'>MUST be well-formed UTF-8 as defined by the
Unicode specification </span><a href="#Unicode"><span style='font-size:10.5pt;
background:white'>[Unicode] </span></a><span style='font-size:10.5pt;
color:#333333;background:white'>and restated in RFC 3629 </span><a
href="#RFC3629"><span style='font-size:10.5pt;background:white'>[RFC3629]</span></a><span
style='font-size:10.5pt;color:#333333;background:white'>. </span></p>

<p class=MsoListParagraphCxSpLast>&nbsp;</p>

<p class=MsoNormal>It is a Protocol Error to include the Payload Format Indicator
more than once. The Server MAY validate that the Will Message is of the format
indicated, and if it is not send a CONNACK with the Reason Code of 0x99 (Payload
format invalid) as described in section 4.13.</p>

<p class=MsoNormal style='background:white'></p>

<h5><a name="_Toc3901064"></a><a name="_Toc514847937"></a><a
name="_Toc511988541">3.1.3.2.4 Message Expiry Interval</a></h5>

<p class=MsoNormal><b>2 (0x02) Byte,</b> Identifier of the Message Expiry Interval.
</p>

<p class=MsoNormal>Followed by the Four Byte Integer representing the Message
Expiry Interval. It is a Protocol Error to include the Message Expiry Interval
more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If present, the Four Byte value is the lifetime of the Will
Message in seconds and is sent as the Publication Expiry Interval when the
Server publishes the Will Message.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If absent, no Message Expiry Interval is sent when the
Server publishes the Will Message. </p>

<p class=MsoNormal style='background:white'>&nbsp;</p>

<h5><a name="_Toc3901065"></a><a name="_Toc514847938"></a><a
name="_Toc511988542"></a><a name="_Toc493772023">3.1.3.2.5 Content Type</a></h5>

<p class=MsoListParagraph style='margin-left:0in'><b>3 (0x03)</b> Identifier of
the Content Type. </p>

<p class=MsoNormal style='background:white'>Followed by a UTF-8 Encoded String
describing the content of the Will Message. <span style='color:#333333;
background:white'>It is a Protocol Error to include the Content Type more than
once. </span>The value of the Content Type is defined by the sending and receiving
application. </p>

<p class=MsoNormal style='background:white'><span lang=EN-GB style='color:black'>&nbsp;</span></p>

<h5><a name="_Toc3901066"></a><a name="_Toc514847939"></a><a
name="_Toc511988543"></a><a name="_Toc493772019">3.1.3.2.6 Response Topic</a></h5>

<p class=MsoNormal><b><span style='color:#333333;background:white'>8 (0x08)
Byte</span></b><span style='color:#333333;background:white'>, Identifier of the
Response Topic. </span></p>

<p class=MsoNormal><span style='color:#333333;background:white'>Followed by a
UTF-8 Encoded String which is used as the Topic Name for a response message. It
is a Protocol Error to include the Response Topic more than once. The presence
of a Response Topic identifies the Will Message as a Request. </span></p>

<p class=MsoNormal><span style='color:#333333;background:white'>&nbsp;</span></p>

<p class=MsoNormal><span style='background:white'>Refer to </span><a
href="#_Request_/_Response"><span style='background:white'>section 4.10</span></a><span
style='background:white'> for more information about Request / Response.</span></p>

<p class=MsoNormal><span class=apple-converted-space><b><span style='color:
#333333;background:white'>&nbsp;</span></b></span></p>

<h5><a name="_Toc3901067"></a><a name="_Toc514847940"></a><a
name="_Toc511988544"></a><a name="_Toc493772020">3.1.3.2.7 Correlation Data</a></h5>

<p class=MsoNormal><b>9 (0x09) Byte,</b> Identifier of the Correlation Data. </p>

<p class=MsoNormal>Followed by Binary Data. The Correlation Data is used by the
sender of the Request Message to identify which request the Response Message is
for when it is received. It is a Protocol Error to include Correlation Data
more than once. If the Correlation Data is not present, the Requester does not
require any correlation data.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The value of the Correlation Data only has meaning to the
sender of the Request Message and receiver of the Response Message.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_Request_/_Response">section 4.10</a> for
more information about Request / Response</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901068"></a><a name="_Toc514847941"></a><a
name="_Toc511988545"></a><a name="_Toc493772021">3.1.3.2.8 User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte</b>, Identifier of the User Property.</p>

<p class=MsoNormal>Followed by a UTF-8 String Pair. The User Property is
allowed to appear multiple times to represent multiple name, value pairs. The
same name is allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Server MUST maintain the
order of User Properties when publishing the Will Message</span> <span
style='color:red'>[MQTT-3.1.3-10]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>This property is intended to
provide a means of transferring application layer name-value tags whose meaning
and interpretation are known only by the application programs responsible for
sending and receiving them.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901069"></a><a name="_Toc514847942"></a><a
name="_Toc511988546">3.1.3.3 Will Topic</a></h4>

<p class=MsoNormal>If the Will Flag is set to 1, the Will Topic is the next
field in the Payload.<span style='background:yellow'> The Will Topic MUST be a
UTF-8 Encoded String</span> as defined in <a href="#_UTF-8_Encoded_String">section
1.5.4</a> <span style='color:red'>[MQTT-3.1.3-11]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901070"></a><a name="_Toc514847943"></a><a
name="_Toc511988547"></a><a name="_Toc473620035"></a><a name="_Toc471483580"></a><a
name="_Toc471282746"></a><a name="_Toc464635130"></a><a name="_Toc464547835"></a><a
name="_Toc462729105"></a><a name="_Toc385349244">3.1.3.4 Will Payload</a></h4>

<p class=MsoNormal>If the Will Flag is set to 1 the Will Payload is the next
field in the Payload. The Will Payload defines the Application Message Payload
that is to be published to the Will Topic as described in <a
href="#_Toc479576982">section 3.1.2.5</a>. This field consists of Binary Data.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901071"></a><a name="_Toc514847944"></a><a
name="_Toc511988548"></a><a name="_Toc473620036"></a><a name="_Toc471483581"></a><a
name="_Toc471282747"></a><a name="_Toc464635131"></a><a name="_Toc464547836"></a><a
name="_Toc462729106"></a><a name="_Toc385349245">3.1.3.5 User Name</a></h4>

<p class=MsoNormal><span style='background:yellow'>If the User Name Flag is set
to 1, the User Name is the next field in the Payload. The User Name MUST be a
UTF-8 Encoded String</span> as defined in <a href="#_UTF-8_Encoded_String">section
1.5.4</a> <span style='color:red'>[MQTT-3.1.3-12]</span>.<span
style='color:red'> </span>It can be used by the Server for authentication and
authorization. </p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901072"></a><a name="_Toc514847945"></a><a
name="_Toc511988549"></a><a name="_Toc473620037"></a><a name="_Toc471483582"></a><a
name="_Toc471282748"></a><a name="_Toc464635132"></a><a name="_Toc464547837"></a><a
name="_Toc462729107"></a><a name="_Toc385349246">3.1.3.6 Password</a></h4>

<p class=MsoNormal>If the Password Flag is set to 1, the Password is the next
field in the Payload. The Password field is Binary Data. Although this field is
called Password, it can be used to carry any credential information.<a
name="_Figure_3.7_-"></a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901073"></a><a name="_Toc514847946"></a><a
name="_Toc511988550"></a><a name="_Ref480182943"></a><a name="_Toc473620038"></a><a
name="_Toc471483583"></a><a name="_Toc471282749"></a><a name="_Toc464635133"></a><a
name="_Toc464547838"></a><a name="_Toc462729108"></a><a name="_Toc442180845"></a><a
name="_Toc385349768"></a><a name="_Toc385349248"></a><a name="_Toc384800405"></a><a
name="_CONNECT_Actions"></a>3.1.4 CONNECT Actions</h3>

<p class=MsoNormal>Note that a Server MAY support multiple protocols (including
other versions of the MQTT protocol) on the same TCP port or other network
endpoint. If the Server determines that the protocol is MQTT v5.0 then it
validates the connection attempt as follows. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>If the
Server does not receive a CONNECT packet within a reasonable amount of time
after the Network Connection is established, the Server SHOULD close the Network
Connection.</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='background:yellow'>The Server MUST validate that the CONNECT packet matches
the format described in </span><a href="#_CONNECT__Connection"><span
style='background:yellow'>section 3.1</span></a><span style='background:yellow'>
and close the Network Connection if it does not match</span> <span
style='color:red'>[MQTT-3.1.4-1]</span><span style='color:black'>.</span> The
Server MAY send a CONNACK with a Reason Code of 0x80 or greater as described in
section 4.13 before closing the Network Connection. </p>

<ol style='margin-top:0in' start=3 type=1>
 <li class=MsoNormal style='text-align:justify'><span style='background:yellow'>The
     Server MAY check that the contents of the CONNECT packet meet any further
     restrictions and SHOULD perform authentication and authorization checks. If
     any of these checks fail, it MUST close the Network Connection</span> <span
     style='color:red'>[MQTT-3.1.4-2]</span>. Before closing the Network
     Connection, it MAY send an appropriate CONNACK response with a Reason Code
     of 0x80 or greater as described in <a href="#_CONNACK__Connect">section
     3.2</a> and <a href="#S4_13_Errors">section 4.13</a>.</li>
</ol>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620039">If validation is successful, the
Server performs the following steps.</a> </p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='background:yellow'>If the ClientID represents a Client already connected
to the Server, the Server sends a DISCONNECT packet to the existing Client with
Reason Code of 0x8E (Session taken over) as described in </span><a
href="#S4_13_Errors"><span style='background:yellow'>section 4.13</span></a><span
style='background:yellow'> and MUST close the Network Connection of the
existing Client</span> <span style='color:red'>[MQTT-3.1.4-3]</span>. If the
existing Client has a Will Message, that Will Message is published as described
in section 3.1.2.5.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If the Will Delay Interval of the
existing Network Connection is 0 and there is a Will Message, it will be sent
because the Network Connection is closed. If the Session Expiry Interval of the
existing Network Connection is 0, or the new Network Connection has Clean Start
set to 1 then if the existing Network Connection has a Will Message it will be
sent because the original Session is ended on the takeover.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='background:yellow'>The Server MUST perform the processing of Clean Start</span>
that is described in <a href="#_Clean_Start">section 3.1.2.4</a> <span
style='color:red'>[MQTT-3.1.4-4]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.25in'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='background:yellow'>The Server MUST acknowledge the CONNECT packet with a
CONNACK packet containing a 0x00 (Success) Reason Code</span> <span
style='color:red'>[MQTT-3.1.4-5]</span>.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>It is recommended that
authentication and authorization checks be performed if the Server is being
used to process any form of business critical data. If these checks succeed,
the Server responds by sending CONNACK with a 0x00 (Success) Reason Code. If
they fail, it is suggested that the Server does not send a CONNACK at all, as
this could alert a potential attacker to the presence of the MQTT Server and
encourage such an attacker to launch a denial of service or password-guessing
attack.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in;text-align:justify;text-indent:-.25in'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Start
message delivery and Keep Alive monitoring.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Clients are allowed to send further MQTT Control Packets
immediately after sending a CONNECT packet; Clients need not wait for a CONNACK
packet to arrive from the Server. <span style='background:yellow'>If the Server
rejects the CONNECT, it MUST NOT process any data sent by the Client after the
CONNECT packet except AUTH packets</span> <span style='color:red'>[MQTT-3.1.4-6]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.4in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.4in'>Clients typically wait for a
CONNACK packet, However, if the Client exploits its freedom to send MQTT Control
Packets before it receives a CONNACK, it might simplify the Client
implementation as it does not have to police the connected state. The Client accepts
that any data that it sends before it receives a CONNACK packet from the Server
will not be processed if the Server rejects the connection.</p>

<p class=MsoNormal style='margin-left:.4in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.4in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.4in'>Clients that send MQTT Control
Packets before they receive CONNACK will be unaware of the Server constraints
and whether any existing Session is being used. </p>

<p class=MsoNormal style='margin-left:.4in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.4in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.4in'>The Server can limit reading from
the Network Connection or close the Network Connection if the Client sends too
much data before authentication is complete. This is suggested as a way of
avoiding denial of service attacks.</p>

<p class=MsoNormal style='margin-left:.4in'>&nbsp;</p>

<h2><a name="_Toc3901074"></a><a name="_Toc514847947"></a><a
name="_Toc511988551"></a><a name="_Toc473620040"></a><a name="_Toc471483584"></a><a
name="_Toc471282750"></a><a name="_Toc464635134"></a><a name="_Toc464547839"></a><a
name="_Toc462729109"></a><a name="_Toc442180846"></a><a name="_Toc385349769"></a><a
name="_Toc385349249"></a><a name="_Toc384800406"></a><a name="_Ref362964780"></a><a
name="_Ref362964779"></a><a name="_CONNACK__Connect"></a>3.2 CONNACK  Connect
acknowledgement</h2>

<p class=MsoNormal>The CONNACK packet is the packet sent by the Server in
response to a CONNECT packet received from a Client. <span style='background:
yellow'>The Server MUST send a CONNACK with a 0x00 (Success) Reason Code before
sending any Packet other than AUTH</span> <span style='color:red'>[MQTT-3.2.0-1]</span>.
<span style='background:yellow'>The Server MUST NOT send more than one CONNACK
in a Network Connection</span> <span style='color:red'>[MQTT-3.2.0-2]</span>.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'>If the Client does not receive a
CONNACK packet from the Server within a reasonable amount of time, the Client
SHOULD close the Network Connection. A &quot;reasonable&quot; amount of time
depends on the type of application and the communications infrastructure.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h3><a name="_Toc3901075"></a><a name="_Toc514847948"></a><a
name="_Toc511988552"></a><a name="_Toc473620041">3.2.1 CONNACK Fixed Header</a></h3>

<p class=MsoNormal>The Fixed Header format is illustrated in Figure 3-7.<a
href="#_Figure_3.8_"></a></p>

<p class=MsoCaption><a name="_Ref459300948"></a><a name="_Figure_3.8_-"></a><a
name="_Figure_3.8_"></a>Figure 3&#8209;7  CONNACK packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  Type (2)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=542 colspan=8 valign=top style='width:5.65in;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length </p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620042"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620043">This is the length of the Variable
Header encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901076"></a><a name="_Toc514847949"></a><a
name="_Toc511988553"></a><a name="_Toc473620044">3.2.2 CONNACK Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the CONNACK Packet contains the
following fields in the order: Connect Acknowledge Flags, Connect Reason Code, and
Properties. The rules for encoding Properties are described in <a
href="#_Properties">section 2.2.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901077"></a><a name="_Toc514847950"></a><a
name="_Toc511988554"></a><a name="_Toc473620045"></a><a name="_Toc471483587"></a><a
name="_Toc471282753"></a><a name="_Toc464635137"></a><a name="_Toc464547842"></a><a
name="_Toc462729112"></a><a name="_Toc385349254"></a><a name="_Figure_3.9_-"></a><a
name="_Figure_3.9_"></a>3.2.2.1 Connect Acknowledge Flags</h4>

<p class=MsoNormal><span style='background:yellow'>Byte 1 is the &quot;Connect
Acknowledge Flags&quot;. Bits 7-1 are reserved and MUST be set to 0</span> <span
style='color:red'>[MQTT-3.2.2-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Bit 0 is the Session Present Flag.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901078"></a><a name="_Toc514847951"></a><a
name="_Toc511988555"></a><a name="_Toc473620046"></a><a name="_Toc471483588"></a><a
name="_Toc471282754"></a><a name="_Toc464635138"></a><a name="_Toc464547843"></a><a
name="_Toc462729113"></a><a name="_Toc385349255">3.2.2.1.1 Session Present</a></h5>

<p class=MsoNormal>Position: bit 0 of the Connect Acknowledge Flags.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Session Present flag informs the Client whether the
Server is using Session State from a previous connection for this ClientID.
This allows the Client and Server to have a consistent view of the Session
State.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Server accepts a
connection with Clean Start set to 1, the Server MUST set Session Present to 0
in the CONNACK packet in addition to setting a 0x00 (Success) Reason Code in
the CONNACK packet</span> <span style='color:red'>[MQTT-3.2.2-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Server accepts a
connection with Clean Start set to 0 and the Server has Session State for the
ClientID, it MUST set Session Present to 1 in the CONNACK packet, otherwise it
MUST set Session Present to 0 in the CONNACK packet. In both cases it MUST set
a 0x00 (Success) Reason Code in the CONNACK packet</span><span
style='color:red'> [MQTT-3.2.2-3]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the value of Session Present received by the Client from
the Server is not as expected, the Client proceeds as follows:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If the Client does not have
Session State and receives Session Present set to 1 it MUST close the Network
Connection</span> <span style='color:red'>[MQTT-3.2.2-4]</span>. If it wishes
to restart with a new Session the Client can reconnect using Clean Start set to
1.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If the Client does have Session
State and receives Session Present set to 0 it MUST discard its Session State
if it continues with the Network Connection</span> <span style='color:red'>[MQTT-3.2.2-5]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server sends a CONNACK
packet containing a non-zero Reason Code it MUST set Session Present to 0</span>
<span style='color:red'>[MQTT-3.2.2-6]</span><span style='color:black'>.</span></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h4><a name="_Toc3901079"></a><a name="_Toc514847952"></a><a
name="_Toc511988556"></a><a name="_Toc473620048"></a><a name="_Toc471483589"></a><a
name="_Toc471282755"></a><a name="_Toc464635139"></a><a name="_Toc464547844"></a><a
name="_Toc462729114"></a><a name="_Toc385349256"></a><a
name="_Connect_Reason_Code"></a>3.2.2.2 Connect Reason Code</h4>

<p class=MsoNormal>Byte 2 in the Variable Header is the Connect Reason Code.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The values the Connect Reason Code are shown below. If a
well formed CONNECT packet is received by the Server, but the Server is unable
to complete the Connection the Server MAY send a CONNACK packet containing the
appropriate Connect Reason code from this table. <span style='background:yellow'>If
a Server sends a CONNACK packet containing a Reason code of 128 or greater it
MUST then close the Network Connection</span> <span style='color:red'>[MQTT-3.2.2-7]</span>.</p>

<p class=MsoNormal><a href="#_Table_3.1_-"></a></p>

<p class=MsoCaption><a name="_Toc385349257"></a><a name="_Ref383985930"></a><a
name="_Ref459301206"></a><a name="_Table_3.1_-"></a><a name=ConnectReasonCode></a>Table
3&#8209;1 - Connect Reason Code values</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=667
 style='width:6.95in;border-collapse:collapse;border:none'>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Success</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Connection is accepted.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>128</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x80</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unspecified error</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not wish to reveal the reason for the
  failure, or none of the other Reason Codes apply.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>129</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x81</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Malformed Packet</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Data within the CONNECT packet could not be correctly parsed.
  </p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>130</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x82</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Error</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Data in the CONNECT packet does not conform to this
  specification.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>131</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x83</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Implementation specific error</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The CONNECT is valid but is not accepted by this Server.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>132</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x84</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unsupported Protocol Version</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support the version of the MQTT
  protocol requested by the Client.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>133</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x85</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Client Identifier not valid</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client Identifier is a valid string but is not allowed
  by the Server.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>134</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x86</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Bad User Name or Password</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not accept the User Name or Password
  specified by the Client </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>135</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x87</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Not authorized</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client is not authorized to connect.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>136</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x88</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server unavailable</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The MQTT Server is not available.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>137</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x89</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server busy</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server is busy. Try again later.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>138</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8A</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Banned</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>This Client has been banned by administrative action.
  Contact the server administrator.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>140</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8C</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Bad authentication method</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The authentication method is not supported or does not
  match the authentication method currently in use.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>144</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x90</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Name invalid</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Will Topic Name is not malformed, but is not accepted
  by this Server.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>149</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x95</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet too large</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The CONNECT packet exceeded the maximum permissible size.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>151</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x97</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Quota exceeded</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>An implementation or administrative imposed limit has been
  exceeded.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>153</span></p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x99</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Payload format invalid</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Will Payload does not match the specified Payload
  Format Indicator.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>154</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9A</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Retain not supported</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support retained messages, and Will
  Retain was set to 1.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>155</p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9B</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>QoS not supported</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support the QoS set in Will QoS.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>156</span></p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9C</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Use another server</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client should temporarily use another server.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>157</span></p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9D</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server moved</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client should permanently use another server.</p>
  </td>
 </tr>
 <tr>
  <td width=52 valign=top style='width:38.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>159</span></p>
  </td>
  <td width=60 valign=top style='width:45.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9F</p>
  </td>
  <td width=212 valign=top style='width:159.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Connection rate exceeded</p>
  </td>
  <td width=343 valign=top style='width:257.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The connection rate limit has been exceeded.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><span style='background:yellow'>The Server sending the
CONNACK packet MUST use one of the Connect Reason Code values</span><span
style='color:red'>T-3.2.2-8]</span>.</p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620049"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Reason Code 0x80 (Unspecified
error) may be used where the Server knows the reason for the failure but does
not wish to reveal it to the Client, or when none of the other Reason Code
values applies.</p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'>The Server may choose to close the Network
Connection without sending a CONNACK to enhance security in the case where an
error is found on the CONNECT. For instance, when on a public network and the
connection has not been authorized it might be unwise to indicate that this is
an MQTT Server.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h4><a name="_Toc473620050"></a><a name="_Toc471483590"></a><a
name="_Toc471282756"></a><a name="_Toc462729115"></a><a name="_Toc464635140"></a><a
name="_Toc464547845"></a><a name="_Toc3901080"></a><a name="_Toc514847953"></a><a
name="_Toc511988557">3.2.2.3 CONNACK Properties</a></h4>

<h5><a name="_Toc3901081"></a><a name="_Toc514847954"></a><a
name="_Toc511988558">3.2.2.3.1 Property Length</a></h5>

<p class=MsoNormal>This is the length of the Properties in the CONNACK packet Variable
Header encoded as a Variable Byte Integer.</p>

<p class=MsoNormal><span lang=EN-GB style='color:black'>&nbsp;</span></p>

<h5><a name="_Toc3901082"></a><a name="_Toc514847955"></a><a
name="_Toc511988559"><span lang=EN-GB>3.2.2.3.2 </span><span lang=EN-GB>Session
Expiry Interval</span></a></h5>

<p class=MsoNormal><b>17 (0x11) Byte,</b> Identifier of the Session Expiry
Interval.</p>

<p class=MsoNormal>Followed by the Four Byte Integer representing the Session
Expiry Interval in seconds. It is a Protocol Error to include the Session
Expiry Interval more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Session Expiry Interval is absent the value in the
CONNECT Packet used. The server uses this property to inform the Client that it
is using a value other than that sent by the Client in the CONNACK. Refer to section
3.1.2.11.2 for a description of the use of Session Expiry Interval.</p>

<p class=MsoNormal><span lang=EN-GB style='color:black'>&nbsp;</span></p>

<h5><a name="_Toc3901083"></a><a name="_Toc514847956"></a><a
name="_Toc511988560"></a><a name="_Toc473620051"></a><a name="_Ref471485669"></a><a
name="_Toc471483591"></a><a name="_Toc471282757"></a><a name="_Ref463220879"></a><a
name="_Toc462729116"></a><a name="_Toc464635141"></a><a name="_Toc464547846"></a><a
name="_Receive_Maximum_1"></a>3.2.2.3.3 Receive Maximum</h5>

<p class=MsoNormal><b>33 (0x21) Byte,</b> Identifier of the Receive Maximum. </p>

<p class=MsoNormal>Followed by the Two Byte Integer representing the Receive
Maximum value. It is a Protocol Error to include the Receive Maximum value more
than once or for it to have the value 0.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server uses this value to limit the number of QoS 1 and
QoS 2 publications that it is willing to process concurrently for the Client. It
does not provide a mechanism to limit the QoS 0 publications that the Client
might try to send.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620052">If the Receive Maximum value is
absent, then its value defaults to 65,535.</a> </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620053">Refer to </a><a href="#_Flow_Control">section
4.9</a> Flow Control for details of how the Receive Maximum is used.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h5><a name="_Toc3901084"></a><a name="_Toc514847957"></a><a
name="_Toc511988561"></a><a name="_Toc473620057"></a><a name="_Toc471483592"></a><a
name="_Toc471282758">3.2.2.3.4 Maximum QoS</a></h5>

<p class=MsoNormal><b>36 (0x24) Byte,</b> Identifier of the Maximum QoS. </p>

<p class=MsoNormal>Followed by a Byte with a value of either 0 or 1. It is a
Protocol Error to include Maximum QoS more than once, or to have a value other
than 0 or 1. If the Maximum QoS is absent, the Client uses a Maximum QoS of 2.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server does not support
QoS 1 or QoS 2 PUBLISH packets it MUST send a Maximum QoS in the CONNACK packet
specifying the highest QoS it supports</span> <span style='color:red'>[MQTT-3.2.2-9]</span>.
<span style='background:yellow'>A Server that does not support QoS 1 or QoS 2
PUBLISH packets MUST still accept SUBSCRIBE packets containing a Requested QoS
of 0, 1 or 2</span> <span style='color:red'>[MQTT-3.2.2-10]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Client receives a
Maximum QoS from a Server, it MUST NOT send PUBLISH packets at a QoS level exceeding
the Maximum QoS level specified</span> <span style='color:red'>[MQTT-3.2.2-11]</span>.
It is a Protocol Error if the Server receives a PUBLISH packet with a QoS
greater than the Maximum QoS it specified. In this case use DISCONNECT with
Reason Code 0x9B (QoS not supported) as described in <a href="#S4_13_Errors">section
4.13</a> Handling errors.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server receives a
CONNECT packet containing a Will QoS that exceeds its capabilities, it MUST
reject the connection. It SHOULD use a CONNACK packet with Reason Code 0x9B
(QoS not supported) </span><span style='background:yellow'>as described in </span><a
href="#S4_13_Errors"><span style='background:yellow'>section 4.13</span></a><span
style='background:yellow'> Handling errors, and MUST close the Network Connection</span>
<span style='color:red'>[MQTT-3.2.2-12]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620058"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>A Client does not need to support
QoS 1 or QoS 2 PUBLISH packets. If this is the case, the Client simply
restricts the maximum QoS field in any SUBSCRIBE commands it sends to a value
it can support.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h5><a name="_Toc464635142"></a><a name="_Toc464547847"></a><a
name="_Toc3901085"></a><a name="_Toc514847958"></a><a name="_Toc511988562"></a><a
name="_Toc473620059"></a><a name="_Toc471483593"></a><a name="_Toc471282759">3.2.2.3.5
Retain Available</a></h5>

<p class=MsoNormal><b>37 (0x25) Byte</b>, Identifier of Retain Available.</p>

<p class=MsoNormal>Followed by a Byte field. If present, this byte declares
whether the Server supports retained messages. A value of 0 means that retained
messages are not supported. A value of 1 means retained messages are supported.
If not present, then retained messages are supported. It is a Protocol Error to
include Retain Available more than once or to use a value other than 0 or 1.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server receives a
CONNECT packet containing a Will Message with the Will Retain set to 1, and it
does not support retained messages, the Server MUST reject the connection
request. It SHOULD send CONNACK with Reason Code 0x9A (Retain not supported)
and then it MUST close the Network Connection</span> <span style='color:red'>[MQTT-3.2.2-13]</span>.
</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Client receiving Retain
Available set to 0 from the Server MUST NOT send a PUBLISH packet with the
RETAIN flag set to 1</span> <span style='color:red'>[MQTT-3.2.2-14]</span>. If
the Server receives such a packet, this is a Protocol Error. The Server SHOULD
send a DISCONNECT with Reason Code of 0x9A (Retain not supported) as described
in <a href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901086"></a><a name="_Toc514847959"></a><a
name="_Toc511988563"></a><a name="_Toc473620060"></a><a name="_Toc471483594"></a><a
name="_Toc471282760">3.2.2.3.6 Maximum Packet Size</a></h5>

<p class=MsoNormal><b>39 (0x27) Byte</b>, Identifier of the Maximum Packet
Size. </p>

<p class=MsoNormal>Followed by a Four Byte Integer representing the Maximum
Packet Size the Server is willing to accept. If the Maximum Packet Size is not
present, there is no limit on the packet size imposed beyond the limitations in
the protocol as a result of the remaining length encoding and the protocol
header sizes.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>It is a Protocol Error to include the Maximum Packet Size more
than once, or for the value to be set to zero.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620062"></a><a name="_Toc471483595"></a><a
name="_Toc471282761"></a><a name="_Toc470189647"></a><a name="_Toc470189648"></a><a
name="_Toc470189649"></a><span lang=EN-GB>The packet size is the total number
of bytes in an MQTT Control Packet, as defined in </span><a href="#_Dup"><span
lang=EN-GB>section 2.1.</span></a><span lang=EN-GB>4. The Server uses the
Maximum Packet Size to inform the Client that it will not process packets whose
size exceeds this limit.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB style='background:yellow'>The Client MUST
NOT send packets exceeding Maximum Packet Size to the Server</span><span
lang=EN-GB> </span><span style='color:red'>[MQTT-3.2.2-15]</span><span
lang=EN-GB>. If a Server receives a packet whose size exceeds this limit, this is
a Protocol Error, the Server uses DISCONNECT with Reason Code 0x95 (Packet too large),
as described in </span><a href="#S4_13_Errors"><span lang=EN-GB>section 4.13</span></a><span
lang=EN-GB>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901087"></a><a name="_Toc514847960"></a><a
name="_Toc511988564">3.2.2.3.7 Assigned Client Identifier</a></h5>

<p class=MsoNormal><b>18 (0x12) Byte</b>, Identifier of the Assigned Client
Identifier. </p>

<p class=MsoNormal>Followed by the UTF-8 string which is the Assigned Client
Identifier. It is a Protocol Error to include the Assigned Client Identifier
more than once.</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt;background:white'><span
lang=EN-GB style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt;background:white'><span
lang=EN-GB style='color:black'>The Client Identifier which was assigned by the
Server because a zero length Client Identifier was found in the CONNECT packet.</span></p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt;background:white'><span
lang=EN-GB style='color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='background:yellow'>If the Client connects using
a zero length Client Identifier, the Server MUST respond with a CONNACK
containing an Assigned Client Identifier. The Assigned Client Identifier MUST
be a new Client Identifier not used by any other Session currently in the
Server</span> <span style='color:red'>[MQTT-3.2.2-16]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901088"></a><a name="_Toc514847961"></a><a
name="_Toc511988565"></a><a name="_Toc473620063"></a><a name="_Toc471483596"></a><a
name="_Toc471282762"></a><a name="_Toc464635144"></a><a name="_Toc464547849">3.2.2.3.8
Topic Alias Maximum</a> </h5>

<p class=MsoNormal><b>34 (0x22) Byte</b>, Identifier of the Topic Alias Maximum.
</p>

<p class=MsoNormal>Followed by the Two Byte Integer representing the Topic
Alias Maximum value. It is a Protocol Error to include the Topic Alias Maximum
value more than once. If the Topic Alias Maximum property is absent, the
default value is 0.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This value indicates the highest value that the Server will
accept as a Topic Alias sent by the Client. The Server uses this value to limit
the number of Topic Aliases that it is willing to hold on this Connection. <span
style='background:yellow'>The Client MUST NOT send a Topic Alias in a PUBLISH
packet to the Server greater than this value</span> <span style='color:red'>[MQTT-3.2.2-17]</span>.
A value of 0 indicates that the Server does not accept any Topic Aliases on
this connection. <span style='background:yellow'>If Topic Alias Maximum is
absent or 0, the Client MUST NOT send any Topic Aliases on to the Server</span>
<span style='color:red'>[MQTT-3.2.2-18]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901089"></a><a name="_Toc514847962"></a><a
name="_Toc511988566"></a><a name="_Toc473620064"></a><a name="_Toc471483597"></a><a
name="_Toc471282763"></a><a name="_Toc464635145"></a><a name="_Toc464547850">3.2.2.3.9
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte</b> Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is a human readable string
designed for diagnostics and SHOULD NOT be parsed by the Client. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server uses this value to give additional information to
the Client. <span style='background:yellow'>The Server MUST NOT send this
property if it would increase the size of the CONNACK packet beyond the Maximum
Packet Size specified by the Client</span> <span style='color:red'>[MQTT-3.2.2-19]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620065"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Proper uses for the reason string
in the Client would include using this information in an exception thrown by the
Client code, or writing this string to a log.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901090"></a><a name="_Toc514847963"></a><a
name="_Toc511988567"></a><a name="_Toc473620066"></a><a name="_Toc471483598">3.2.2.3.10
User Property</a></h5>

<p class=MsoListParagraphCxSpFirst style='margin-left:0in'><b>38 (0x26) Byte, </b>Identifier
of User Property.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:0in'>Followed by a UTF-8
String Pair. This property can be used to provide additional information to the
Client including diagnostic information. <span style='background:yellow'>The Server
MUST NOT send this property if it would increase the size of the CONNACK packet
beyond the Maximum Packet Size specified by the Client</span> <span
style='color:red'>[MQTT-3.2.2-20]</span>. The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620067">The content and meaning of this
property is not defined by this specification. The receiver of a CONNACK
containing this property MAY ignore it.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901091"></a><a name="_Toc514847964"></a><a
name="_Toc511988568"></a><a name="_Toc473620068"></a><a name="_Toc471483599">3.2.2.3.11
Wildcard Subscription Available</a></h5>

<p class=MsoNormal><b>40 (0x28) Byte,</b> Identifier of Wildcard Subscription
Available.</p>

<p class=MsoNormal>Followed by a Byte field. If present, this byte declares
whether the Server supports Wildcard Subscriptions. A value is 0 means that
Wildcard Subscriptions are not supported. A value of 1 means Wildcard
Subscriptions are supported. If not present, then Wildcard Subscriptions are
supported. It is a Protocol Error to include the Wildcard Subscription
Available more than once or to send a value other than 0 or 1.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server receives a SUBSCRIBE packet containing a Wildcard
Subscription and it does not support Wildcard Subscriptions, this is a Protocol
Error. The Server uses DISCONNECT with Reason Code 0xA2 (Wildcard Subscriptions
not supported) as described in <a href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Server supports Wildcard Subscriptions, it can still reject
a particular subscribe request containing a Wildcard Subscription. In this case
the Server MAY send a SUBACK Control Packet with a Reason Code 0xA2 (Wildcard
Subscriptions not supported).</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901092"></a><a name="_Toc514847965"></a><a
name="_Toc511988569"></a><a name="_Toc473620069"></a><a name="_Toc471483600">3.2.2.3.12
Subscription Identifiers Available</a></h5>

<p class=MsoNormal><b>41 (0x29) Byte</b>, Identifier of Subscription Identifier
Available.</p>

<p class=MsoNormal>Followed by a Byte field. If present, this byte declares
whether the Server supports Subscription Identifiers. A value is 0 means that
Subscription Identifiers are not supported. A value of 1 means Subscription
Identifiers are supported. If not present, then Subscription Identifiers are
supported. It is a Protocol Error to include the Subscription Identifier
Available more than once, or to send a value other than 0 or 1.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server receives a SUBSCRIBE packet containing
Subscription Identifier and it does not support Subscription Identifiers, this
is a Protocol Error. The Server uses DISCONNECT with Reason Code of 0xA1
(Subscription Identifiers not supported) as described in <a href="#S4_13_Errors">section
4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901093"></a><a name="_Toc514847966"></a><a
name="_Toc511988570"></a><a name="_Toc473620070"></a><a name="_Toc471483601">3.2.2.3.13
Shared Subscription Available</a></h5>

<p class=MsoNormal><b>42 (0x2A) Byte</b>, Identifier of Shared Subscription
Available.</p>

<p class=MsoNormal>Followed by a Byte field. If present, this byte declares
whether the Server supports Shared Subscriptions. A value is 0 means that
Shared Subscriptions are not supported. A value of 1 means Shared Subscriptions
are supported. If not present, then Shared Subscriptions are supported. It is a
Protocol Error to include the Shared Subscription Available more than once or
to send a value other than 0 or 1.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server receives a SUBSCRIBE packet containing Shared
Subscriptions and it does not support Shared Subscriptions, this is a Protocol
Error. The Server uses DISCONNECT with Reason Code 0x9E (Shared Subscriptions
not supported) as described in <a href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901094"></a><a name="_Toc514847967"></a><a
name="_Toc511988571"></a><a name="_Toc473620071"></a><a name="_Toc471483602">3.2.2.3.14
Server Keep Alive</a></h5>

<p class=MsoNormal><b>19 (0x13) Byte</b>, Identifier of the Server Keep Alive. </p>

<p class=MsoNormal>Followed by a Two Byte Integer with the Keep Alive time
assigned by the Server. <span style='background:yellow'>If the Server sends a
Server Keep Alive on the CONNACK packet, the Client MUST use this value instead
of the Keep Alive value the Client sent on CONNECT</span> <span
style='color:red'>[MQTT-3.2.2-21]</span>. <span style='background:yellow'>If
the Server does not send the Server Keep Alive, the Server MUST use the Keep
Alive value set by the Client on CONNECT</span> <span style='color:red'>[MQTT-3.2.2-22]</span>.
It is a Protocol Error to include the Server Keep Alive more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620072"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The primary use of the Server Keep
Alive is for the Server to inform the Client that it will disconnect the Client
for inactivity sooner than the Keep Alive specified by the Client.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h5><a name="_Toc3901095"></a><a name="_Toc514847968"></a><a
name="_Toc511988572"></a><a name="_Ref473883045"></a><a name="_Toc473620073"></a><a
name="_Toc471483603"></a><a name="_Toc471282765"></a><a name="_Toc464635147"></a><a
name="_Toc464547852"></a><a name="_Response_Information"></a>3.2.2.3.15 Response
Information</h5>

<p class=MsoNormal><b>26 (0x1A) Byte</b>, Identifier of the Response
Information. </p>

<p class=MsoNormal>Followed by a UTF-8 Encoded String which is used as the
basis for creating a Response Topic. The way in which the Client creates a
Response Topic from the Response Information is not defined by this
specification. It is a Protocol Error to include the Response Information more
than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Client sends a Request Response Information with a
value 1, it is OPTIONAL for the Server to send the Response Information in the
CONNACK.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620074"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>A common use of this is to pass a
globally unique portion of the topic tree which is reserved for this Client for
at least the lifetime of its Session. This often cannot just be a random name
as both the requesting Client and the responding Client need to be authorized
to use it. It is normal to use this as the root of a topic tree for a
particular Client. For the Server to return this information, it normally needs
to be correctly configured. Using this mechanism allows this configuration to
be done once in the Server rather than in each Client.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620075">Refer to </a><a
href="#_Request_/_Response">section 4.10</a> for more information about Request
/ Response.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901096"></a><a name="_Toc514847969"></a><a
name="_Toc511988573"></a><a name="_Toc473620076"></a><a name="_Toc471483604"></a><a
name="_Toc471282766"></a><a name="_Toc464635148"></a><a name="_Toc464547853">3.2.2.3.16
Server Reference</a></h5>

<p class=MsoNormal><b>28 (0x1C) Byte</b>, Identifier of the Server Reference. </p>

<p class=MsoNormal>Followed by a UTF-8 Encoded String which can be used by the
Client to identify another Server to use. It is a Protocol Error to include the
Server Reference more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server uses a Server Reference in either a CONNACK or
DISCONNECT packet with Reason code of 0x9C (Use another server) or Reason Code
0x9D (Server moved) as described in <a href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620077">Refer to</a><a
href="#_Server_redirection"> section 4.11</a> Server redirection for information
about how Server Reference is used.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901097"></a><a name="_Toc514847970"></a><a
name="_Toc511988574">3.2.2.3.17 Authentication Method</a></h5>

<p class=MsoNormal><b>21 (0x15) Byte,</b> Identifier of the Authentication
Method. </p>

<p class=MsoNormal>Followed by a UTF-8 Encoded String containing the name of
the authentication method. It is a Protocol Error to include the Authentication
Method more than once. Refer to <a href="#_Enhanced_authentication">section
4.12</a> for more information about extended authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901098"></a><a name="_Toc514847971"></a><a
name="_Toc511988575">3.2.2.3.18 Authentication Data</a></h5>

<p class=MsoNormal><b>22 (0x16) Byte,</b> Identifier of the Authentication
Data. </p>

<p class=MsoNormal>Followed by Binary Data containing authentication data. The
contents of this data are defined by the authentication method and the state of
already exchanged authentication data. It is a Protocol Error to include the
Authentication Data more than once. Refer to <a href="#_Enhanced_authentication">section
4.12</a> for more information about extended authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901099"></a><a name="_Toc514847972"></a><a
name="_Toc511988576"></a><a name="_Toc473620080"></a><a name="_Toc471483607"></a><a
name="_Toc471282769"></a><a name="_Toc464635151"></a><a name="_Toc464547856"></a><a
name="_Toc462729117"></a><a name="_Toc442180849"></a><a name="_Toc385349772"></a><a
name="_Toc385349258"></a><a name="_Toc384800409"></a><a name="_Toc360556075"></a>3.2.3
CONNACK Payload</h3>

<p class=MsoNormal>The CONNACK packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901100"></a><a name="_Toc514847973"></a><a
name="_Toc511988577"></a><a name="_Toc473620081"></a><a name="_Toc471483608"></a><a
name="_Toc471282770"></a><a name="_Toc464635152"></a><a name="_Toc464547857"></a><a
name="_Toc462729118"></a><a name="_Toc442180850"></a><a name="_Toc385349773"></a><a
name="_Toc385349259"></a><a name="_Toc384800410">3.3 PUBLISH  Publish message</a></h2>

<p class=MsoNormal>A PUBLISH packet is sent from a Client to a Server or from a
Server to a Client to transport an Application Message.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901101"></a><a name="_Toc514847974"></a><a
name="_Toc511988578"></a><a name="_Toc473620082"></a><a name="_Toc471483609"></a><a
name="_Toc471282771"></a><a name="_Toc464635153"></a><a name="_Toc464547858"></a><a
name="_Toc462729119"></a><a name="_Toc442180851"></a><a name="_Toc385349774"></a><a
name="_Toc385349260"></a><a name="_Toc384800411"></a><a name="_Ref384201650"></a><a
name="_Toc359155456"></a><a name="_Toc359155568"></a><a name="_Toc359155680"></a><a
name="_Toc359155457"></a><a name="_Toc359155569"></a><a name="_Toc359155681"></a>3.3.1
PUBLISH Fixed Header</h3>

<p class=MsoCaption><a name="_Figure_3.10_-"></a><a name="_Figure_3.10_"></a>Figure
3&#8209;8  PUBLISH packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="96%"
 style='width:96.38%;border-collapse:collapse;border:none'>
 <tr>
  <td width="16%" valign=top style='width:16.66%;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width="8%" valign=top style='width:8.34%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width="9%" valign=top style='width:9.96%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width="11%" valign=top style='width:11.26%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width="9%" valign=top style='width:9.42%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width="11%" valign=top style='width:11.02%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width="9%" valign=top style='width:9.64%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width="11%" valign=top style='width:11.28%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width="12%" valign=top style='width:12.42%;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.66%;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width="38%" colspan=4 valign=top style='width:38.98%;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (3)</p>
  </td>
  <td width="11%" valign=top style='width:11.02%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>DUP flag</p>
  </td>
  <td width="20%" colspan=2 valign=top style='width:20.92%;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>QoS level</p>
  </td>
  <td width="12%" valign=top style='width:12.42%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>RETAIN</p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.66%;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width="8%" valign=top style='width:8.34%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width="9%" valign=top style='width:9.96%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width="11%" valign=top style='width:11.26%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width="9%" valign=top style='width:9.42%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width="11%" valign=top style='width:11.02%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width="9%" valign=top style='width:9.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width="11%" valign=top style='width:11.28%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width="12%" valign=top style='width:12.42%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.66%;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width="83%" colspan=8 valign=top style='width:83.34%;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901102"></a><a name="_Toc514847975"></a><a
name="_Toc511988579"></a><a name="_Toc473620083"></a><a name="_Toc471483610"></a><a
name="_Toc471282772"></a><a name="_Toc464635154"></a><a name="_Toc464547859"></a><a
name="_Toc462729120"></a><a name="_Toc385349262">3.3.1.1 DUP</a></h4>

<p class=MsoNormal><b>Position:</b> byte 1, bit 3.</p>

<p class=MsoNormal>If the DUP flag is set to 0, it indicates that this is the
first occasion that the Client or Server has attempted to send this PUBLISH packet.
If the DUP flag is set to 1, it indicates that this might be re-delivery of an
earlier attempt to send the packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The DUP flag MUST be set to
1 by the Client or Server when it attempts to re-deliver a PUBLISH packet</span>
<span style='color:red'>[MQTT-3.3.1-1]</span>. <span style='background:yellow'>The
DUP flag MUST be set to 0 for all QoS 0 messages</span> <span style='color:
red'>[MQTT-3.3.1-2]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The value of the DUP flag from an incoming PUBLISH packet is
not propagated when the PUBLISH packet is sent to subscribers by the Server. <span
style='background:yellow'>The DUP flag in the outgoing PUBLISH packet is set
independently to the incoming PUBLISH packet, its value MUST be determined
solely by whether the outgoing PUBLISH packet is a retransmission</span> <span
style='color:red'>[MQTT-3.3.1-3]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620084"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The receiver of an MQTT Control
Packet that contains the DUP flag set to 1 cannot assume that it has seen an
earlier copy of this packet. </p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620085"><b>Non-normative
comment</b></a><b> </b></p>

<p class=MsoNormal style='margin-left:.5in'>It is important to note that the
DUP flag refers to the MQTT Control Packet itself and not to the Application
Message that it contains. When using QoS 1, it is possible for a Client to
receive a PUBLISH packet with DUP flag set to 0 that contains a repetition of
an Application Message that it received earlier, but with a different Packet
Identifier.<a href="#_Toc358219870"> Section 2.2.1</a> provides more
information about Packet Identifiers.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h4><a name="_Toc3901103"></a><a name="_Toc514847976"></a><a
name="_Toc511988580"></a><a name="_Toc473620086"></a><a name="_Toc471483611"></a><a
name="_Toc471282773"></a><a name="_Toc464635155"></a><a name="_Toc464547860"></a><a
name="_Toc462729121"></a><a name="_Toc385349263">3.3.1.2 QoS</a></h4>

<p class=MsoNormal><b>Position:</b> byte 1, bits 2-1.</p>

<p class=MsoNormal>This field indicates the level of assurance for delivery of
an Application Message. The QoS levels are shown below. <a href="#_Table_3.11_-"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620087"></a><a name="_Table_3.11_-"></a>Table
3&#8209;2 - QoS definitions</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>QoS value</b></p>
  </td>
  <td width=51 valign=top style='width:38.1pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit 2</b></p>
  </td>
  <td width=48 valign=top style='width:.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>bit 1</b></p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=51 valign=top style='width:38.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>At most once delivery</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=51 valign=top style='width:38.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>At least once delivery</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>2</p>
  </td>
  <td width=51 valign=top style='width:38.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Exactly once delivery</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>-</p>
  </td>
  <td width=51 valign=top style='width:38.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Reserved  must not be used</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server included a Maximum QoS in its CONNACK response
to a Client and it receives a PUBLISH packet with a QoS greater than this, then
it uses DISCONNECT with Reason Code 0x9B (QoS not supported) as described in <a
href="#S4_13_Errors">section 4.13</a> Handling errors.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A PUBLISH Packet MUST NOT
have both QoS bits set to 1</span> <span style='color:red'>[MQTT-3.3.1-4]</span>.
If a Server or Client receives a PUBLISH packet which has both QoS bits set to
1 it is a Malformed Packet. Use DISCONNECT with Reason Code 0x81 (Malformed
Packet) as described in <a href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901104"></a><a name="_Toc514847977"></a><a
name="_Toc511988581"></a><a name="_Ref475433114"></a><a name="_Toc473620088"></a><a
name="_Toc471483612"></a><a name="_Toc471282774"></a><a name="_Toc464635156"></a><a
name="_Toc464547861"></a><a name="_Toc462729122"></a><a name="_Toc385349265">3.3.1.3
RETAIN</a></h4>

<p class=MsoNormal><b>Position:</b> byte 1, bit 0.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the RETAIN flag is set to
1 in a PUBLISH packet sent by a Client to a Server, the Server MUST replace any
existing retained message for this topic and store the Application Message</span>
<span style='color:red'>[MQTT-3.3.1-5]</span>, so that it can be delivered to
future subscribers whose subscriptions match its Topic Name. <span
style='background:yellow'>If the Payload contains zero bytes it is processed
normally by the Server but any retained message with the same topic name MUST
be removed and any future subscribers for the topic will not receive a retained
message</span> <span style='color:red'>[MQTT-3.3.1-6]</span>. <span
style='background:yellow'>A retained message with a Payload containing zero bytes
MUST NOT be stored as a retained message on the Server</span> <span
style='color:red'>[MQTT-3.3.1-7]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the RETAIN flag is 0 in a
PUBLISH packet sent by a Client to a Server, the Server MUST NOT store the message
as a retained message and MUST NOT remove or replace any existing retained
message</span> <span style='color:red'>[MQTT-3.3.1-8]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server included Retain Available in its CONNACK
response to a Client with its value set to 0 and it receives a PUBLISH packet
with the RETAIN flag is set to 1, then it uses the DISCONNECT Reason Code of
0x9A (Retain not supported) as described in <a href="#S4_13_Errors">section
4.13</a>.</p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal>When a new Non&#8209;shared Subscription is made, the last
retained message, if any, on each matching topic name is sent to the Client as
directed by the Retain Handling Subscription Option. These messages are sent
with the RETAIN flag set to 1. Which retained messages are sent is controlled
by the Retain Handling Subscription Option. At the time of the Subscription:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If Retain Handling is set to 0
the Server MUST send the retained messages matching the Topic Filter of the
subscription to the Client</span> <span style='color:red'>[MQTT-3.3.1-9]</span>.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If Retain Handling is set to 1 then
if the subscription did not already exist, the Server MUST send all retained
message matching the Topic Filter of the subscription to the Client, and if the
subscription did exist the Server MUST NOT send the retained messages.</span> <span
style='color:red'>[MQTT-3.3.1-10]</span>.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If Retain Handling is set to 2,
the Server MUST NOT send the retained messages</span> <span style='color:red'>[MQTT-3.3.1-11]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_Subscription_Options">section 3.8.3.1</a>
for a definition of the Subscription Options.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server receives a PUBLISH packet with the RETAIN flag
set to 1, and QoS 0 it SHOULD store the new QoS 0 message as the new retained
message for that topic, but MAY choose to discard it at any time. If this
happens there will be no retained message for that topic. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the current retained message for a Topic expires, it is
discarded and there will be no retained message for that topic.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The setting of the RETAIN flag in an Application Message
forwarded by the Server from an established connection is controlled by the Retain
As Published subscription option. Refer to <a href="#_Subscription_Options">section
3.8.3.1</a> for a definition of the Subscription Options.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If the value of Retain As
Published subscription option is set to 0, the Server MUST set the RETAIN flag
to 0 when forwarding an Application Message regardless of how the RETAIN flag
was set in the received PUBLISH packet</span> <span style='color:red'>[MQTT-3.3.1-12]</span>.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If the value of Retain As Published
subscription option is set to 1, the Server MUST set the RETAIN flag equal to
the RETAIN flag in the received PUBLISH packet</span> <span style='color:red'>[MQTT-3.3.1-13]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.25in'><a name="_Toc473620089"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.25in'>Retained messages are useful where
publishers send state messages on an irregular basis. A new non-shared
subscriber will receive the most recent state.</p>

<p class=MsoNormal style='margin-left:.25in'>&nbsp;</p>

<h4><a name="_Toc3901105"></a><a name="_Toc514847978"></a><a
name="_Toc511988582"></a><a name="_Toc473620090"></a><a name="_Toc471483613"></a><a
name="_Toc471282775">3.3.1.4 Remaining Length</a></h4>

<p class=MsoNormal>This is the length of Variable Header plus the length of the
Payload, encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901106"></a><a name="_Toc514847979"></a><a
name="_Toc511988583">3.3.2 PUBLISH </a><a name="_Toc473620091">Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the PUBLISH Packet contains the
following fields in the order: Topic Name, Packet Identifier, and Properties.
The rules for encoding Properties are described in <a href="#_Properties">section
2.2.2</a>.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<h4><a name="_Toc3901107"></a><a name="_Toc514847980"></a><a
name="_Toc511988584"></a><a name="_Toc473620092"></a><a name="_Toc471483615"></a><a
name="_Toc471282777"></a><a name="_Toc464635158"></a><a name="_Toc464547863"></a><a
name="_Toc462729124"></a><a name="_Toc385349267">3.3.2.1 Topic Name</a></h4>

<p class=MsoNormal>The Topic Name identifies the information channel to which Payload
data is published. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Topic Name MUST be
present as the first field in the PUBLISH packet Variable Header. It MUST be a
UTF-8 Encoded String</span> as defined in <a href="#_UTF-8_Encoded_String">section
1.5.4</a> <span style='color:red'>[MQTT-3.3.2-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620093"><span style='background:yellow'>The
Topic Name in the PUBLISH packet MUST NOT contain wildcard characters</span></a>
<span style='color:red'>[MQTT-3.3.2-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Topic Name in a PUBLISH
packet sent by a Server to a subscribing Client MUST match the Subscriptions
Topic Filter</span> according to the matching process defined in <a
href="#_Topic_Names_and">section 4.7</a> <span style='color:red'>[MQTT-3.3.2-3]</span>.
However, as the Server is permitted to map the Topic Name to another name, it
might not be the same as the Topic Name in the original PUBLISH packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>To reduce the size of the PUBLISH packet the sender can use
a Topic Alias. The Topic Alias is described in <a href="#_Topic_Alias">section
3.3.2.3.4</a>. It is a Protocol Error if the Topic Name is zero length and
there is no Topic Alias.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901108"></a><a name="_Toc514847981"></a><a
name="_Toc511988585"></a><a name="_Toc473620094"></a><a name="_Toc471483616"></a><a
name="_Toc471282778"></a><a name="_Toc464635159"></a><a name="_Toc464547864"></a><a
name="_Toc462729125"></a><a name="_Toc385349268">3.3.2.2 Packet Identifier</a></h4>

<p class=MsoNormal>The Packet Identifier field is only present in PUBLISH packets
where the QoS level is 1 or 2. <a href="#_Toc358219870">Section 2.2.1</a>
provides more information about Packet Identifiers.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901109"></a><a name="_Toc514847982"></a><a
name="_Toc511988586">3.3.2.3 PUBLISH Properties</a></h4>

<h5><a name="_Toc3901110"></a><a name="_Toc514847983"></a><a
name="_Toc511988587"></a><a name="_Toc473620095"></a><a name="_Toc471483617"></a><a
name="_Toc471282779"></a><a name="_Toc464635160"></a><a name="_Toc464547865"></a><a
name="_Toc462729126">3.3.2.3.1 Property Length</a></h5>

<p class=MsoNormal style='text-align:justify'>The length of the Properties in
the PUBLISH packet Variable Header encoded as a Variable Byte Integer.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h5><a name="_Toc3901111"></a><a name="_Toc514847984"></a><a
name="_Toc511988588"></a><a name="_Toc473620096"></a><a name="_Toc471483618">3.3.2.3.2
Payload Format Indicator</a></h5>

<p class=MsoNormal><b>1 (0x01) Byte,</b> Identifier of the Payload Format
Indicator. </p>

<p class=MsoNormal>Followed by the value of the Payload Forma t Indicator,
either of: </p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0 (0x00) Byte Indicates that the Payload is unspecified bytes, which
is equivalent to not sending a Payload Format Indicator.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>1 (0x01) Byte Indicates that the Payload is UTF-8 Encoded
Character Data. The UTF-8 data in the Payload <span style='font-size:10.5pt;
color:#333333;background:white'>MUST be well-formed UTF-8 as defined by the
Unicode specification </span><a href="#Unicode"><span style='font-size:10.5pt;
background:white'>[Unicode</span></a><span style='font-size:10.5pt;color:#333333;
background:white'>] and restated in RFC 3629 </span><a href="#RFC3629"><span
style='font-size:10.5pt;background:white'>[RFC3629]</span></a><span
style='font-size:10.5pt;color:#333333;background:white'>. </span></p>

<p class=MsoNormal style='margin-left:.25in'>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Server MUST send the
Payload Format Indicator unaltered to all subscribers receiving the Application
Message</span> <span style='color:red'>[MQTT-3.3.2-4]</span>. The receiver MAY
validate that the Payload is of the format indicated, and if it is not send a
PUBACK, PUBREC, or DISCONNECT with Reason Code of 0x99 (Payload format invalid)
as described in <a href="#S4_13_Errors">section 4.13</a>. <span
style='color:black'>Refer to </span><a href="#_Handling_of_Disallowed">section
5.4.9</a><span style='color:black'> for information about security issues in
validating the payload format.</span><a href="#Unicode"></a><a href="#RFC3629"></a></p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901112"></a><a name="_Toc514847985"></a><a
name="_Toc511988589"></a><a name="_Toc473620097"></a><a name="_Toc471483619">3.3.2.3.3
Message Expiry Interval</a>`</h5>

<p class=MsoNormal><b>2 (0x02) Byte,</b> Identifier of the Message Expiry Interval.
</p>

<p class=MsoNormal>Followed by the Four Byte Integer representing the Message Expiry
Interval.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If present, the Four Byte value is the lifetime of the Application
Message in seconds. <span style='background:yellow'>If the Message Expiry
Interval has passed and the Server has not managed to start onward delivery to
a matching subscriber, then it MUST delete the copy of the message for that
subscriber</span> <span style='color:red'>[MQTT-3.3.2-5]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620098">If absent, the Application Message
does not expire.</a> </p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt;background:white'></p>

<p class=MsoNormal><span style='background:yellow'>The PUBLISH packet sent to a
Client by the Server MUST contain a Message Expiry Interval set to the received
value minus the time that the Application Message has been waiting in the
Server</span> <span style='color:red'>[MQTT-3.3.2-6]</span><span
style='color:black'>.</span> <a name="_Toc473620099">Refer to </a><a
href="#_Session_State">section 4.1</a> for details and limitations of stored
state. </p>

<p class=MsoNormal></p>

<h5><a name="_Toc3901113"></a><a name="_Toc514847986"></a><a
name="_Toc511988590"></a><a name="_Ref476841862"></a><a name="_Toc473620100"></a><a
name="_Toc471483620"></a><a name="_Topic_Alias"></a>3.3.2.3.4 Topic Alias</h5>

<p class=MsoNormal><b>35 (0x23) Byte</b>, Identifier of the Topic Alias. </p>

<p class=MsoNormal>Followed by the Two Byte integer representing the Topic
Alias value. It is a Protocol Error to include the Topic Alias value more than
once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Topic Alias is an integer value that is used to identify
the Topic instead of using the Topic Name. This reduces the size of the PUBLISH
packet, and is useful when the Topic Names are long and the same Topic Names
are used repetitively within a Network Connection.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The sender decides whether to use a Topic Alias and chooses
the value. It sets a Topic Alias mapping by including a non-zero length Topic
Name and a Topic Alias in the PUBLISH packet. The receiver processes the
PUBLISH as normal but also sets the specified Topic Alias mapping to this Topic
Name.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Topic Alias mapping has been set at the receiver, a
sender can send a PUBLISH packet that contains that Topic Alias and a zero length
Topic Name. The receiver then treats the incoming PUBLISH as if it had
contained the Topic Name of the Topic Alias.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A sender can modify the Topic Alias mapping by sending
another PUBLISH in the same Network Connection with the same Topic Alias value
and a different non-zero length Topic Name.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Topic Alias mappings exist only within a Network Connection
and last only for the lifetime of that Network Connection. <span
style='background:yellow'>A receiver MUST NOT carry forward any Topic Alias mappings
from one Network Connection to another</span> <span style='color:red'>[MQTT-3.3.2-7]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Topic Alias of 0 is not permitted. <span style='background:
yellow'>A sender MUST NOT send a PUBLISH packet containing a Topic Alias which
has the value 0</span> <span style='color:red'>[MQTT-3.3.2-8]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Client MUST NOT send a
PUBLISH packet with a Topic Alias greater than the Topic Alias Maximum value
returned by the Server in the CONNACK packet</span> <span style='color:red'>[MQTT-3.3.2-9]</span>.
<span style='background:yellow'>A Client MUST accept all Topic Alias values
greater than 0 and less than or equal to the Topic Alias Maximum value that it
sent in the CONNECT packet</span> <span style='color:red'>[MQTT-3.3.2-10]</span>.
</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Server MUST NOT send a
PUBLISH packet with a Topic Alias greater than the Topic Alias Maximum value
sent by the Client in the CONNECT packet</span> <span style='color:red'>[MQTT-3.3.2-11]</span>.
<span style='background:yellow'>A Server MUST accept all Topic Alias values
greater than 0 and less than or equal to the Topic Alias Maximum value that it
returned in the CONNACK packet</span> <span style='color:red'>[MQTT-3.3.2-12]</span>.
</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Topic Alias mappings used by the Client and Server are
independent from each other. Thus, when a Client sends a PUBLISH containing a
Topic Alias value of 1 to a Server and the Server sends a PUBLISH with a Topic
Alias value of 1 to that Client they will in general be referring to different
Topics.<a name="_Toc462729129"></a></p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc462729130"></a><a name="_Toc442180853"></a><a
name="_Toc385349776"></a><a name="_Toc385349272"></a><a name="_Toc384800413"></a><a
name="_Toc3901114"></a><a name="_Toc514847987"></a><a name="_Toc511988591"></a><a
name="_Toc473620101"></a><a name="_Toc471483621"></a><a name="_Toc471282783"></a><a
name="_Ref466547885"></a><a name="_Toc464635284"></a><a name="_Toc464547989"></a><a
name="_Toc463595993"></a><a name="_Toc463596593"></a><a name="_Toc463596923"></a><a
name="_Toc464224374"></a><a name="_Toc464249848"></a><a name="_Toc464487528"></a><a
name="_Toc464488423"></a><a name="_Toc464477889"></a><a name="_Toc464488898"></a><a
name="_Toc464478250"></a><a name="_Toc464490271"></a><a name="_Toc464479555"></a><a
name="_Toc464547869"></a><a name="_Toc464556781"></a><a name="_Toc464549571"></a><a
name="_Toc464595938"></a><a name="_Toc464635164"></a><a name="_Toc464805522"></a><a
name="_Toc465352140"></a><a name="_Toc465669355"></a><a name="_Toc466620928"></a><a
name="_Toc470189673"></a><a name="_Table_3.2_-"></a><a name="_Toc463595994"></a><a
name="_Toc463596594"></a><a name="_Toc463596924"></a><a name="_Toc464224375"></a><a
name="_Toc464249849"></a><a name="_Toc464487529"></a><a name="_Toc464488424"></a><a
name="_Toc464477890"></a><a name="_Toc464488899"></a><a name="_Toc464478251"></a><a
name="_Toc464490272"></a><a name="_Toc464479556"></a><a name="_Toc464547870"></a><a
name="_Toc464556782"></a><a name="_Toc464549572"></a><a name="_Toc464595939"></a><a
name="_Toc464635165"></a><a name="_Toc464805523"></a><a name="_Toc465352141"></a><a
name="_Toc465669356"></a><a name="_Toc466620929"></a><a name="_Toc470189674"></a><a
name="_Toc463595995"></a><a name="_Toc463596595"></a><a name="_Toc463596925"></a><a
name="_Toc464224376"></a><a name="_Toc464249850"></a><a name="_Toc464487530"></a><a
name="_Toc464488425"></a><a name="_Toc464477891"></a><a name="_Toc464488900"></a><a
name="_Toc464478252"></a><a name="_Toc464490273"></a><a name="_Toc464479557"></a><a
name="_Toc464547871"></a><a name="_Toc464556783"></a><a name="_Toc464549573"></a><a
name="_Toc464595940"></a><a name="_Toc464635166"></a><a name="_Toc464805524"></a><a
name="_Toc465352142"></a><a name="_Toc465669357"></a><a name="_Toc466620930"></a><a
name="_Toc470189675"></a><a name="_Toc463596008"></a><a name="_Toc463596608"></a><a
name="_Toc463596938"></a><a name="_Toc464224389"></a><a name="_Toc464249863"></a><a
name="_Toc464487543"></a><a name="_Toc464488438"></a><a name="_Toc464477904"></a><a
name="_Toc464488913"></a><a name="_Toc464478265"></a><a name="_Toc464490286"></a><a
name="_Toc464479570"></a><a name="_Toc464547884"></a><a name="_Toc464556796"></a><a
name="_Toc464549586"></a><a name="_Toc464595953"></a><a name="_Toc464635179"></a><a
name="_Toc464805537"></a><a name="_Toc465352155"></a><a name="_Toc465669370"></a><a
name="_Toc466620943"></a><a name="_Toc470189688"></a><a name="_Figure_3.11_-"></a><a
name="_Toc463596009"></a><a name="_Toc463596609"></a><a name="_Toc463596939"></a><a
name="_Toc464224390"></a><a name="_Toc464249864"></a><a name="_Toc464487544"></a><a
name="_Toc464488439"></a><a name="_Toc464477905"></a><a name="_Toc464488914"></a><a
name="_Toc464478266"></a><a name="_Toc464490287"></a><a name="_Toc464479571"></a><a
name="_Toc464547885"></a><a name="_Toc464556797"></a><a name="_Toc464549587"></a><a
name="_Toc464595954"></a><a name="_Toc464635180"></a><a name="_Toc464805538"></a><a
name="_Toc465352156"></a><a name="_Toc465669371"></a><a name="_Toc466620944"></a><a
name="_Toc470189689"></a><a name="_Toc463596010"></a><a name="_Toc463596610"></a><a
name="_Toc463596940"></a><a name="_Toc464224391"></a><a name="_Toc464249865"></a><a
name="_Toc464487545"></a><a name="_Toc464488440"></a><a name="_Toc464477906"></a><a
name="_Toc464488915"></a><a name="_Toc464478267"></a><a name="_Toc464490288"></a><a
name="_Toc464479572"></a><a name="_Toc464547886"></a><a name="_Toc464556798"></a><a
name="_Toc464549588"></a><a name="_Toc464595955"></a><a name="_Toc464635181"></a><a
name="_Toc464805539"></a><a name="_Toc465352157"></a><a name="_Toc465669372"></a><a
name="_Toc466620945"></a><a name="_Toc470189690"></a><a name="_Response_Topic"></a>3.3.2.3.5
Response Topic</h5>

<p class=MsoNormal><b><span style='color:#333333;background:white'>8 (0x08)
Byte</span></b><span style='color:#333333;background:white'>, Identifier of the
Response Topic. </span></p>

<p class=MsoNormal><span style='color:#333333;background:white'>Followed by a
UTF-8 Encoded String which is used as the Topic Name for a response message. <span
style='background:yellow'>The Response Topic MUST be a UTF-8 Encoded String</span>
as defined in </span><a href="#_UTF-8_Encoded_String"><span style='background:
white'>section 1.5.4</span></a><span style='color:#333333;background:white'> </span><span
style='color:red'>[MQTT-3.3.2-13]</span><span style='color:#333333;background:
white'>. <span style='background:yellow'>The Response Topic MUST NOT contain
wildcard characters</span> </span><span style='color:red'>[MQTT-3.3.2-14]</span><span
style='color:#333333;background:white'>. It is a Protocol Error to include the Response
Topic more than once. The presence of a Response Topic identifies the Message
as a Request. </span></p>

<p class=MsoNormal><span style='color:#333333;background:white'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620102"><span style='background:white'>Refer
to </span></a><a href="#_Request_/_Response"><span style='background:white'>section
4.10</span></a><span style='background:white'> for more information about Request
/ Response</span><span style='background:white'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='color:#333333;background:yellow'>The Server MUST
send the Response Topic unaltered to all subscribers receiving the Application
Message</span><span style='color:#333333;background:white'> </span><span
style='color:red'>[MQTT-3.3.2-15]</span><span style='color:#333333;background:
white'>.</span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><b><span style='color:#333333;
background:white'>Non-normative comment:</span></b></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:#333333;
background:white'>The receiver of an Application Message with a Response Topic
sends a response by using the Response Topic as the Topic Name of a PUBLISH. If
the Request Message contains a Correlation Data, the receiver of the Request
Message should also include this Correlation Data as a property in the PUBLISH
packet of the Response Message.</span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=apple-converted-space><span
style='color:#333333;background:white'>&nbsp;</span></span></p>

<h5><a name="_Toc3901115"></a><a name="_Toc514847988"></a><a
name="_Toc511988592"></a><a name="_Ref473881434"></a><a name="_Toc473620104"></a><a
name="_Toc471483622"></a><a name="_Toc471282784"></a><a name="_Toc464635285"></a><a
name="_Toc464547990"></a><a name="_Correlation_Data"></a>3.3.2.3.6 Correlation
Data</h5>

<p class=MsoNormal><b>9 (0x09) Byte,</b> Identifier of the Correlation Data. </p>

<p class=MsoNormal>Followed by Binary Data. The Correlation Data is used by the
sender of the Request Message to identify which request the Response Message is
for when it is received. It is a Protocol Error to include Correlation Data
more than once. If the Correlation Data is not present, the Requester does not
require any correlation data.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620105"><span style='background:yellow'>The
Server MUST send the Correlation Data unaltered to all subscribers receiving
the Application Message</span> </a><span style='color:red'>[MQTT-3.3.2-16]</span>.
The value of the Correlation Data only has meaning to the sender of the Request
Message and receiver of the Response Message.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620106"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The receiver of an Application
Message which contains both a Response Topic and a Correlation Data sends a
response by using the Response Topic as the Topic Name of a PUBLISH. The Client
should also send the Correlation Data unaltered as part of the PUBLISH of the
responses.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If the Correlation Data contains
information which can cause application failures if modified by the Client responding
to the request, it should be encrypted and/or hashed to allow any alteration to
be detected.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_Request_/_Response">section 4.10</a> for
more information about Request / Response</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901116"></a><a name="_Toc514847989"></a><a
name="_Toc511988593"></a><a name="_Toc473620109"></a><a name="_Toc471483623"></a><a
name="_Toc471282785"></a><a name="_Toc464635286"></a><a name="_Toc464547991">3.3.2.3.7
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte</b>, Identifier of the User Property.</p>

<p class=MsoNormal>Followed by a UTF-8 String Pair. The User Property is allowed
to appear multiple times to represent multiple name, value pairs. The same name
is allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Server MUST send all
User Properties unaltered in a PUBLISH packet when forwarding the Application
Message to a Client</span> <span style='color:red'>[MQTT-3.3.2-17]</span>. <span
style='background:yellow'>The Server MUST maintain the order of User Properties
when forwarding the Application Message</span> <span style='color:red'>[MQTT-3.3.2-18]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620110"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>This property is intended to
provide a means of transferring application layer name-value tags whose meaning
and interpretation are known only by the application programs responsible for
sending and receiving them.</p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:#333333;
background:white'>&nbsp;</span></p>

<h5><a name="_Toc3901117"></a><a name="_Toc514847990"></a><a
name="_Toc511988594"></a><a name="_Toc473620112"></a><a name="_Toc471483624"></a><a
name="_Toc471282786">3.3.2.3.8 Subscription Identifier</a></h5>

<p class=MsoListParagraphCxSpFirst style='margin-left:0in'><b>11 (0x0B)</b>,
Identifier of the Subscription Identifier.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:0in'>Followed by a
Variable Byte Integer representing the identifier of the subscription. </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:0in'>The Subscription
Identifier can have the value of 1 to 268,435,455. It is a Protocol Error if
the Subscription Identifier has a value of 0. Multiple Subscription Identifiers
will be included if the publication is the result of a match to more than one
subscription, in this case their order is not significant.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:0in'>&nbsp;</p>

<h5><a name="_Toc3901118"></a><a name="_Toc514847991"></a><a
name="_Toc511988595"></a><a name="_Toc473620113"></a><a name="_Toc471483625"></a><a
name="_Toc471282787">3.3.2.3.9 Content Type</a></h5>

<p class=MsoListParagraphCxSpFirst style='margin-left:0in'><b>3 (0x03)</b>
Identifier of the Content Type. </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:0in'>Followed by a UTF-8
Encoded String describing the content of the Application Message. <span
style='color:#333333;background:yellow'>The Content Type MUST be a UTF-8
Encoded String</span><span style='color:#333333;background:white'> as defined
in </span><a href="#_UTF-8_Encoded_String"><span style='background:white'>section
1.5.4</span></a><span style='color:#333333;background:white'> </span><span
style='color:red'>[MQTT-3.3.2-19]</span><span style='color:#333333;background:
white'>. </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:0in'><span
style='color:#333333;background:white'>It is a Protocol Error to include the Content
Type more than once. </span>The value of the Content Type is defined by the
sending and receiving application. </p>

<p class=MsoListParagraphCxSpLast style='margin-left:0in'>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620114"><span style='background:yellow'>A
Server MUST send the Content Type unaltered to all subscribers receiving the Application
Message</span></a> <span style='color:red'>[MQTT-3.3.2-20]</span>. </p>

<p class=MsoListParagraph style='margin-left:0in'><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620115"><b>Non-normative
comment</b></a></p>

<p class=MsoListParagraphCxSpFirst>The UTF-8 Encoded String may use a MIME
content type string to describe the contents of the Application message.
However, since the sending and receiving applications are responsible for the
definition and interpretation of the string, MQTT performs no validation of the
string except to insure it is a valid UTF-8 Encoded String.<a
name="_Toc471483626"></a><a name="_Toc471282788"></a><a name="_Toc464635287"></a><a
name="_Toc464547992"></a></p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle><a name="_Toc462729131"></a><a
name="_Toc442180854"></a><a name="_Toc385349777"></a><a name="_Toc385349273"></a><a
name="_Toc384800414"><b>Non-normative example</b></a></p>

<p class=MsoListParagraphCxSpLast>Figure 3-9 shows an example of a PUBLISH
packet with the Topic Name set to a/b, the Packet Identifier set to 10, and
having no properties.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620119">Figure </a>3&#8209;9
- PUBLISH packet Variable Header non-normative example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Topic Name</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length MSB (0)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 style='width:25.65pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length LSB (3)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>a (0x61)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>/ (0x2F)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>b (0x62)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier MSB (0)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier LSB (10)</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Property Length</p>
  </td>
 </tr>
 <tr>
  <td width=100 valign=top style='width:75.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 8</p>
  </td>
  <td width=247 valign=top style='width:185.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No Properties</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 valign=top style='width:28.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=41 valign=top style='width:30.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901119"></a><a name="_Toc514847992"></a><a
name="_Toc511988596">3.3.3 PUBLISH Payload</a></h3>

<p class=MsoNormal>The Payload contains the Application Message that is being
published. The content and format of the data is application specific. The
length of the Payload can be calculated by subtracting the length of the Variable
Header from the Remaining Length field that is in the Fixed Header. It is valid
for a PUBLISH packet to contain a zero length Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901120"></a><a name="_Toc514847993"></a><a
name="_Toc511988597"></a><a name="_Ref484162679"></a><a name="_Toc473620121"></a><a
name="_Toc471483628"></a><a name="_Toc471282790"></a><a name="_Toc464635289"></a><a
name="_Toc464547994"></a><a name="_Toc462729132"></a><a name="_Toc442180855"></a><a
name="_Toc385349778"></a><a name="_Toc385349275"></a><a name="_Toc384800415"></a><a
name="_PUBLISH_Actions"></a>3.3.4 PUBLISH Actions</h3>

<p class=MsoNormal><span style='background:yellow'>The receiver of a PUBLISH
Packet MUST respond with the packet as determined by the QoS in the PUBLISH
Packet</span> <span style='color:red'>[MQTT-3.3.4-1]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Table 3&#8209;3 Expected PUBLISH packet response</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>QoS Level</b></p>
  </td>
  <td width=210 valign=top style='width:157.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Expected
  Response</b></p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>QoS 0</p>
  </td>
  <td width=210 valign=top style='width:157.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>None</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>QoS 1</p>
  </td>
  <td width=210 valign=top style='width:157.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBACK packet</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>QoS 2</p>
  </td>
  <td width=210 valign=top style='width:157.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREC packet</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client uses a PUBLISH packet to send an Application
Message to the Server, for distribution to Clients with matching subscriptions.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server uses a PUBLISH packet to send an Application
Message to each Client which has a matching subscription. The PUBLISH packet
includes the Subscription Identifier carried in the SUBSCRIBE packet, if there
was one.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>When Clients make subscriptions with Topic Filters that
include wildcards, it is possible for a Clients subscriptions to overlap so
that a published message might match multiple filters. <span style='background:
yellow'>In this case the Server MUST deliver the message to the Client respecting
the maximum QoS of all the matching subscriptions</span> <span
style='color:red'>[MQTT-3.3.4-2]</span>. In addition, the Server MAY deliver
further copies of the message, one for each additional matching subscription
and respecting the subscriptions QoS in each case.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Client receives an unsolicited Application Message (not
resulting from a subscription) which has a QoS greater than Maximum QoS, it
uses a DISCONNECT packet with Reason Code 0x9B (QoS not supported ) as
described in <a href="#S4_13_Errors">section 4.13</a> Handling errors.</p>

<p class=MsoNormal></p>

<p class=MsoNormal><span style='background:yellow'>If the Client specified a
Subscription Identifier for any of the overlapping subscriptions the Server
MUST send those Subscription Identifiers in the message which is published as
the result of the subscriptions</span> <span style='color:red'>[MQTT-3.3.4-3]</span>.
<span style='background:yellow'>If the Server sends a single copy of the
message it MUST include in the PUBLISH packet the Subscription Identifiers for
all matching subscriptions which have a Subscription Identifiers, their order
is not significant</span> <span style='color:red'>[MQTT-3.3.4-4]</span>. <span
style='background:yellow'>If the Server sends multiple PUBLISH packets it MUST
send, in each of them, the Subscription Identifier of the matching subscription
if it has a Subscription Identifier</span> <span style='color:red'>[MQTT-3.3.4-5]</span>.</p>

<p class=MsoNormal><span style='font-size:10.5pt;color:#333333;background:white'>&nbsp;</span></p>

<p class=MsoNormal>It is possible that the Client made several subscriptions which
match a publication and that it used the same identifier for more than one of
them. In this case the PUBLISH packet will carry multiple identical Subscription
Identifiers.</p>

<p class=MsoNormal><span class=apple-converted-space><span style='font-size:
10.5pt;color:#333333;background:white'>&nbsp;</span></span></p>

<p class=MsoNormal>It is a Protocol Error for a PUBLISH packet to contain any Subscription
Identifier other than those received in SUBSCRIBE packet which caused it to
flow. <span style='background:yellow'>A PUBLISH packet sent from a Client to a Server
MUST NOT contain a Subscription Identifier</span> <span style='color:red'>[MQTT-3.3.4-6]</span>.</p>

<p class=MsoNormal><span style='font-size:10.5pt;color:#333333;background:white'>&nbsp;</span></p>

<p class=MsoNormal>If the subscription was shared, then only the Subscription Identifiers
that were present in the SUBSCRIBE packet from the Client which is receiving
the message are returned in the PUBLISH packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The action of the recipient when it receives a PUBLISH packet
depends on the QoS level as described in <a href="#_Quality_of_Service">section
4.3.</a><a name="_Toc384800416"></a><a name="_Toc385349276"></a><a
name="_Toc385349779"></a><a name="_Toc442180856"></a><a name="_Toc462729133"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the PUBLISH packet contains a Topic Alias, the receiver
processes it as follows: </p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'>1)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>A Topic Alias
value of 0 or greater than the Maximum Topic Alias is a Protocol Error, the
receiver uses DISCONNECT with Reason Code of 0x94 (Topic Alias invalid) as
described in <a href="#S4_13_Errors">section 4.13.</a> <br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>2)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>If the receiver
has already established a mapping for the Topic Alias, then</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>a)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>If the packet
has a zero length Topic Name, the receiver processes it using the Topic Name
that corresponds to the Topic Alias</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>b)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>If the packet
contains a non-zero length Topic Name, the receiver processes the packet using
that Topic Name and updates its mapping for the Topic Alias to the Topic Name
from the incoming packet<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>3)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>If the receiver
does not already have a mapping for this Topic Alias</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>a)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>If the packet
has a zero length Topic Name field it is a Protocol Error and the receiver uses
DISCONNECT with Reason Code of 0x82 (Protocol Error) as described in <a
href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'>b)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>If the packet
contains a Topic Name with a non-zero length, the receiver processes the packet
using that Topic Name and sets its mappings for the Topic Alias to Topic Name
from the incoming packet.</p>

<p class=MsoNormal style='margin-left:.25in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative Comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If the Server distributes
Application Messages to Clients at different protocol levels (such as MQTT
V3.1.1) which do not support properties or other features provided by this specification,
some information in the Application Message can be lost, and applications which
depend on this information might not work correctly.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client MUST NOT send
more than Receive Maximum QoS 1 and QoS 2 PUBLISH packets for which it has not
received PUBACK, PUBCOMP, or PUBREC with a Reason Code of 128 or greater from
the Server</span> <span style='color:red'>[MQTT-3.3.4-7]</span>. If it receives
more than Receive Maximum QoS 1 and QoS 2 PUBLISH packets where it has not sent
a PUBACK or PUBCOMP in response, the Server uses a DISCONNECT packet with
Reason Code 0x93 (Receive Maximum exceeded) as described in <a
href="#S4_13_Errors">section 4.13</a> Handling errors. Refer to <a
href="#_Flow_Control">section 4.9</a> for more information about flow control.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client MUST NOT delay
the sending of any packets other than PUBLISH packets due to having sent
Receive Maximum PUBLISH packets without receiving acknowledgements for them</span>
<span style='color:red'>[MQTT-3.3.4-8]</span>. The value of Receive Maximum
applies only to the current Network Connection.</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The Client might choose to send
fewer than Receive Maximum messages to the Server without receiving
acknowledgement, even if it has more than this number of messages available to
send. </p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The Client might choose to suspend
the sending of QoS 0 PUBLISH packets when it suspends the sending of QoS 1 and
QoS 2 PUBLISH packets. </p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If the Client sends QoS 1 or QoS 2
PUBLISH packets before it has received a CONNACK packet, it risks being disconnected
because it has sent more than Receive Maximum publications.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><span style='background:yellow'>The Server MUST NOT send
more than Receive Maximum QoS 1 and QoS 2 PUBLISH packets for which it has not
received PUBACK, PUBCOMP, or PUBREC with a Reason Code of 128 or greater from
the Client</span> <span style='color:red'>[MQTT-3.3.4-9]</span>. If it receives
more than Receive Maximum QoS 1 and QoS 2 PUBLISH packets where it has not sent
a PUBACK or PUBCOMP in response, the Client uses DISCONNECT with Reason Code
0x93 (Receive Maximum exceeded) as described in <a href="#S4_13_Errors">section
4.13</a> Handling errors. Refer to <a href="#_Flow_Control">section 4.9</a> for
more information about flow control.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Server MUST NOT delay
the sending of any packets other than PUBLISH packets due to having sent
Receive Maximum PUBLISH packets without receiving acknowledgements for them</span>
<span style='color:red'>[MQTT-3.3.4-10]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The Server might choose to send
fewer than Receive Maximum messages to the Client without receiving
acknowledgement, even if it has more than this number of messages available to
send. </p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The Server might choose to suspend
the sending of QoS 0 PUBLISH packets when it suspends the sending of QoS 1 and
QoS 2 PUBLISH packets.</p>

<p class=MsoNormal style='margin-left:.25in'>&nbsp;</p>

<h2><a name="_Toc3901121"></a><a name="_Toc514847994"></a><a
name="_Toc511988598"></a><a name="_Toc473620122"></a><a name="_Toc471483629"></a><a
name="_Toc471282791"></a><a name="_Toc464635290"></a><a name="_Toc464547995"></a><a
name="_Toc465669482"></a><a name="_Toc466621055"></a><a name="_Toc470189802"></a>3.4
PUBACK  Publish acknowledgement </h2>

<p class=MsoNormal>A PUBACK packet is the response to a PUBLISH packet with QoS
1.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901122"></a><a name="_Toc514847995"></a><a
name="_Toc511988599"></a><a name="_Toc473620123">3.4.1 PUBACK Fixed Header</a></h3>

<p class=MsoCaption>Figure 3&#8209;10 - PUBACK packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=68 valign=top style='width:50.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:202.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (4)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.0pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=68 valign=top style='width:50.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=541 colspan=8 valign=top style='width:405.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length </p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620124"><b>Remaining Length field</b></a></p>

<p class=MsoNormal>This is the length of the Variable Header, encoded as a Variable
Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901123"></a><a name="_Toc514847996"></a><a
name="_Toc511988600"></a><a name="_Toc473620125">3.4.2 PUBACK Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the PUBACK Packet contains the
following fields in the order: Packet Identifier from the PUBLISH packet that
is being acknowledged, PUBACK Reason Code, Property Length, and the Properties.
The rules for encoding Properties are described in <a href="#_Properties">section
2.2.2</a>. </p>

<p class=MsoNormal><a name="_Figure_3.13_"></a>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620126">Figure </a>3&#8209;11
 PUBACK packet Variable Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  MSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  LSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>PUBACK Reason Code</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Property Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471483632"></a><a name="_Toc471282794"></a><a
name="_Toc464635293"></a><a name="_Toc464547998"></a><a name="_Toc462729136">&nbsp;</a></p>

<h4><a name="_Toc3901124"></a><a name="_Toc514847997"></a><a
name="_Toc511988601"></a><a name="_Toc473620127">3.4.2.1 PUBACK </a>Reason Code</h4>

<p class=MsoNormal>Byte 3 in the Variable Header is the PUBACK Reason Code. If
the Remaining Length is 2, then there is no Reason Code and the value of 0x00
(Success) is used.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620129"></a><a name="_Ref459301853">Table </a>3&#8209;4 - PUBACK Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=685
 style='width:513.9pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Success</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The message is accepted. Publication of the QoS 1 message
  proceeds. </p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>16</p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x10</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No matching subscribers</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The message is accepted but there are no subscribers. This
  is sent only by the Server. If the Server knows that there are no matching
  subscribers, it MAY use this Reason Code instead of 0x00 (Success).</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>128</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x80</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unspecified error</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The receiver does not accept the publish but either does
  not want to reveal the reason, or it does not match one of the other values.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>131</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x83</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Implementation specific error</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The PUBLISH is valid but the receiver is not willing to
  accept it. </p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>135</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x87</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Not authorized</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The PUBLISH is not authorized.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>144</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x90</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Name invalid</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Topic Name is not malformed, but is not accepted by
  this Client or Server.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>145</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x91</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet identifier in use</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Packet Identifier is already in use. This might
  indicate a mismatch in the Session State between the Client and Server.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>151</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x97</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Quota exceeded</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>An implementation or administrative imposed limit has been
  exceeded.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:39.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>153</span></p>
  </td>
  <td width=75 valign=top style='width:56.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x99</p>
  </td>
  <td width=224 valign=top style='width:167.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Payload format invalid</p>
  </td>
  <td width=333 valign=top style='width:250.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The payload format does not match the specified Payload
  Format Indicator.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc442180859"></a><a name="_Toc385349782"></a><a
name="_Toc385349281"></a><a name="_Toc384800419">&nbsp;</a></p>

<p class=MsoNormal><span style='background:yellow'>The Client or Server sending
the PUBACK packet MUST use one of the PUBACK Reason Codes</span> <span
style='color:red'>[MQTT-3.4.2-1]</span>. The Reason Code and Property Length
can be omitted if the Reason Code is 0x00 (Success) and there are no
Properties. In this case the PUBACK has a Remaining Length of 2.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901125"></a><a name="_Toc514847998"></a><a
name="_Toc511988602"></a><a name="_Toc483825180"></a><a name="_Toc484601697"></a><a
name="_Toc484602280"></a><a name="_Toc486515479"></a><a name="_Toc486836408"></a><a
name="_Toc487096872"></a>3.4.2.2 PUBACK Properties</h4>

<h5><a name="_Toc3901126"></a><a name="_Toc514847999"></a><a
name="_Toc511988603"></a><a name="_Toc473620130"></a><a name="_Toc471483633"></a><a
name="_Toc471282795"></a><a name="_Toc464635294"></a><a name="_Toc464547999">3.4.2.2.1
Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the PUBACK packet Variable
Header encoded as a Variable Byte Integer. If the Remaining Length is less than
4 there is no Property Length and the value of 0 is used.</p>

<p class=MsoNormal><span lang=EN-GB style='color:black'>&nbsp;</span></p>

<h5><a name="_Toc3901127"></a><a name="_Toc514848000"></a><a
name="_Toc511988604"></a><a name="_Toc473620131"></a><a name="_Toc471483634"></a><a
name="_Toc471282796"></a><a name="_Toc464635295"></a><a name="_Toc464548000">3.4.2.2.2
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte</b>, Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is a human readable string
designed for diagnostics and is not intended to be parsed by the receiver. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The sender uses this value to give additional information to
the receiver. <span style='background:yellow'>The sender MUST NOT send this
property if it would increase the size of the PUBACK packet beyond the Maximum
Packet Size specified by the receiver</span> <span style='color:red'>[MQTT-3.4.2-2]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901128"></a><a name="_Toc514848001"></a><a
name="_Toc511988605"></a><a name="_Toc473620132"></a><a name="_Toc471483635">3.4.2.2.3
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property can be used to
provide additional diagnostic or other information. <span style='background:
yellow'>The sender MUST NOT send this property if it would increase the size of
the PUBACK packet beyond the Maximum Packet Size specified by the receiver</span>
<span style='color:red'>[MQTT-3.4.2-3]</span>. The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901129"></a><a name="_Toc514848002"></a><a
name="_Toc511988606"></a><a name="_Toc473620133"></a><a name="_Toc471483636"></a><a
name="_Toc471282797"></a><a name="_Toc464635297"></a><a name="_Toc464548002"></a><a
name="_Toc462729137"></a><a name="_Toc464224506"></a><a name="_Toc464249980"></a><a
name="_Toc464487660"></a><a name="_Toc464488555"></a><a name="_Toc464478021"></a><a
name="_Toc464489030"></a><a name="_Toc464478382"></a><a name="_Toc464490403"></a><a
name="_Toc464479687"></a><a name="_Toc464548001"></a><a name="_Toc464556913"></a><a
name="_Toc464549703"></a><a name="_Toc464596070"></a><a name="_Toc464635296"></a><a
name="_Toc464805654"></a><a name="_Toc465352272"></a><a name="_Toc465669489"></a><a
name="_Toc466621062"></a><a name="_Toc470189809"></a>3.4.3 PUBACK Payload</h3>

<p class=MsoNormal>The PUBACK packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901130"></a><a name="_Toc514848003"></a><a
name="_Toc511988607"></a><a name="_Toc473620134"></a><a name="_Toc471483637"></a><a
name="_Toc471282798"></a><a name="_Toc464635298"></a><a name="_Toc464548003"></a><a
name="_Toc462729138"></a><a name="_Toc442180860"></a><a name="_Toc385349783"></a><a
name="_Toc385349282"></a><a name="_Toc384800420">3.4.4 PUBACK Actions</a></h3>

<p class=MsoNormal>This is described in <a href="#_QoS_1:_At">section 4.3.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901131"></a><a name="_Toc514848004"></a><a
name="_Toc511988608"></a><a name="_Toc473620135"></a><a name="_Toc471483638"></a><a
name="_Toc471282799"></a><a name="_Toc464635299"></a><a name="_Toc464548004"></a><a
name="_Toc462729139"></a><a name="_Toc442180861"></a><a name="_Toc385349784"></a><a
name="_Toc385349283"></a><a name="_Toc384800421">3.5 PUBREC  Publish received
(QoS 2 delivery part 1)</a></h2>

<p class=MsoNormal>A PUBREC packet is the response to a PUBLISH packet with QoS
2. It is the second packet of the QoS 2 protocol exchange.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901132"></a><a name="_Toc514848005"></a><a
name="_Toc511988609"></a><a name="_Toc473620136">3.5.1 PUBREC Fixed Header</a></h3>

<p class=MsoCaption><a name="_Figure_3.14_"></a>Figure 3&#8209;12
- PUBREC packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=268 colspan=4 valign=top style='width:200.7pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (5)</p>
  </td>
  <td width=268 colspan=4 valign=top style='width:200.7pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=535 colspan=8 valign=top style='width:401.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length </p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620137"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620138">This is the length of the Variable
Header, encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901133"></a><a name="_Toc514848006"></a><a
name="_Toc511988610"></a><a name="_Toc473620139">3.5.2 PUBREC Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the PUBREC Packet consists of the
following fields in the order: the Packet Identifier from the PUBLISH packet
that is being acknowledged, PUBREC Reason Code, and Properties. The rules for
encoding Properties are described in<a href="#_Properties"> section 2.2.2</a>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620140"></a><a name="_Figure_3.15_"></a>Figure
3&#8209;13 - PUBREC packet Variable Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  MSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  LSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>PUBREC Reason Code</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Property Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471483641"></a><a name="_Toc471282802"></a><a
name="_Toc464635302"></a><a name="_Toc464548007"></a><a name="_Toc462729142">&nbsp;</a></p>

<h4><a name="_Toc3901134"></a><a name="_Toc514848007"></a><a
name="_Toc511988611"></a><a name="_Toc473620141">3.5.2.1 PUBREC Reason Code</a></h4>

<p class=MsoNormal>Byte 3 in the Variable Header is the PUBREC Reason Code. If
the Remaining Length is 2, then the Publish Reason Code has the value 0x00
(Success).</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620142"></a><a name="_Ref459633283"></a><a
name="_Ref459302849">Table </a>3&#8209;5  PUBREC Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=685
 style='width:513.9pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Success</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The message is accepted. Publication of the QoS 2 message
  proceeds. </p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>16</p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x10</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No matching subscribers.</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The message is accepted but there are no subscribers. This
  is sent only by the Server. If the Server knows that there are no matching
  subscribers, it MAY use this Reason Code instead of 0x00 (Success).</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>128</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x80</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unspecified error</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The receiver does not accept the publish but either does
  not want to reveal the reason, or it does not match one of the other values.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>131</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x83</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Implementation specific error</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The PUBLISH is valid but the receiver is not willing to
  accept it. </p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>135</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x87</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Not authorized</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The PUBLISH is not authorized.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>144</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x90</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Name invalid</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Topic Name is not malformed, but is not accepted by
  this Client or Server.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>145</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x91</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier in use</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Packet Identifier is already in use. This might
  indicate a mismatch in the Session State between the Client and Server.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>151</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x97</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Quota exceeded</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>An implementation or administrative imposed limit has been
  exceeded.</p>
  </td>
 </tr>
 <tr>
  <td width=53 valign=top style='width:40.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>153</span></p>
  </td>
  <td width=71 valign=top style='width:53.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x99</p>
  </td>
  <td width=195 valign=top style='width:146.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Payload format invalid</p>
  </td>
  <td width=366 valign=top style='width:274.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The payload format does not match the one specified in the
  Payload Format Indicator.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client or Server sending
the PUBREC packet MUST use one of the PUBREC Reason Code values.</span> <span
style='color:red'>[MQTT-3.5.2-1]</span>. The Reason Code and Property Length
can be omitted if the Reason Code is 0x00 (Success) and there are no
Properties. In this case the PUBREC has a Remaining Length of 2.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901135"></a><a name="_Toc514848008"></a><a
name="_Toc511988612">3.5.2.2 PUBREC Properties</a></h4>

<h5><a name="_Toc3901136"></a><a name="_Toc514848009"></a><a
name="_Toc511988613"></a><a name="_Toc473620143"></a><a name="_Toc471483642"></a><a
name="_Toc471282803"></a><a name="_Toc464635303"></a><a name="_Toc464548008">3.5.2.2.1
Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the PUBREC packet Variable
Header encoded as a Variable Byte Integer. If the Remaining Length is less than
4 there is no Property Length and the value of 0 is used.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901137"></a><a name="_Toc514848010"></a><a
name="_Toc511988614"></a><a name="_Toc473620144"></a><a name="_Toc471483643"></a><a
name="_Toc471282804"></a><a name="_Toc464635304"></a><a name="_Toc464548009">3.5.2.2.2
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte</b>, Identifier of the Reason String.</p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is human readable, designed
for diagnostics and SHOULD NOT be parsed by the receiver. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The sender uses this value to give additional information to
the receiver. <span style='background:yellow'>The sender MUST NOT send this
property if it would increase the size of the PUBREC packet beyond the Maximum
Packet Size specified by the receiver</span> <span style='color:red'>[MQTT-3.5.2-2]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901138"></a><a name="_Toc514848011"></a><a
name="_Toc511988615"></a><a name="_Toc473620145"></a><a name="_Toc471483644">3.5.2.2.3
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property can be used to provide
additional diagnostic or other information. <span style='background:yellow'>The
sender MUST NOT send this property if it would increase the size of the PUBREC packet
beyond the Maximum Packet Size specified by the receiver</span> <span
style='color:red'>[MQTT-3.5.2-3]</span>. The User Property is allowed to appear
multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901139"></a><a name="_Toc514848012"></a><a
name="_Toc511988616"></a><a name="_Toc473620146"></a><a name="_Toc471483645"></a><a
name="_Toc471282805"></a><a name="_Toc464635305"></a><a name="_Toc464548010"></a><a
name="_Toc462729143"></a><a name="_Toc442180864"></a><a name="_Toc385349787"></a><a
name="_Toc385349288"></a><a name="_Toc384800424">3.5.3 PUBREC Payload</a></h3>

<p class=MsoNormal>The PUBREC packet has no Payload.</p>

<h3><a name="_Toc3901140"></a><a name="_Toc514848013"></a><a
name="_Toc511988617"></a><a name="_Toc473620147"></a><a name="_Toc471483646"></a><a
name="_Toc471282806"></a><a name="_Toc464635306"></a><a name="_Toc464548011"></a><a
name="_Toc462729144"></a><a name="_Toc442180865"></a><a name="_Toc385349788"></a><a
name="_Toc385349289"></a><a name="_Toc384800425">3.5.4 PUBREC Actions</a></h3>

<p class=MsoNormal>This is described in<a href="#_QoS_2:_Exactly"> section 4.3.3</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901141"></a><a name="_Toc514848014"></a><a
name="_Toc511988618"></a><a name="_Toc473620148"></a><a name="_Toc471483647"></a><a
name="_Toc471282807"></a><a name="_Toc464635307"></a><a name="_Toc464548012"></a><a
name="_Toc462729145"></a><a name="_Toc442180866"></a><a name="_Toc385349789"></a><a
name="_Toc385349290"></a><a name="_Toc384800426">3.6 PUBREL  Publish release
(QoS 2 delivery part 2)</a></h2>

<p class=MsoNormal>A PUBREL packet is the response to a PUBREC packet. It is
the third packet of the QoS 2 protocol exchange.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901142"></a><a name="_Toc514848015"></a><a
name="_Toc511988619"></a><a name="_Toc473620149">3.6.1 PUBREL Fixed Header</a></h3>

<p class=MsoCaption><a name="_Figure_3.16_"></a>Figure 3&#8209;14
 PUBREL packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=643
 style='width:6.7in;border-collapse:collapse;border:none'>
 <tr>
  <td width=107 valign=top style='width:80.35pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=67 valign=top style='width:50.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=107 valign=top style='width:80.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=268 colspan=4 valign=top style='width:201.05pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (6)</p>
  </td>
  <td width=268 colspan=4 valign=top style='width:201.0pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=107 valign=top style='width:80.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=67 valign=top style='width:50.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=107 valign=top style='width:80.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=536 colspan=8 valign=top style='width:402.05pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length </p>
  </td>
 </tr>
</table>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><span style='background:yellow'>Bits 3,2,1 and 0 of the
Fixed Header in the PUBREL packet are reserved and MUST be set to 0,0,1 and 0
respectively. The Server MUST treat any other value as malformed and close the
Network Connection</span> <span style='color:red'>[MQTT-3.6.1-1]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620150"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620151">This is the length of the Variable
Header, encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901143"></a><a name="_Toc514848016"></a><a
name="_Toc511988620"></a><a name="_Toc473620152">3.6.2 PUBREL Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the PUBREL Packet contains the
following fields in the order: the Packet Identifier from the PUBREC packet
that is being acknowledged, PUBREL Reason Code, and Properties. The rules for
encoding Properties are described in <a href="#_Properties">section 2.2.2.</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620153"></a><a name="_Figure_3.17_"></a>Figure
3&#8209;15  PUBREL packet Variable Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  MSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  LSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>PUBREL Reason Code</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Property Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901144"></a><a name="_Toc514848017"></a><a
name="_Toc511988621"></a><a name="_Toc473620154"></a><a name="_Toc471483650"></a><a
name="_Toc471282810"></a><a name="_Toc464635310"></a><a name="_Toc464548015"></a><a
name="_Toc462729148">3.6.2.1 PUBREL </a>Reason Code</h4>

<p class=MsoNormal>Byte 3 in the Variable Header is the PUBREL Reason Code. If
the Remaining Length is 2, the value of 0x00 (Success) is used.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620155"></a><a name="_Ref459708654">Table </a>3&#8209;6 - PUBREL Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=691
 style='width:7.2in;border-collapse:collapse;border:none'>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=55 valign=top style='width:41.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=402 valign=top style='width:301.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=55 valign=top style='width:41.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x00</span></p>
  </td>
  <td width=174 valign=top style='width:130.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Success</span></p>
  </td>
  <td width=402 valign=top style='width:301.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Message released.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>146</span></p>
  </td>
  <td width=55 valign=top style='width:41.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x92</p>
  </td>
  <td width=174 valign=top style='width:130.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier not found</p>
  </td>
  <td width=402 valign=top style='width:301.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Packet Identifier is not known. This is not an error
  during recovery, but at other times indicates a mismatch between the Session
  State on the Client and Server. </p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client or Server sending
the PUBREL packet MUST use one of the PUBREL Reason Code values</span> <span
style='color:red'>[MQTT-3.6.2-1]</span>. The Reason Code and Property Length
can be omitted if the Reason Code is 0x00 (Success) and there are no
Properties. In this case the PUBREL has a Remaining Length of 2.</p>

<p class=MsoNormal><a name="_Toc473620156"></a><a name="_Toc471483651"></a><a
name="_Toc471282811">&nbsp;</a></p>

<h4><a name="_Toc3901145"></a><a name="_Toc514848018"></a><a
name="_Toc511988622">3.6.2.2 PUBREL Properties</a></h4>

<h5><a name="_Toc3901146"></a><a name="_Toc514848019"></a><a
name="_Toc511988623">3.6.2.2.1 Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the PUBREL packet Variable
Header encoded as a Variable Byte Integer. If the Remaining Length is less than
4 there is no Property Length and the value of 0 is used.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901147"></a><a name="_Toc514848020"></a><a
name="_Toc511988624"></a><a name="_Toc473620157"></a><a name="_Toc471483652"></a><a
name="_Toc471282812"></a><a name="_Toc464635312"></a><a name="_Toc464548017">3.6.2.2.2
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte</b>, Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is human readable, designed
for diagnostics and SHOULD NOT be parsed by the receiver. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The sender uses this value to give additional information to
the receiver. <span style='background:yellow'>The sender MUST NOT send this
Property if it would increase the size of the PUBREL packet beyond the Maximum
Packet Size specified by the receiver</span> <span style='color:red'>[MQTT-3.6.2-2]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901148"></a><a name="_Toc514848021"></a><a
name="_Toc511988625"></a><a name="_Toc473620158"></a><a name="_Toc471483653">3.6.2.2.3
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property can be used to
provide additional diagnostic or other information for the PUBREL. <span
style='background:yellow'>The sender MUST NOT send this property if it would
increase the size of the PUBREL packet beyond the Maximum Packet Size specified
by the receiver</span> <span style='color:red'>[MQTT-3.6.2-3]</span>. The User
Property is allowed to appear multiple times to represent multiple name, value
pairs. The same name is allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901149"></a><a name="_Toc514848022"></a><a
name="_Toc511988626"></a><a name="_Toc473620159"></a><a name="_Toc471483654"></a><a
name="_Toc471282813"></a><a name="_Toc464635313"></a><a name="_Toc464548018"></a><a
name="_Toc462729149"></a><a name="_Toc442180869"></a><a name="_Toc385349792"></a><a
name="_Toc385349295"></a><a name="_Toc384800429">3.6.3 PUBREL Payload</a></h3>

<p class=MsoNormal>The PUBREL packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901150"></a><a name="_Toc514848023"></a><a
name="_Toc511988627"></a><a name="_Toc473620160"></a><a name="_Toc471483655"></a><a
name="_Toc471282814"></a><a name="_Toc464635314"></a><a name="_Toc464548019"></a><a
name="_Toc462729150"></a><a name="_Toc442180870"></a><a name="_Toc385349793"></a><a
name="_Toc385349296"></a><a name="_Toc384800430">3.6.4 PUBREL Actions</a></h3>

<p class=MsoNormal>This is described in <a href="#_QoS_2:_Exactly">section 4.3.3</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc473620161"></a><a name="_Toc471483656"></a><a
name="_Toc471282815"></a><a name="_Toc464635315"></a><a name="_Toc464548020"></a><a
name="_Toc462729151"></a><a name="_Toc442180871"></a><a name="_Toc385349794"></a><a
name="_Toc385349297"></a><a name="_Toc384800431"></a><a name="_Toc3901151"></a><a
name="_Toc514848024"></a><a name="_Toc511988628">3.7 PUBCOMP  Publish complete
(QoS 2 delivery part 3)</a></h2>

<p class=MsoNormal>The PUBCOMP packet is the response to a PUBREL packet. It is
the fourth and final packet of the QoS 2 protocol exchange.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901152"></a><a name="_Toc514848025"></a><a
name="_Toc511988629"></a><a name="_Toc473620162">3.7.1 PUBCOMP Fixed Header</a></h3>

<p class=MsoCaption><a name="_Figure_3.18_"></a>Figure 3&#8209;16
 PUBCOMP packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control packet
  type (7)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=542 colspan=8 valign=top style='width:5.65in;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620163"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620164">This is the length of the Variable
Header, encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901153"></a><a name="_Toc514848026"></a><a
name="_Toc511988630"></a><a name="_Toc473620165">3.7.2 PUBCOMP Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the PUBCOMP Packet contains the
following fields in the order: Packet Identifier from the PUBREL packet that is
being acknowledged, PUBCOMP Reason Code, and Properties. The rules for encoding
Properties are described in <a href="#_Properties">section 2.2.2</a>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620166"></a><a name="_Figure_3.19_"></a>Figure
3&#8209;17 - PUBCOMP packet Variable Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  MSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  LSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>PUBCOMP Reason Code</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Property Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471483659"></a><a name="_Toc471282818"></a><a
name="_Toc464635318"></a><a name="_Toc464548023"></a><a name="_Toc462729154">&nbsp;</a></p>

<h4><a name="_Toc3901154"></a><a name="_Toc514848027"></a><a
name="_Toc511988631"></a><a name="_Toc473620167">3.7.2.1 PUBCOMP Reason Code</a></h4>

<p class=MsoNormal>Byte 3 in the Variable Header is the PUBCOMP Reason Code. If
the Remaining Length is 2, then the value 0x00 (Success) is used.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620168"></a><a name="_Ref459303322">Table </a>3&#8209;7
 PUBCOMP Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=679
 style='width:509.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=55 valign=top style='width:41.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=390 valign=top style='width:292.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=55 valign=top style='width:41.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x00</span></p>
  </td>
  <td width=174 valign=top style='width:130.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Success</span></p>
  </td>
  <td width=390 valign=top style='width:292.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier released. Publication of QoS 2 message
  is complete.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>146</span></p>
  </td>
  <td width=55 valign=top style='width:41.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x92</p>
  </td>
  <td width=174 valign=top style='width:130.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier not found</p>
  </td>
  <td width=390 valign=top style='width:292.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Packet Identifier is not known. This is not an error
  during recovery, but at other times indicates a mismatch between the Session
  State on the Client and Server. </p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client or Server sending
the PUBCOMP packet MUST use one of the PUBCOMP Reason Code values</span> <span
style='color:red'>[MQTT-3.7.2-1]</span>. The Reason Code and Property Length
can be omitted if the Reason Code is 0x00 (Success) and there are no
Properties. In this case the PUBCOMP has a Remaining Length of 2.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901155"></a><a name="_Toc514848028"></a><a
name="_Toc511988632">3.7.2.2 PUBCOMP Properties</a></h4>

<h5><a name="_Toc3901156"></a><a name="_Toc514848029"></a><a
name="_Toc511988633"></a><a name="_Toc473620169"></a><a name="_Toc471483660"></a><a
name="_Toc471282819">3.7.2.2.1 Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the PUBCOMP packet Variable
Header encoded as a Variable Byte Integer. If the Remaining Length is less than
4 there is no Property Length and the value of 0 is used.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901157"></a><a name="_Toc514848030"></a><a
name="_Toc511988634"></a><a name="_Toc473620170"></a><a name="_Toc471483661"></a><a
name="_Toc471282820"></a><a name="_Toc464635320"></a><a name="_Toc464548025">3.7.2.2.2
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte</b>, Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is a human readable string
designed for diagnostics and SHOULD NOT be parsed by the receiver. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The sender uses this value to give additional information to
the receiver. <span style='background:yellow'>The sender MUST NOT send this
Property if it would increase the size of the PUBCOMP packet beyond the Maximum
Packet Size specified by the receiver</span> <span style='color:red'>[MQTT-3.7.2-2]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901158"></a><a name="_Toc514848031"></a><a
name="_Toc511988635"></a><a name="_Toc473620171"></a><a name="_Toc471483662">3.7.2.2.3
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property can be used to
provide additional diagnostic or other information. <span style='background:
yellow'>The sender MUST NOT send this property if it would increase the size of
the PUBCOMP packet beyond the Maximum Packet Size specified by the receiver</span>
<span style='color:red'>[MQTT-3.7.2-3]</span>. The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901159"></a><a name="_Toc514848032"></a><a
name="_Toc511988636"></a><a name="_Toc473620172"></a><a name="_Toc471483663">3.7.3
PUBCOMP Payload</a></h3>

<p class=MsoNormal>The PUBCOMP packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901160"></a><a name="_Toc514848033"></a><a
name="_Toc511988637"></a><a name="_Toc473620173"></a><a name="_Toc471483664"></a><a
name="_Toc471282822"></a><a name="_Toc464635322"></a><a name="_Toc464548027"></a><a
name="_Toc462729156"></a><a name="_Toc442180875"></a><a name="_Toc385349798"></a><a
name="_Toc385349303"></a><a name="_Toc384800435">3.7.4 PUBCOMP Actions</a></h3>

<p class=MsoNormal>This is described in <a href="#_QoS_2:_Exactly">section 4.3.3</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901161"></a><a name="_Toc514848034"></a><a
name="_Toc511988638"></a><a name="_Toc473620174"></a><a name="_Toc471483665"></a><a
name="_Toc471282823"></a><a name="_Toc464635323"></a><a name="_Toc464548028"></a><a
name="_Toc462729157"></a><a name="_Toc442180876"></a><a name="_Toc385349799"></a><a
name="_Toc385349304"></a><a name="_Toc384800436">3.8 SUBSCRIBE - Subscribe </a>request</h2>

<p class=MsoNormal>The SUBSCRIBE packet is sent from the Client to the Server
to create one or more Subscriptions. Each Subscription registers a Clients
interest in one or more Topics. The Server sends PUBLISH packets to the Client
to forward Application Messages that were published to Topics that match these
Subscriptions. The SUBSCRIBE packet also specifies (for each Subscription) the
maximum QoS with which the Server can send Application Messages to the Client.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901162"></a><a name="_Toc514848035"></a><a
name="_Toc511988639"></a><a name="_Toc473620175">3.8.1 SUBSCRIBE Fixed Header</a></h3>

<p class=MsoCaption><a name="_Figure_3.20_"></a>Figure 3&#8209;18
SUBSCRIBE packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=266 colspan=4 valign=top style='width:199.5pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (8)</p>
  </td>
  <td width=266 colspan=4 valign=top style='width:199.5pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:9.0pt'>Reserved</span></p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=66 valign=top style='width:49.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:49.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=106 valign=top style='width:79.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=532 colspan=8 valign=top style='width:399.0pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Bits 3,2,1 and 0 of the
Fixed Header of the SUBSCRIBE packet are reserved and MUST be set to 0,0,1 and
0 respectively. The Server MUST treat any other value as malformed and close
the Network Connection</span> <span style='color:red'>[MQTT-3.8.1-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620176"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620177">This is the length of Variable
Header plus the length of the Payload, encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901163"></a><a name="_Toc514848036"></a><a
name="_Toc511988640"></a><a name="_Toc473620178">3.8.2 SUBSCRIBE Variable
Header</a></h3>

<p class=MsoNormal>The Variable Header of the SUBSCRIBE Packet contains the
following fields in the order: Packet Identifier, and Properties. <a
href="#_Toc358219870">Section 2.2.1</a> provides more information about Packet
Identifiers. The rules for encoding Properties are described in <a
href="#_Properties">section 2.2.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620179"></a><a
name="_Toc464635326"></a><a name="_Toc464548031"></a><a name="_Toc462729160"></a><a
name="_Toc385349308"><b>Non-normative example</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Figure 3-19 shows an example of a
SUBSCRIBE variable header with a Packet Identifier of 10 and no properties.</p>

<p class=MsoNormal style='margin-left:.5in'><b>&nbsp;</b></p>

<p class=MsoNormal><a name="_Toc473620180"></a><a name="_Figure_3.21_-"></a>Figure
3&#8209;19  SUBSCRIBE Variable Header example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=80 valign=top style='width:59.8pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=239 valign=top style='width:179.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier</p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1 </p>
  </td>
  <td width=239 valign=top style='width:179.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier MSB (0)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=239 valign=top style='width:179.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet Identifier LSB (10)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=239 valign=top style='width:179.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Property Length (0)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901164"></a><a name="_Toc514848037"></a><a
name="_Toc511988641">3.8.2.1 SUBSCRIBE Properties</a></h4>

<h5><a name="_Toc464635327"></a><a name="_Toc464548032"></a><a
name="_Toc462729161"></a><a name="_Toc442180879"></a><a name="_Toc385349802"></a><a
name="_Toc385349310"></a><a name="_Toc384800439"></a><a name="_Toc3901165"></a><a
name="_Toc514848038"></a><a name="_Toc511988642"></a><a name="_Toc473620181"></a><a
name="_Toc471483668"></a><a name="_Toc471282826">3.8.2.1.1 Property Length</a></h5>

<p class=MsoNormal>The length of Properties in the SUBSCRIBE packet Variable
Header encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901166"></a><a name="_Toc514848039"></a><a
name="_Toc511988643"></a><a name="_Toc473620182"></a><a name="_Toc471483669"></a><a
name="_Toc471282827">3.8.2.1.2 Subscription Identifier</a></h5>

<p class=MsoNormal><b>11 (0x0B) Byte,</b> Identifier of the Subscription
Identifier. </p>

<p class=MsoNormal>Followed by a Variable Byte Integer representing the
identifier of the subscription. The Subscription Identifier can have the value
of 1 to 268,435,455. It is a Protocol Error if the Subscription Identifier has
a value of 0. It is a Protocol Error to include the Subscription Identifier
more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Subscription Identifier is associated with any
subscription created or modified as the result of this SUBSCRIBE packet. If
there is a Subscription Identifier, it is stored with the subscription. If this
property is not specified, then the absence of a Subscription Identifier is
stored with the subscription.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_Subscription_Options">section 3.8.3.1</a>
for more information about the handling of Subscription Identifiers.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901167"></a><a name="_Toc514848040"></a><a
name="_Toc511988644"></a><a name="_Toc493772073">3.8.2.1.3 User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte</b>, Identifier of the User Property. </p>

<p class=MsoNormal>Followed by a UTF-8 String Pair. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The User Property is allowed to appear multiple times to
represent multiple name, value pairs. The same name is allowed to appear more
than once. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>User Properties on the SUBSCRIBE
packet can be used to send subscription related properties from the Client to
the Server. The meaning of these properties is not defined by this specification.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901168"></a><a name="_Toc514848041"></a><a
name="_Toc511988645"></a><a name="_Toc473620183"></a><a name="_Toc471483670"></a><a
name="_Toc471282828">3.8.3 SUBSCRIBE Payload</a></h3>

<p class=MsoNormal>The Payload of a SUBSCRIBE packet contains a list of Topic
Filters indicating the Topics to which the Client wants to subscribe. <span
style='background:yellow'>The Topic Filters MUST be a UTF-8 Encoded String</span>
<span style='color:red'>[MQTT-3.8.3-1]</span>. Each Topic Filter is followed by
a Subscription Options byte. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Payload MUST contain at least
one Topic Filter and Subscription Options pair</span> <span style='color:red'>[MQTT-3.8.3-2]</span>.
A SUBSCRIBE packet with no Payload is a Protocol Error. Refer to <a
href="#S4_13_Errors">section 4.13</a> for information about handling errors. </p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901169"></a><a name="_Toc514848042"></a><a
name="_Toc511988646"></a><a name="_Toc473620184"></a><a name="_Toc471483671"></a><a
name="_Toc471282829"></a><a name="_Ref466545476"></a><a name="_Toc464635328"></a><a
name="_Toc464548033"></a><a name="_Subscription_Options"></a>3.8.3.1 Subscription
Options</h4>

<p class=MsoNormal>Bits 0 and 1 of the Subscription Options represent Maximum
QoS field. This gives the maximum QoS level at which the Server can send
Application Messages to the Client. It is a Protocol Error if the Maximum QoS field
has the value 3.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='color:black;background:yellow'>Bit 2 of the
Subscription Options represents the No Local option. If the value is 1,
Application Messages MUST NOT be forwarded to a connection with a ClientID
equal to the ClientID of the publishing connection</span><span
style='color:black'> </span><span style='color:red'>[MQTT-3.8.3-3]</span><span
style='color:black'>. <span style='background:yellow'>It is a Protocol Error to
set the No Local bit to 1 on a Shared Subscription </span></span><span
style='color:red'>[MQTT-3.8.3-4]</span><span style='color:black'>.</span></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal>Bit 3 of the Subscription Options represents the <span
style='color:black'>Retain As Published option. If 1, Application Messages
forwarded using this subscription keep the RETAIN flag they were published
with. If 0, Application Messages forwarded using this subscription have the
RETAIN flag set to 0. Retained messages sent when the subscription is
established have the RETAIN flag set to 1.</span></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='color:black'>Bits 4 and 5 of the Subscription
Options represent the Retain Handling option. This option specifies whether
retained messages are sent when the subscription is established. This does not
affect the sending of retained messages at any point after the subscribe. If
there are no retained messages matching the Topic Filter, all of these values
act the same. The values are:</span></p>

<p class=MsoNormal><span style='color:black'>0 = Send retained messages at the
time of the subscribe</span></p>

<p class=MsoNormal><span style='color:black'>1 = Send retained messages at
subscribe only if the subscription does not currently exist</span></p>

<p class=MsoNormal><span style='color:black'>2 = Do not send retained messages
at the time of the subscribe</span></p>

<p class=MsoNormal><span style='color:black'>It is a Protocol Error to send a
Retain Handling value of 3.</span></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal>Bits 6 and 7 of the Subscription Options byte are reserved
for future use. <span style='background:yellow'>The Server MUST treat a
SUBSCRIBE packet as malformed if any of Reserved bits in the Payload are
non-zero</span> <span style='color:red'>[MQTT-3.8.3-5]</span><span
style='color:black'>.</span></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620185"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>The No
Local and Retain As Published subscription options can be used to implement
bridging where the Client is sending the message on to another Server.</span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>Not
sending retained messages for an existing subscription is useful when a
reconnect is done and the Client is not certain whether the subscriptions were
completed in the previous connection to the Session.</span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>Not
sending stored retained messages because of a new subscription is useful where
a Client wishes to receive change notifications and does not need to know the
initial state.</span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>For a
Server that indicates it does not support retained messages, all valid values
of Retain As Published and Retain Handling give the same result which is to not
send any retained messages at subscribe and to set the RETAIN flag to 0 for all
messages.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620186"></a><a name="_Figure_3.22_"></a>Figure
3&#8209;20 SUBSCRIBE packet Payload format</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=127 valign=top style='width:95.3pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=64 valign=top style='width:47.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=64 valign=top style='width:48.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=64 valign=top style='width:48.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=64 valign=top style='width:47.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=9 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter</p>
  </td>
 </tr>
 <tr>
  <td width=127 valign=top style='width:95.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.5pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length MSB</p>
  </td>
 </tr>
 <tr>
  <td width=127 valign=top style='width:95.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.5pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length LSB</p>
  </td>
 </tr>
 <tr>
  <td width=127 valign=top style='width:95.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>bytes 3..N</p>
  </td>
  <td width=511 colspan=8 valign=top style='width:383.5pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Topic Filter</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=9 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Options</p>
  </td>
 </tr>
 <tr>
  <td width=127 valign=top style='width:95.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=128 colspan=2 valign=top style='width:95.8pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
  <td width=128 colspan=2 valign=top style='width:95.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Retain Handling</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>RAP</p>
  </td>
  <td width=64 valign=top style='width:48.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>NL</p>
  </td>
  <td width=128 colspan=2 valign=top style='width:95.85pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>QoS</p>
  </td>
 </tr>
 <tr>
  <td width=127 valign=top style='width:95.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte N+1</p>
  </td>
  <td width=64 valign=top style='width:47.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:47.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=64 valign=top style='width:48.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=64 valign=top style='width:48.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=64 valign=top style='width:47.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
  <td width=64 valign=top style='width:47.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>X</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='color:black'>RAP means Retain as Published.</span></p>

<p class=MsoNormal><span style='color:black'>NL means No Local.</span></p>

<p class=MsoNormal><span style='color:red'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:28.35pt'><a name="_Toc473620187"></a><a
name="_Toc471483672"></a><a name="_Toc471282830"></a><a name="_Toc464635329"></a><a
name="_Toc464548034"></a><a name="_Toc462729162"></a><a name="_Toc385349312"><b>Non-normative
example</b></a></p>

<p class=MsoNormal style='margin-left:28.35pt'>Figure 3.21 show the SUBSCRIBE
Payload example with two Topic Filters. The first is a/b with QoS 1, and the
second is c/d with QoS 2. </p>

<p class=MsoNormal><a href="#_Table_3.4_-"></a><a name="_Table_3.4_-"></a></p>

<p class=MsoNormal><a name="_Figure_3.23_-"></a>Figure 3&#8209;21
- Payload byte format non-normative example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length MSB (0)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length LSB (3)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>a (0x61)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>/ (0x2F)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>b (0x62)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Options</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Subscription Options
  (1)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length MSB (0)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 8</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length LSB (3)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 9</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>c (0x63)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 10</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>/ (0x2F)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 11</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>d (0x64)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Options</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 12</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Subscription
  Options (2)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901170"></a><a name="_Toc514848043"></a><a
name="_Toc511988647"></a><a name="_Ref479930214"></a><a name="_Toc473620189"></a><a
name="_Toc471483673"></a><a name="_Toc471282831"></a><a name="_Toc464635330"></a><a
name="_Toc464548035"></a><a name="_Toc462729163"></a><a name="_Toc442180880"></a><a
name="_Toc385349803"></a><a name="_Toc385349315"></a><a name="_Toc384800440">3.8.4
SUBSCRIBE Actions</a></h3>

<p class=MsoNormal><span style='background:yellow'>When the Server receives a
SUBSCRIBE packet from a Client, the Server MUST respond with a SUBACK packet</span>
<span style='color:red'>[MQTT-3.8.4-1]</span>. <span style='background:yellow'>The
SUBACK packet MUST have the same Packet Identifier as the SUBSCRIBE packet that
it is acknowledging</span> <span style='color:red'>[MQTT-3.8.4-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server is permitted to start sending PUBLISH packets
matching the Subscription before the Server sends the SUBACK packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server receives a
SUBSCRIBE packet containing a Topic Filter that is identical to a Non&#8209;shared
Subscriptions Topic Filter for the current Session, then it MUST replace that
existing Subscription with a new Subscription</span> <span style='color:red'>[MQTT-3.8.4-3]</span>.
The Topic Filter in the new Subscription will be identical to that in the
previous Subscription, although its Subscription Options could be different. <span
style='background:yellow'>If the Retain Handling option is 0, any existing
retained messages matching the Topic Filter MUST be re-sent, but Applicaton
Messages MUST NOT be lost due to replacing the Subscription</span> <span
style='color:red'>[MQTT-3.8.4-4]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Server receives a Non&#8209;shared Topic Filter that is
not identical to any Topic Filter for the current Session, a new Non-shared
Subscription is created. If the Retain Handling option is not 2, all matching
retained messages are sent to the Client. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Server receives a Topic Filter that is identical to the
Topic Filter for a Shared Subscription that already exists on the Server, the
Session is added as a subscriber to that Shared Subscription. No retained
messages are sent. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Server receives a Shared Subscription Topic Filter that
is not identical to any existing Shared Subscriptions Topic Filter, a new
Shared Subscription is created. The Session is added as a subscriber to that
Shared Subscription. No retained messages are sent. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620190">Refer to </a><a
href="#_Shared_Subscriptions">section 4.8</a> for more details on Shared
Subscriptions.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server receives a
SUBSCRIBE packet that contains multiple Topic Filters it MUST handle that
packet as if it had received a sequence of multiple SUBSCRIBE packets, except
that it combines their responses into a single SUBACK response</span> <span
style='color:red'>[MQTT-3.8.4-5]</span>.</p>

<p class=MsoNormal><span class=apple-converted-space><span style='font-size:
7.0pt;color:black;background:white'>&nbsp;</span></span></p>

<p class=MsoNormal><span style='background:yellow'>The SUBACK packet sent by
the Server to the Client MUST contain a Reason Code for each Topic
Filter/Subscription Option pair</span> <span style='color:red'>[MQTT-3.8.4-6]</span>.
<span style='background:yellow'>This Reason Code MUST either show the maximum
QoS that was granted for that Subscription or indicate that the subscription
failed</span> <span style='color:red'>[MQTT-3.8.4-7]</span><span
style='color:black'>.</span> The Server might grant a lower Maximum QoS than
the subscriber requested. <span style='background:yellow'>The QoS of Application
Messages sent in response to a Subscription MUST be the minimum of the QoS of
the originally published message and the Maximum QoS granted by the Server</span>
<span style='color:red'>[MQTT-3.8.4-8]</span>. The server is permitted to send
duplicate copies of a message to a subscriber in the case where the original message
was published with QoS 1 and the maximum QoS granted was QoS 0.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If a subscribing Client has been
granted maximum QoS 1 for a particular Topic Filter, then a QoS 0 Application
Message matching the filter is delivered to the Client at QoS 0. This means
that at most one copy of the message is received by the Client. On the other
hand, a QoS 2 Message published to the same topic is downgraded by the Server
to QoS 1 for delivery to the Client, so that Client might receive duplicate
copies of the Message.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If the subscribing Client has been
granted maximum QoS 0, then an Application Message originally published as QoS
2 might get lost on the hop to the Client, but the Server should never send a
duplicate of that Message. A QoS 1 Message published to the same topic might
either get lost or duplicated on its transmission to that Client.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620191"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Subscribing to a Topic Filter at
QoS 2 is equivalent to saying &quot;I would like to receive Messages matching this
filter at the QoS with which they were published&quot;. This means a publisher
is responsible for determining the maximum QoS a Message can be delivered at,
but a subscriber is able to require that the Server downgrades the QoS to one
more suitable for its usage.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal>The Subscription Identifiers are part of the Session State
in the Server and are returned to the Client receiving a matching PUBLISH
packet. They are removed from the Servers Session State when the Server
receives an UNSUBSCRIBE packet, when the Server receives a SUBSCRIBE packet
from the Client for the same Topic Filter but with a different Subscription Identifier
or with no Subscription Identifier, or when the Server sends Session Present 0
in a CONNACK packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Subscription Identifiers do not form part of the Clients
Session State in the Client. In a useful implementation, a Client will
associate the Subscription Identifiers with other Client side state, this state
is typically removed when the Client unsubscribes, when the Client subscribes
for the same Topic Filter with a different identifier or no identifier, or when
the Client receives Session Present 0 in a CONNACK packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server need not use the same set of Subscription Identifiers
in the retransmitted PUBLISH packet. The Client can remake a Subscription by
sending a SUBSCRIBE packet containing a Topic Filter that is identical to the
Topic Filter of an existing Subscription in the current Session. If the Client
remade a subscription after the initial transmission of a PUBLISH packet and used
a different Subscription Identifier, then the Server is allowed to use the
identifiers from the first transmission in any retransmission. Alternatively,
the Server is allowed to use the new identifiers during a retransmission. The Server
is not allowed to revert to the old identifier after it has sent a PUBLISH
packet containing the new one.</p>

<p class=MsoNormal style='margin-left:.5in'><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620192"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Usage scenarios, for illustration of
Subscription Identifiers.</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The Client implementation indicates via its programming interface
that a publication matched more than one subscription. The Client implementation
generates a new identifier each time a subscription is made. If the returned
publication carries more than one Subscription Identifier, then the publication
matched more than one subscription.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The Client implementation allows the subscriber to direct
messages to a callback associated with the subscription. The Client implementation
generates an identifier which uniquely maps the identifier to the callback.
When a publication is received it uses the Subscription Identifier to determine
which callback is driven.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The Client implementation returns the topic string used to make the
subscription to the application when it delivers the published message. To
achieve this the Client generates an identifier which uniquely identifies the Topic
Filter. When a publication is received the Client implementation uses the
identifiers to look up the original Topic Filters and return them to the Client
application.<br>
<br>
</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A gateway forwards publications received from a Server to Clients
that have made subscriptions to the gateway. The gateway implementation maintains
a map of each unique Topic Filter it receives to the set of ClientID, Subscription
Identifier pairs that it also received. It generates a unique identifier for each
Topic Filter that it forwards to the Server. When a publication is received,
the gateway uses the Subscription Identifiers it received from the Server to
look up the Client Identifier, Subscription Identifier pairs associated with
them. It adds these to the PUBLISH packets it sends to the Clients. If the
upstream Server sent multiple PUBLISH packets because the message matched
multiple subscriptions, then this behavior is mirrored to the Clients.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h2><a name="_Toc3901171"></a><a name="_Toc514848044"></a><a
name="_Toc511988648"></a><a name="_Toc473620193"></a><a name="_Toc471483674"></a><a
name="_Toc471282832"></a><a name="_Toc464635331"></a><a name="_Toc464548036"></a><a
name="_Toc462729164"></a><a name="_Toc442180881"></a><a name="_Toc385349804"></a><a
name="_Toc385349316"></a><a name="_Toc384800441">3.9 SUBACK  Subscribe
acknowledgement</a></h2>

<p class=MsoNormal>A SUBACK packet is sent by the Server to the Client to
confirm receipt and processing of a SUBSCRIBE packet.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A SUBACK packet contains a list of Reason Codes, that
specify the maximum QoS level that was granted or the error which was found for
each Subscription that was requested by the SUBSCRIBE.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901172"></a><a name="_Toc514848045"></a><a
name="_Toc511988649"></a><a name="_Toc473620194">3.9.1 SUBACK Fixed Header</a></h3>

<p class=MsoCaption><a name="_Figure_3.24_"></a>Figure 3&#8209;22
- SUBACK Packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=268 colspan=4 valign=top style='width:200.7pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (9)</p>
  </td>
  <td width=268 colspan=4 valign=top style='width:200.7pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:50.2pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=535 colspan=8 valign=top style='width:401.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620195"><b>Remaining Length field</b></a></p>

<p class=MsoNormal>This is the length of Variable Header plus the length of the
Payload, encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901173"></a><a name="_Toc514848046"></a><a
name="_Toc511988650"></a><a name="_Toc473620196">3.9.2 SUBACK Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the SUBACK Packet contains the following
fields in the order: the Packet Identifier from the SUBSCRIBE Packet that is
being acknowledged, and Properties. </p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901174"></a><a name="_Toc514848047"></a><a
name="_Toc511988651">3.9.2.1 SUBACK Properties</a></h4>

<h5><a name="_Toc3901175"></a><a name="_Toc514848048"></a><a
name="_Toc511988652">3.9.2.1.1 Property Length</a></h5>

<p class=MsoNormal>The length of Properties in the SUBACK packet Variable
Header encoded as a Variable Byte Integer</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901176"></a><a name="_Toc514848049"></a><a
name="_Toc511988653"></a><a name="_Toc473620198"></a><a name="_Toc471483678"></a><a
name="_Toc471282836"></a><a name="_Toc464635335"></a><a name="_Toc464548040">3.9.2.1.2
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte,</b> Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is a human readable string
designed for diagnostics and SHOULD NOT be parsed by the Client. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server uses this value to give additional information to
the Client. <span style='background:yellow'>The Server MUST NOT send this
Property if it would increase the size of the SUBACK packet beyond the Maximum
Packet Size specified by the Client</span> <span style='color:red'>[MQTT-3.9.2-1]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901177"></a><a name="_Toc514848050"></a><a
name="_Toc511988654"></a><a name="_Toc473620199"></a><a name="_Toc471483679">3.9.2.1.3
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property can be used to
provide additional diagnostic or other information. <span style='background:
yellow'>The Server MUST NOT send this property if it would increase the size of
the SUBACK packet beyond the Maximum Packet Size specified by Client</span> <span
style='color:red'>[MQTT-3.9.2-2]</span>. The User Property is allowed to appear
multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal><a href="#_Figure_3.25_-"></a></p>

<p class=MsoNormal><a name="_Toc473620200"></a><a name="_Figure_3.25_-"></a><a
name="_Figure_3.25_"></a>Figure 3&#8209;23 SUBACK packet Variable Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  MSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  LSB</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471282837"></a><a name="_Toc464635336"></a><a
name="_Toc464548041"></a><a name="_Toc462729167"></a><a name="_Toc442180884"></a><a
name="_Toc385349807"></a><a name="_Toc385349321"></a><a name="_Toc384800444">&nbsp;</a></p>

<h3><a name="_Toc3901178"></a><a name="_Toc514848051"></a><a
name="_Toc511988655"></a><a name="_Toc473620201"></a><a name="_Toc471483680">3.9.3
SUBACK Payload</a></h3>

<p class=MsoNormal>The Payload contains a list of Reason Codes. Each Reason
Code corresponds to a Topic Filter in the SUBSCRIBE packet being acknowledged. <span
style='background:yellow'>The order of Reason Codes in the SUBACK packet MUST
match the order of Topic Filters in the SUBSCRIBE packet</span> <span
style='color:red'>[MQTT-3.9.3-1]</span>.</p>

<p class=MsoCaption><a name="_Figure_3.26_-"></a><a name="_Figure_3.26_"></a>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620202"></a><a name="_Ref459632784">Table </a>3&#8209;8 - Subscribe Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=691
 style='width:7.2in;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x00</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Granted QoS 0</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The subscription is accepted and the maximum QoS sent will
  be QoS 0. This might be a lower QoS than was requested.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x01</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Granted QoS 1</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The subscription is accepted and the maximum QoS sent will
  be QoS 1. This might be a lower QoS than was requested.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x02</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Granted QoS 2</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The subscription is accepted and any received QoS will be
  sent to this subscription.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>128</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x80</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Unspecified error</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The subscription is not accepted and the Server either
  does not wish to reveal the reason or none of the other Reason Codes apply.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>131</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x83</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Implementation specific error</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The SUBSCRIBE is valid but the Server does not accept it. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>135</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x87</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Not authorized</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client is not authorized to make this subscription.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>143</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x8F</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Topic Filter invalid</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Topic Filter is correctly formed but is not allowed
  for this Client.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>145</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x91</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Packet Identifier in use</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The specified Packet Identifier is already in use.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>151</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x97</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Quota exceeded</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>An implementation or administrative imposed limit has been
  exceeded.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>158</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x9E</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Shared Subscriptions not
  supported</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support Shared Subscriptions for this Client.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>161</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0xA1</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Subscription Identifiers not
  supported</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support Subscription Identifiers; the
  subscription is not accepted.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=50 valign=top style='width:37.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>162</p>
  </td>
  <td width=45 valign=top style='width:33.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0xA2</span></p>
  </td>
  <td width=184 valign=top style='width:137.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Wildcard Subscriptions not
  supported</span></p>
  </td>
  <td width=413 valign=top style='width:4.3in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support Wildcard Subscriptions; the
  subscription is not accepted.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal> </p>

<p class=MsoNormal><a name="_Toc473620203"><span style='background:yellow'>The
Server sending a SUBACK packet MUST use one of the Subscribe Reason Codes</span></a><span
style='background:yellow'> for each Topic Filter received</span> <span
style='color:red'>[MQTT-3.9.3-2]</span><span style='color:black'>.</span></p>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>There is always one Reason Code for
each Topic Filter in the corresponding SUBSCRIBE packet. If the Reason Code is
not specific to a Topic Filters (such as 0x91 (Packet Identifier in use)) it is
set for each Topic Filter.</p>

<p class=MsoNormal><a name="_Table_3.5_-"></a><a name="_Figure_3.27_-"></a>&nbsp;</p>

<h2><a name="_Toc3901179"></a><a name="_Toc514848052"></a><a
name="_Toc511988656"></a><a name="_Toc473620206"></a><a name="_Toc471483682"></a><a
name="_Toc471282839"></a><a name="_Toc464635338"></a><a name="_Toc464548043"></a><a
name="_Toc462729169"></a><a name="_Toc442180885"></a><a name="_Toc385349808"></a><a
name="_Toc385349326"></a><a name="_Toc384800445">3.10 UNSUBSCRIBE  Unsubscribe
request</a></h2>

<p class=MsoNormal>An UNSUBSCRIBE packet is sent by the Client to the Server,
to unsubscribe from topics.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901180"></a><a name="_Toc514848053"></a><a
name="_Toc511988657"></a><a name="_Toc473620207">3.10.1 UNSUBSCRIBE Fixed
Header</a></h3>

<p class=MsoCaption><a name="_Toc385349328"></a><a name="_Figure_3.28_"></a>Figure
3.28  UNSUBSCRIBE packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=91 valign=top style='width:.95in;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:.95in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=270 colspan=4 valign=top style='width:202.5pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (10)</p>
  </td>
  <td width=277 colspan=4 valign=top style='width:207.9pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:9.0pt'>Reserved</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:.95in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=65 valign=top style='width:48.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:51.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:.95in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=547 colspan=8 valign=top style='width:5.7in;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:27.0pt;text-indent:-27.0pt'>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Bits 3,2,1 and 0 of the
Fixed Header of the UNSUBSCRIBE packet are reserved and MUST be set to 0,0,1
and 0 respectively. The Server MUST treat any other value as malformed and
close the Network Connection</span> <span style='color:red'>[MQTT-3.10.1-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620208"><b>Remaining Length field</b></a></p>

<p class=MsoNormal>This is the length of Variable Header (2 bytes) plus the
length of the Payload, encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901181"></a><a name="_Toc514848054"></a><a
name="_Toc511988658"></a><a name="_Toc473620209">3.10.2 UNSUBSCRIBE Variable
Header</a></h3>

<p class=MsoNormal>The Variable Header of the UNSUBSCRIBE Packet contains the
following fields in the order: Packet Identifier, and Properties. <a
href="#_Toc358219870">Section 2.2.1</a> provides more information about Packet
Identifiers. The rules for encoding Properties are described in <a
href="#_Properties">section 2.2.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901182"></a><a name="_Toc514848055"></a><a
name="_Toc511988659"></a><a name="_Toc493772088">3.10.2.1 UNSUBSCRIBE
Properties</a></h4>

<h5><a name="_Toc3901183"></a><a name="_Toc514848056"></a><a
name="_Toc511988660"></a><a name="_Toc493772089">3.10.2.1.1 Property Length</a></h5>

<p class=MsoNormal>The length of Properties in the UNSUBSCRIBE packet Variable
Header encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901184"></a><a name="_Toc514848057"></a><a
name="_Toc511988661"></a><a name="_Toc493772090">3.10.2.1.2 User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte</b>, Identifier of the User Property. </p>

<p class=MsoNormal>Followed by a UTF-8 String Pair. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The User Property is allowed to appear multiple times to
represent multiple name, value pairs. The same name is allowed to appear more
than once. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>User Properties on the UNSUBSCRIBE
packet can be used to send subscription related properties from the Client to
the Server. The meaning of these properties is not defined by this
specification.</p>

<p class=MsoNormal><a name="_Figure_3.29_"></a>&nbsp;</p>

<h3><a name="_Toc3901185"></a><a name="_Toc514848058"></a><a
name="_Toc511988662"></a><a name="_Toc473620210"></a><a name="_Toc471483685"></a><a
name="_Toc471282842"></a><a name="_Toc464635343"></a><a name="_Toc464548048"></a><a
name="_Toc462729172"></a><a name="_Toc442180888"></a><a name="_Toc385349811"></a><a
name="_Toc385349331"></a><a name="_Toc384800448">3.10.3 UNSUBSCRIBE Payload</a></h3>

<p class=MsoNormal>The Payload for the UNSUBSCRIBE packet contains the list of
Topic Filters that the Client wishes to unsubscribe from. <span
style='background:yellow'>The Topic Filters in an UNSUBSCRIBE packet MUST be
UTF-8 Encoded Strings</span> <span style='color:red'>[MQTT-3.10.3-1]</span> as
defined in <a href="#_UTF-8_Encoded_String">section 1.5.4</a>, packed
contiguously.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Payload of an
UNSUBSCRIBE packet MUST contain at least one Topic Filter</span> <span
style='color:red'>[MQTT-3.10.3-2]</span>. An UNSUBSCRIBE packet with no Payload
is a Protocol Error. Refer to <a href="#S4_13_Errors">section 4.13</a> for
information about handling errors. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:28.35pt'><a name="_Toc473620211"></a><a
name="_Toc464635344"></a><a name="_Toc464548049"></a><a name="_Toc462729173"></a><a
name="_Toc385349332"><b>Non-normative example</b></a></p>

<p class=MsoNormal style='margin-left:28.35pt'><span style='color:black'>Figure
3.30 shows the Payload for an UNSUBSCRIBE packet with two Topic Filters a/b
and c/d.</span><a href="#_Table3.6_-_Payload"></a></p>

<p class=MsoNormal><a name="_Toc385349334"></a><a name="_Table3.6_-_Payload"></a><a
name="_Figure_3.30_-"></a>&nbsp;</p>

<p class=MsoNormal>Figure 3.30 - Payload byte format non-normative example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length MSB (0)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length LSB (3)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>a (0x61)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>/ (0x2F)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>b (0x62)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=638 colspan=10 valign=top style='width:6.65in;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length MSB (0)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Length LSB (3)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 8</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>c (0x63)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 9</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>/ (0x2F)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=120 valign=top style='width:89.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 10</p>
  </td>
  <td width=199 valign=top style='width:149.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>d (0x64)</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=40 valign=top style='width:29.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471483686"></a><a name="_Toc471282843"></a><a
name="_Toc464635345"></a><a name="_Toc464548050"></a><a name="_Toc462729174"></a><a
name="_Toc442180889"></a><a name="_Toc385349812"></a><a name="_Toc385349335"></a><a
name="_Toc384800449">&nbsp;</a></p>

<h3><a name="_Toc3901186"></a><a name="_Toc514848059"></a><a
name="_Toc511988663"></a><a name="_Toc473620212">3.10.4 UNSUBSCRIBE Actions</a></h3>

<p class=MsoNormal><span style='background:yellow'>The Topic Filters (whether
they contain wildcards or not) supplied in an UNSUBSCRIBE packet MUST be
compared character-by-character with the current set of Topic Filters held by
the Server for the Client. If any filter matches exactly then its owning
Subscription MUST be deleted</span> <span style='color:red'>[MQTT-3.10.4-1]</span>,
otherwise no additional processing occurs.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>When a Server receives
UNSUBSCRIBE </span>:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>It MUST stop adding any
     new messages which match the Topic Filters, for delivery to the Client</span>
     <span style='color:red'>[MQTT-3.10.4-2]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>It MUST complete the
     delivery of any QoS 1 or QoS 2 messages which match the Topic Filters and
     it has started to send to the Client</span> <span style='color:red'>[MQTT-3.10.4-3]</span>.</li>
 <li class=MsoNormal>It MAY continue to deliver any existing messages buffered
     for delivery to the Client.</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Server MUST respond to
an UNSUBSCRIBE request by sending an UNSUBACK packet</span> <span
style='color:red'>[MQTT-3.10.4-4]</span>. <span style='background:yellow'>The
UNSUBACK packet MUST have the same Packet Identifier as the UNSUBSCRIBE packet.
Even where no Topic Subscriptions are deleted, the Server MUST respond with an
UNSUBACK</span> <span style='color:red'>[MQTT-3.10.4-5]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If a Server receives an
UNSUBSCRIBE packet that contains multiple Topic Filters, it MUST process that
packet as if it had received a sequence of multiple UNSUBSCRIBE packets, except
that it sends just one UNSUBACK response</span> <span style='color:red'>[MQTT-3.10.4-6]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If a Topic Filter represents a Shared Subscription, this
Session is detached from the Shared Subscription. If this Session was the only
Session that the Shared Subscription was associated with, the Shared
Subscription is deleted. Refer to <a href="#_Shared_Subscriptions">section
4.8.2</a> for a description of Shared Subscription handling.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc471483687"></a><a name="_Toc471282844"></a><a
name="_Toc464635346"></a><a name="_Toc464548051"></a><a name="_Toc462729175"></a><a
name="_Toc442180890"></a><a name="_Toc385349813"></a><a name="_Toc385349336"></a><a
name="_Toc384800450"></a><a name="_Toc3901187"></a><a name="_Toc514848060"></a><a
name="_Toc511988664"></a><a name="_Toc473620213"></a><a name="_Toc472758135"></a><a
name="_Toc473023655"></a>3.11 UNSUBACK  Unsubscribe acknowledgement</h2>

<p class=MsoNormal>The UNSUBACK packet is sent by the Server to the Client to
confirm receipt of an UNSUBSCRIBE packet.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901188"></a><a name="_Toc514848061"></a><a
name="_Toc511988665"></a><a name="_Toc473620214">3.11.1 UNSUBACK Fixed Header</a></h3>

<p class=MsoCaption><a name="_Toc385349338"></a><a name="_Figure_3.31_"></a>Figure
3.31  UNSUBACK packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=55 valign=top style='width:41.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=282 colspan=4 valign=top style='width:211.55pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (11)</p>
  </td>
  <td width=259 colspan=4 valign=top style='width:2.7in;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=55 valign=top style='width:41.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=541 colspan=8 valign=top style='width:405.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><a name="_Toc473620215"><b>Remaining Length field</b></a></p>

<p class=MsoNormal>This is the length of the Variable Header plus the length of
the Payload, encoded as a Variable Byte Integer.</p>

<p class=MsoNormal></p>

<h3><a name="_Toc3901189"></a><a name="_Toc514848062"></a><a
name="_Toc511988666"></a><a name="_Toc473620216">3.11.2 UNSUBACK Variable
Header</a></h3>

<p class=MsoNormal>The Variable Header of the UNSUBACK Packet the following
fields in the order: the Packet Identifier from the UNSUBSCRIBE Packet that is
being acknowledged, and Properties. The rules for encoding Properties are
described in <a href="#_Properties">section 2.2.2</a>.</p>

<p class=MsoNormal><a href="#_Figure_3.32_"></a></p>

<p class=MsoNormal><a name="_Toc385349340"></a><a name="_Figure_3.32_"></a>Figure
3.32  UNSUBACK packet Variable Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=58 valign=top style='width:43.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=58 valign=top style='width:43.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  MSB</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:130.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=464 colspan=8 valign=top style='width:348.3pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Packet Identifier
  LSB</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901190"></a><a name="_Toc514848063"></a><a
name="_Toc511988667">3.11.2.1 UNSUBACK Properties</a></h4>

<h5><a name="_Toc3901191"></a><a name="_Toc514848064"></a><a
name="_Toc511988668"></a><a name="_Toc473620217"></a><a name="_Toc471483690"></a><a
name="_Toc471282847">3.11.2.1.1 Property Length</a></h5>

<p class=MsoNormal>The length of the Properties in the UNSUBACK packet Variable
Header encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901192"></a><a name="_Toc514848065"></a><a
name="_Toc511988669"></a><a name="_Toc473620218"></a><a name="_Toc471483691"></a><a
name="_Toc471282848">3.11.2.1.2 Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte,</b> Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
associated with this response. This Reason String is a human readable string
designed for diagnostics and SHOULD NOT be parsed by the Client. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server uses this value to give additional information to
the Client. <span style='background:yellow'>The Server MUST NOT send this
Property if it would increase the size of the UNSUBACK packet beyond the
Maximum Packet Size specified by the Client</span> <span style='color:red'>[MQTT-3.11.2-1]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901193"></a><a name="_Toc514848066"></a><a
name="_Toc511988670"></a><a name="_Toc473620219"></a><a name="_Toc471483692">3.11.2.1.3
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property can be used to
provide additional diagnostic or other information. <span style='background:
yellow'>The Server MUST NOT send this property if it would increase the size of
the UNSUBACK packet beyond the Maximum Packet Size specified by the Client</span>
<span style='color:red'>[MQTT-3.11.2-2]</span>. The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901194"></a><a name="_Toc514848067"></a><a
name="_Toc511988671"></a><a name="_Toc473620220"></a><a name="_Toc471483693">3.11.3
UNSUBACK Payload</a></h3>

<p class=MsoNormal>The Payload contains a list of Reason Codes. Each Reason
Code corresponds to a Topic Filter in the UNSUBSCRIBE packet being
acknowledged. <span style='background:yellow'>The order of Reason Codes in the
UNSUBACK packet MUST match the order of Topic Filters in the UNSUBSCRIBE packet</span>
<span style='color:red'>[MQTT-3.11.3-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The values for the one byte unsigned Unsubscribe Reason
Codes are shown below. <span style='background:yellow'>The Server sending an
UNSUBACK packet MUST use one of the Unsubscribe Reason Code values for each
Topic Filter received</span> <span style='color:red'>[MQTT-3.11.3-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoCaption><a name="_Ref475109662">Table </a>3&#8209;9 - Unsubscribe
Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=679
 style='width:509.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x00</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Success</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The subscription is deleted.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>17</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x11</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>No subscription existed</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No matching Topic Filter is being used by the Client.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>128</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x80</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Unspecified error</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The unsubscribe could not be completed and the Server
  either does not wish to reveal the reason or none of the other Reason Codes
  apply.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>131</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x83</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Implementation specific error</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The UNSUBSCRIBE is valid but the Server does not accept
  it. </p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>135</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x87</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Not authorized</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client is not authorized to unsubscribe.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>143</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x8F</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Topic Filter invalid</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Topic Filter is correctly formed but is not allowed
  for this Client.</p>
  </td>
 </tr>
 <tr>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>145</p>
  </td>
  <td width=43 valign=top style='width:32.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>0x91</span></p>
  </td>
  <td width=210 valign=top style='width:157.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='color:#333333'>Packet Identifier in use</span></p>
  </td>
  <td width=366 valign=top style='width:274.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The specified Packet Identifier is already in use.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>There is always one Reason Code for
each Topic Filter in the corresponding UNSUBSCRIBE packet. If the Reason Code
is not specific to a Topic Filters (such as 0x91 (Packet Identifier in use)) it
is set for each Topic Filter.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901195"></a><a name="_Toc514848068"></a><a
name="_Toc511988672"></a><a name="_Toc473620221"></a><a name="_Toc471483694"></a><a
name="_Toc471282850"></a><a name="_Toc464635350"></a><a name="_Toc464548055"></a><a
name="_Toc462729179"></a><a name="_Toc442180894"></a><a name="_Toc385349817"></a><a
name="_Toc385349342"></a><a name="_Toc384800454">3.12 PINGREQ  PING request</a></h2>

<p class=MsoNormal>The PINGREQ packet is sent from a Client to the Server. It
can be used to: </p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Indicate to the Server that the Client is alive in the absence of
any other MQTT Control Packets being sent from the Client to the Server.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Request that the Server responds to confirm that it is alive.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Exercise the network to indicate that the Network Connection is
active.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620222">This packet is used in Keep Alive
processing. Refer to </a><a href="#_Keep_Alive_1">section 3.1.2.10</a> for more
details.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901196"></a><a name="_Toc514848069"></a><a
name="_Toc511988673"></a><a name="_Toc473620223">3.12.1 PINGREQ Fixed Header</a></h3>

<p class=MsoCaption><a name="_Toc385349344"></a><a name="_Figure_3.33_"></a>Figure
3.33  PINGREQ packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:.7in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=270 colspan=4 valign=top style='width:202.55pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (12)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:.7in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=541 colspan=8 valign=top style='width:405.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length
  (0)</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:.7in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901197"></a><a name="_Toc514848070"></a><a
name="_Toc511988674"></a><a name="_Toc473620224">3.12.2 PINGREQ Variable Header</a></h3>

<p class=MsoNormal>The PINGREQ packet has no Variable Header.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901198"></a><a name="_Toc514848071"></a><a
name="_Toc511988675"></a><a name="_Toc473620225"></a><a name="_Toc471483697"></a><a
name="_Toc471282853"></a><a name="_Toc464635353"></a><a name="_Toc464548058"></a><a
name="_Toc462729182"></a><a name="_Toc442180897"></a><a name="_Toc385349820"></a><a
name="_Toc385349346"></a><a name="_Toc384800457">3.12.3 PINGREQ Payload</a></h3>

<p class=MsoNormal>The PINGREQ packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901199"></a><a name="_Toc514848072"></a><a
name="_Toc511988676"></a><a name="_Toc473620226"></a><a name="_Toc471483698"></a><a
name="_Toc471282854"></a><a name="_Toc464635354"></a><a name="_Toc464548059"></a><a
name="_Toc462729183"></a><a name="_Toc442180898"></a><a name="_Toc385349821"></a><a
name="_Toc385349347"></a><a name="_Toc384800458">3.12.4 PINGREQ Actions</a></h3>

<p class=MsoNormal><span style='background:yellow'>The Server MUST send a
PINGRESP packet in response to a PINGREQ packet</span> <span style='color:red'>[MQTT-3.12.4-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901200"></a><a name="_Toc514848073"></a><a
name="_Toc511988677"></a><a name="_Toc473620227"></a><a name="_Toc471483699"></a><a
name="_Toc471282855"></a><a name="_Toc464635355"></a><a name="_Toc464548060"></a><a
name="_Toc462729184"></a><a name="_Toc442180899"></a><a name="_Toc385349822"></a><a
name="_Toc385349348"></a><a name="_Toc384800459">3.13 PINGRESP  PING response</a></h2>

<p class=MsoNormal>A PINGRESP Packet is sent by the Server to the Client in
response to a PINGREQ packet. It indicates that the Server is alive.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620228">This packet is used in Keep Alive
processing. Refer to </a><a href="#_Keep_Alive_1">section 3.1.2.10</a> for more
details.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901201"></a><a name="_Toc514848074"></a><a
name="_Toc511988678"></a><a name="_Toc473620229">3.13.1 PINGRESP Fixed Header</a></h3>

<p class=MsoCaption><a name="_Toc385349350"></a><a name="_Figure_3.34_"></a>Figure
3.34  PINGRESP packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=68 valign=top style='width:50.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:202.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (13)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.0pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=68 valign=top style='width:50.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=541 colspan=8 valign=top style='width:405.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length
  (0)</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=68 valign=top style='width:50.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=68 valign=top style='width:50.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901202"></a><a name="_Toc514848075"></a><a
name="_Toc511988679"></a><a name="_Toc473620230"></a><a name="_Toc360556127"></a><a
name="_Toc360556129"></a>3.13.2 PINGRESP Variable Header</h3>

<p class=MsoNormal>The PINGRESP packet has no Variable Header.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901203"></a><a name="_Toc514848076"></a><a
name="_Toc511988680"></a><a name="_Toc473620231"></a><a name="_Toc471483702"></a><a
name="_Toc471282858"></a><a name="_Toc464635358"></a><a name="_Toc464548063"></a><a
name="_Toc462729187"></a><a name="_Toc442180902"></a><a name="_Toc385349825"></a><a
name="_Toc385349352"></a><a name="_Toc384800462">3.13.3 PINGRESP Payload</a></h3>

<p class=MsoNormal>The PINGRESP packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901204"></a><a name="_Toc514848077"></a><a
name="_Toc511988681"></a><a name="_Toc473620232"></a><a name="_Toc471483703"></a><a
name="_Toc471282859"></a><a name="_Toc464635359"></a><a name="_Toc464548064"></a><a
name="_Toc462729188">3.13.4 PINGRESP Actions</a></h3>

<p class=MsoNormal>The Client takes no action on receiving this packet</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901205"></a><a name="_Toc514848078"></a><a
name="_Toc511988682"></a><a name="_Toc473620233"></a><a name="_Toc471483704"></a><a
name="_Toc471282860"></a><a name="_Toc464635360"></a><a name="_Toc464548065"></a><a
name="_Toc462729189"></a><a name="_Toc442180903"></a><a name="_Toc385349826"></a><a
name="_Toc385349353"></a><a name="_Toc384800463">3.14 DISCONNECT  Disconnect
notification</a></h2>

<p class=MsoNormal>The DISCONNECT packet is the final MQTT Control Packet sent
from the Client or the Server. It indicates the reason why the Network
Connection is being closed. The Client or Server MAY send a DISCONNECT packet
before closing the Network Connection. If the Network Connection is closed without
the Client first sending a DISCONNECT packet with Reason Code 0x00 (Normal
disconnection) and the Connection has a Will Message, the Will Message is published.
Refer to <a href="#_Toc479576982">section 3.1.2.5</a> for further details.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Server MUST NOT send a DISCONNECT
until after it has sent a CONNACK with Reason Code of less than 0x80</span> <span
style='color:red'>[MQTT-3.14.0-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901206"></a><a name="_Toc514848079"></a><a
name="_Toc511988683"></a><a name="_Toc473620234">3.14.1 DISCONNECT Fixed Header</a></h3>

<p class=MsoCaption><a name="_Toc385349355"></a><a name="_Figure_3.35_"></a>Figure
3.35  DISCONNECT packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:.7in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=270 colspan=4 valign=top style='width:202.55pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (14)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:.7in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=541 colspan=8 valign=top style='width:405.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='background:yellow'>The Client or Server MUST
validate that reserved bits are set to 0. If they are not zero it sends a
DISCONNECT packet with a Reason code of 0x81 (Malformed Packet) as described in
</span><a href="#S4_13_Errors"><span style='background:yellow'>section 4.13</span></a><span
style='background:yellow'> </span><span style='color:red'>[MQTT-3.14.1-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620235"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620236">This is the length of the Variable
Header encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901207"></a><a name="_Toc514848080"></a><a
name="_Toc511988684"></a><a name="_Toc473620237"></a><a name="_Toc360556134"></a><a
name="_Toc360556135"></a>3.14.2 DISCONNECT Variable Header</h3>

<p class=MsoNormal>The Variable Header of the DISCONNECT Packet contains the
following fields in the order: Disconnect Reason Code, and Properties. The
rules for encoding Properties are described in <a href="#_Properties">section
2.2.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901208"></a><a name="_Toc514848081"></a><a
name="_Toc511988685"></a><a name="_Toc473620238"></a><a name="_Toc471483707"></a><a
name="_Toc471282863"></a><a name="_Toc464635363"></a><a name="_Toc464548068"></a><a
name="_Toc462729192"></a><a name="_Disconnect_Return_codes"></a><a
name="_Disconnect_Reason_Code"></a>3.14.2.1 Disconnect Reason Code</h4>

<p class=MsoNormal>Byte 1 in the Variable Header is the Disconnect Reason Code.
If the Remaining Length is less than 1 the value of 0x00 (Normal disconnection)
is used.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The values for the one byte unsigned Disconnect Reason Code
field are shown below<span style='color:#0070C0'>.</span></p>

<p class=MsoNormal><span style='color:#0070C0'></span></p>

<p class=MsoNormal><a name="_Toc473620239"></a><a name="_Ref472759204"></a><a
name="_Ref459629723"></a><a name=DisconnectReasonCode></a>Table 3&#8209;10 
Disconnect Reason Code values</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=679
 style='width:509.4pt;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Sent by</b></p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Normal disconnection</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Close the connection normally. Do not send the Will
  Message.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>4</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x04</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Disconnect with Will Message</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client wishes to disconnect but requires that the
  Server also publishes its Will Message.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>128</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x80</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Unspecified error</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Connection is closed but the sender either does not
  wish to reveal the reason, or none of the other Reason Codes apply. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>129</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x81</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Malformed Packet</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The received packet does not conform to this specification.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>130</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x82</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Protocol Error</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>An unexpected or out of order packet was received.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>131</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x83</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Implementation specific error</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The packet received is valid but cannot be processed by
  this implementation.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>135</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x87</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Not authorized</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The request is not authorized.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>137</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x89</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server busy</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server is busy and cannot continue processing requests
  from this Client.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>139</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8B</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server shutting down</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server is shutting down. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>141</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8D</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Keep Alive timeout</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Connection is closed because no packet has been
  received for 1.5 times the Keepalive time.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>142</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8E</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session taken over</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Another Connection using the same ClientID has connected
  causing this Connection to be closed.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>143</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x8F</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Filter invalid</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Topic Filter is correctly formed, but is not accepted
  by this Sever.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>144</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x90</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Name invalid</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Topic Name is correctly formed, but is not accepted by
  this Client or Server.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>147</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x93</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Receive Maximum exceeded</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client or Server has received more than Receive
  Maximum publication for which it has not sent PUBACK or PUBCOMP. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>148</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x94</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Topic Alias invalid</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client or Server has received a PUBLISH packet
  containing a Topic Alias which is greater than the Maximum Topic Alias it
  sent in the CONNECT or CONNACK packet. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>149</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x95</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Packet too large</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The packet size is greater than Maximum Packet Size for
  this Client or Server.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>150</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x96</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Message rate too high</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The received data rate is too high.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>151</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x97</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Quota exceeded</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>An implementation or administrative imposed limit has been
  exceeded.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>152</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x98</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Administrative action</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Connection is closed due to an administrative action.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>153</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x99</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Payload format invalid</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The payload format does not match the one specified by the
  Payload Format Indicator.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>154</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9A</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Retain not supported</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server has does not support retained messages.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>155</span></p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9B</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>QoS not supported</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client specified a QoS greater than the QoS specified
  in a Maximum QoS in the CONNACK. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>156</span></p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9C</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Use another server</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Client should temporarily change its Server.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>157</span></p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9D</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Server moved</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server is moved and the Client should permanently
  change its server location.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>158</span></p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9E</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Shared Subscriptions not supported</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support Shared Subscriptions.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.5pt;color:#333333'>159</span></p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x9F</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Connection rate exceeded</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>This connection is closed because the connection rate is
  too high.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>160</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0xA0</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Maximum connect time</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The maximum connection time authorized for this connection
  has been exceeded.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>161</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0xA1</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Subscription Identifiers not supported</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support Subscription Identifiers; the
  subscription is not accepted.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=61 valign=top style='width:45.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>162</p>
  </td>
  <td width=60 valign=top style='width:45.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0xA2</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Wildcard Subscriptions not supported</p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=294 valign=top style='width:220.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>The Server does not support Wildcard Subscriptions; the
  subscription is not accepted.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client or Server sending
the DISCONNECT packet MUST use one of the DISCONNECT Reason Code values</span> <span
style='color:red'>[MQTT-3.14.2-1]</span><span style='color:#0070C0'>. </span>The
Reason Code and Property Length can be omitted if the Reason Code is 0x00
(Normal disconnecton) and there are no Properties. In this case the DISCONNECT
has a Remaining Length of 0.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Hlk486261025"></a><a
name="_Toc473620240"><b>Non-normative comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The DISCONNECT packet is used to
indicate the reason for a disconnect for cases where there is no acknowledge packet
(such as a QoS 0 publish) or when the Client or Server is unable to continue
processing the Connection. </p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The information can be used by the
Client to decide whether to retry the connection, and how long it should wait
before retrying the connection.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h4><a name="_Toc3901209"></a><a name="_Toc514848082"></a><a
name="_Toc511988686">3.14.2.2 DISCONNECT Properties</a></h4>

<h5><a name="_Toc3901210"></a><a name="_Toc514848083"></a><a
name="_Toc511988687"></a><a name="_Toc473620241"></a><a name="_Toc471483708"></a><a
name="_Toc471282864"></a><a name="_Toc464635364"></a><a name="_Toc464548069">3.14.2.2.1
Property Length</a></h5>

<p class=MsoNormal>The length of Properties in the DISCONNECT packet Variable
Header encoded as a Variable Byte Integer. If the Remaining Length is less than
2, a value of 0 is used.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901211"></a><a name="_Toc514848084"></a><a
name="_Toc511988688"></a><a name="_Toc473620242"></a><a name="_Toc471483709"></a><a
name="_Toc471282865"></a><a name="_Toc464635365"></a><a name="_Toc464548070"></a><a
name="_Toc462729193">3.14.2.2.2 Session Expiry Interval</a></h5>

<p class=MsoNormal><b>17 (0x11) Byte,</b> Identifier of the Session Expiry
Interval.</p>

<p class=MsoNormal>Followed by the Four Byte Integer representing the Session
Expiry Interval in seconds. It is a Protocol Error to include the Session
Expiry Interval more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Session Expiry Interval is absent, the Session Expiry
Interval in the CONNECT packet is used.</p>

<p class=MsoNormal></p>

<p class=MsoNormal><span style='background:yellow'>The Session Expiry Interval
MUST NOT be sent on a DISCONNECT by the Server</span> <span style='color:red'>[MQTT-3.14.2-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Session Expiry Interval in the CONNECT packet was
zero, then it is a Protocol Error to set a non-zero Session Expiry Interval in
the DISCONNECT packet sent by the Client. If such a non-zero Session Expiry
Interval is received by the Server, it does not treat it as a valid DISCONNECT
packet. The Server uses DISCONNECT with Reason Code 0x82 (Protocol Error) as
described in <a href="#S4_13_Errors">section 4.13</a>. </p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901212"></a><a name="_Toc514848085"></a><a
name="_Toc511988689"></a><a name="_Toc473620243"></a><a name="_Toc471483710"></a><a
name="_Toc471282866"></a><a name="_Toc464635366"></a><a name="_Toc464548071">3.14.2.2.3
Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte, </b>Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
for the disconnect. This Reason String is human readable, designed for
diagnostics and SHOULD NOT be parsed by the receiver. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The sender MUST NOT send
this Property if it would increase the size of the DISCONNECT packet beyond the
Maximum Packet Size specified by the receiver</span> <span style='color:red'>[MQTT-3.14.2-3]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901213"></a><a name="_Toc514848086"></a><a
name="_Toc511988690"></a><a name="_Toc473620244"></a><a name="_Toc471483711">3.14.2.2.4
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.<b> </b></p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property may be used to
provide additional diagnostic or other information. <span style='background:
yellow'>The sender MUST NOT send this property if it would increase the size of
the DISCONNECT packet beyond the Maximum Packet Size specified by the receiver</span>
<span style='color:red'>[MQTT-3.14.2-4]</span>. The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901214"></a><a name="_Toc514848087"></a><a
name="_Toc511988691"></a><a name="_Toc473620245"></a><a name="_Toc471483712"></a><a
name="_Toc471282867"></a><a name="_Toc464635367"></a><a name="_Toc464548072">3.14.2.2.5
Server Reference</a></h5>

<p class=MsoNormal><b>28 (0x1C) Byte,</b> Identifier of the Server Reference. </p>

<p class=MsoNormal>Followed by a UTF-8 Encoded String which can be used by the
Client to identify another Server to use. It is a Protocol Error to include the
Server Reference more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server sends DISCONNECT including a Server Reference and
Reason Code 0x9C (Use another server) or 0x9D (Server moved) as described in <a
href="#S4_13_Errors">section 4.13</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_Server_redirection">section 4.11</a>
Server Redirection for information about how Server Reference is used.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620246">Figure </a>3&#8209;24
DISCONNECT packet Variable Header non-normative example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>&nbsp;</b></p>
  </td>
  <td width=240 valign=top style='width:179.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=35 valign=top style='width:26.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=38 colspan=2 valign=top style='width:28.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=625 colspan=17 valign=top style='width:468.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Disconnect Reason Code</p>
  </td>
 </tr>
 <tr>
  <td width=103 style='width:77.35pt;border:solid windowtext 1.0pt;border-top:
  none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=240 valign=top style='width:179.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 valign=top style='width:26.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 colspan=2 valign=top style='width:28.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=625 colspan=17 valign=top style='width:468.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Properties</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=241 colspan=2 valign=top style='width:180.85pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Length (5)</p>
  </td>
  <td width=33 valign=top style='width:25.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=2 valign=top style='width:27.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.35pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=37 valign=top style='width:27.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 3</p>
  </td>
  <td width=241 colspan=2 valign=top style='width:180.85pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session Expiry Interval identifier (17)</p>
  </td>
  <td width=33 valign=top style='width:25.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=2 valign=top style='width:27.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.35pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=37 valign=top style='width:27.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 4</p>
  </td>
  <td width=241 colspan=2 rowspan=4 valign=top style='width:180.85pt;
  border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Session Expiry Interval (0)</p>
  </td>
  <td width=33 valign=top style='width:25.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=2 valign=top style='width:27.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.35pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=37 valign=top style='width:27.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>0</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 5</p>
  </td>
  <td width=33 valign=top style='width:25.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=2 valign=top style='width:27.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=3 valign=top style='width:26.9pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 colspan=2 valign=top style='width:28.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 6</p>
  </td>
  <td width=33 valign=top style='width:25.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=2 valign=top style='width:27.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=3 valign=top style='width:26.9pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 colspan=2 valign=top style='width:28.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=103 valign=top style='width:77.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 7</p>
  </td>
  <td width=33 valign=top style='width:25.1pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=2 valign=top style='width:27.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.1pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=35 colspan=2 valign=top style='width:26.15pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=36 colspan=3 valign=top style='width:26.9pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=34 valign=top style='width:25.4pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=38 colspan=2 valign=top style='width:28.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr height=0>
  <td width=103 style='border:none'></td>
  <td width=240 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=33 style='border:none'></td>
  <td width=35 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=34 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=34 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=34 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=34 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=34 style='border:none'></td>
  <td width=1 style='border:none'></td>
  <td width=37 style='border:none'></td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471483713"></a><a name="_Toc471282868"></a><a
name="_Toc464635368"></a><a name="_Toc464548073"></a><a name="_Toc462729194"></a><a
name="_Toc442180906"></a><a name="_Toc385349829"></a><a name="_Toc385349357"></a><a
name="_Toc384800466">&nbsp;</a></p>

<h3><a name="_Toc3901215"></a><a name="_Toc514848088"></a><a
name="_Toc511988692">3.14.3 DISCONNECT Payload</a></h3>

<p class=MsoNormal>The DISCONNECT packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc473620247"></a><a name="_Toc3901216"></a><a
name="_Toc514848089"></a><a name="_Toc511988693"></a><a name="_Toc473906327">3.14.4
DISCONNECT Actions</a></h3>

<p class=MsoNormal><span style='background:yellow'>After sending a DISCONNECT
packet the sender</span>:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>MUST NOT send any more
     MQTT Control Packets on that Network Connection</span> <span
     style='color:red'>[MQTT-3.14.4-1]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST close the Network
     Connection</span> <span style='color:red'>[MQTT-3.14.4-2]</span>.</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>On receipt of DISCONNECT
with a Reason Code of 0x00 (Success) the Server</span>:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>MUST discard any Will
     Message associated with the current Connection without publishing it</span>
     <span style='color:red'>[MQTT-3.14.4-3]</span>, as described in <a
     href="#_Toc479576982">section 3.1.2.5</a>.</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>On receipt of DISCONNECT, the receiver:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>SHOULD close the Network Connection.</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901217"></a><a name="_Toc514848090"></a><a
name="_Toc511988694"></a><a name="_Toc473620249"></a><a name="_Toc471483715"></a><a
name="_Toc471282870"></a><a name="_Toc464635370"></a><a name="_Toc464548075">3.15
AUTH  Authentication exchange</a></h2>

<p class=MsoNormal>An AUTH packet is sent from Client to Server or Server to
Client as part of an extended authentication exchange, such as challenge / response
authentication. It is a Protocol Error for the Client or Server to send an AUTH
packet if the CONNECT packet did not contain the same Authentication Method.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901218"></a><a name="_Toc514848091"></a><a
name="_Toc511988695"></a><a name="_Toc473620250">3.15.1 AUTH Fixed Header</a></h3>

<p class=MsoCaption>Figure 3.35  AUTH packet Fixed Header</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Bit</b></p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>7</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>6</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>5</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>4</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>3</b></p>
  </td>
  <td width=72 valign=top style='width:.75in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>2</b></p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>1</b></p>
  </td>
  <td width=67 valign=top style='width:.7in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>0</b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 1</p>
  </td>
  <td width=270 colspan=4 valign=top style='width:202.55pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>MQTT Control Packet
  type (15)</p>
  </td>
  <td width=271 colspan=4 valign=top style='width:203.4pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Reserved</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=66 valign=top style='width:49.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>1</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=72 valign=top style='width:.75in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=60 valign=top style='width:45.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
  <td width=67 valign=top style='width:.7in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>0</p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.85pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>byte 2</p>
  </td>
  <td width=541 colspan=8 valign=top style='width:405.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Remaining Length</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Bits 3,2,1 and 0 of the
Fixed Header of the AUTH packet are reserved and MUST all be set to 0. The
Client or Server MUST treat any other value as malformed and close the Network
Connection</span> <span style='color:red'>[MQTT-3.15.1-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620251"><b>Remaining Length field</b></a></p>

<p class=MsoNormal><a name="_Toc473620252">This is the length of the Variable
Header encoded as a Variable Byte Integer.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901219"></a><a name="_Toc514848092"></a><a
name="_Toc511988696"></a><a name="_Toc473620253">3.15.2 AUTH Variable Header</a></h3>

<p class=MsoNormal>The Variable Header of the AUTH Packet contains the
following fields in the order: Authenticate Reason Code, and Properties. The
rules for encoding Properties are described in <a href="#_Properties">section
2.2.2</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901220"></a><a name="_Toc514848093"></a><a
name="_Toc511988697">3.15.2.1 Authenticate Reason Code</a></h4>

<p class=MsoNormal>Byte 0 in the Variable Header is the Authenticate Reason
Code. The values for the one byte unsigned Authenticate Reason Code field are shown
below. <span style='background:yellow'>The sender of the AUTH Packet MUST use
one of the Authenticate Reason Codes</span> <span style='color:red'>[MQTT-3.15.2-1]</span>.</p>

<p class=MsoCaption>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620255"></a><a name="_Ref472759840">Table </a>3&#8209;11 Authenticate Reason Codes</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=679
 style='width:509.4pt;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=55 valign=top style='width:41.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Value</b></p>
  </td>
  <td width=48 valign=top style='width:.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Hex</b></p>
  </td>
  <td width=186 valign=top style='width:139.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Reason Code name</b></p>
  </td>
  <td width=66 valign=top style='width:49.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Sent by</b></p>
  </td>
  <td width=324 valign=top style='width:243.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=55 valign=top style='width:41.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x00</p>
  </td>
  <td width=186 valign=top style='width:139.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Success</p>
  </td>
  <td width=66 valign=top style='width:49.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Server</p>
  </td>
  <td width=324 valign=top style='width:243.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Authentication is successful</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=55 valign=top style='width:41.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>24</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x18</p>
  </td>
  <td width=186 valign=top style='width:139.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Continue authentication</p>
  </td>
  <td width=66 valign=top style='width:49.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client or Server </p>
  </td>
  <td width=324 valign=top style='width:243.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Continue the authentication with another step </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=55 valign=top style='width:41.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>25</p>
  </td>
  <td width=48 valign=top style='width:.5in;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0x19</p>
  </td>
  <td width=186 valign=top style='width:139.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Re-authenticate</p>
  </td>
  <td width=66 valign=top style='width:49.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Client</p>
  </td>
  <td width=324 valign=top style='width:243.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Initiate a re-authentication</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>The Reason Code and Property Length can be omitted if the
Reason Code is 0x00 (Success) and there are no Properties. In this case the
AUTH has a Remaining Length of 0.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901221"></a><a name="_Toc514848094"></a><a
name="_Toc511988698">3.15.2.2 AUTH Properties</a></h4>

<h5><a name="_Toc3901222"></a><a name="_Toc514848095"></a><a
name="_Toc511988699"></a><a name="_Toc473620256"></a><a name="_Toc471483719"></a><a
name="_Toc471282874">3.15.2.2.1 Property Length</a></h5>

<p class=MsoNormal>The length of Properties in the AUTH packet Variable Header
encoded as a Variable Byte Integer.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901223"></a><a name="_Toc514848096"></a><a
name="_Toc511988700">3.15.2.2.2 Authentication Method</a></h5>

<p class=MsoNormal><b>21 (0x15) Byte</b>, Identifier of the Authentication
Method. </p>

<p class=MsoNormal>Followed by a UTF-8 Encoded String containing the name of
the authentication method. It is a Protocol Error to omit the Authentication
Method or to include it more than once. Refer to <a
href="#_Enhanced_authentication">section 4.12</a> for more information about extended
authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901224"></a><a name="_Toc514848097"></a><a
name="_Toc511988701">3.15.2.2.3 Authentication Data</a></h5>

<p class=MsoNormal><b>22 (0x16) Byte</b>, Identifier of the Authentication
Data. </p>

<p class=MsoNormal>Followed by Binary Data containing authentication data. It
is a Protocol Error to include Authentication Data more than once. The contents
of this data are defined by the authentication method. Refer to <a
href="#_Enhanced_authentication">section 4.12</a> for more information about
extended authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901225"></a><a name="_Toc514848098"></a><a
name="_Toc511988702">3.15.2.2.4 Reason String</a></h5>

<p class=MsoNormal><b>31 (0x1F) Byte, </b>Identifier of the Reason String. </p>

<p class=MsoNormal>Followed by the UTF-8 Encoded String representing the reason
for the disconnect. This Reason String is human readable, designed for
diagnostics and SHOULD NOT be parsed by the receiver. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The sender MUST NOT send
this property if it would increase the size of the AUTH packet beyond the
Maximum Packet Size specified by the receiver</span> <span style='color:red'>[MQTT-3.15.2-2]</span>.
It is a Protocol Error to include the Reason String more than once.</p>

<p class=MsoNormal>&nbsp;</p>

<h5><a name="_Toc3901226"></a><a name="_Toc514848099"></a><a
name="_Toc511988703"></a><a name="_Toc473620259"></a><a name="_Toc471483722">3.15.2.2.5
User Property</a></h5>

<p class=MsoNormal><b>38 (0x26) Byte, </b>Identifier of the User Property.</p>

<p class=MsoNormal>Followed by UTF-8 String Pair. This property may be used to
provide additional diagnostic or other information. <span style='background:
yellow'>The sender MUST NOT send this property if it would increase the size of
the AUTH packet beyond the Maximum Packet Size specified by the receiver</span>
<span style='color:red'>[MQTT-3.15.2-3]</span>. The User Property is allowed to
appear multiple times to represent multiple name, value pairs. The same name is
allowed to appear more than once.</p>

<p class=MsoNormal><a name="_Toc464548082"></a><a name="_Toc464635377"></a><a
name="_Toc471282877"></a><a name="_Toc471483723"></a><a name="_Toc473620260"></a>&nbsp;</p>

<h3><a name="_Toc3901227"></a><a name="_Toc514848100"></a><a
name="_Toc511988704">3.15.3 AUTH Payload</a></h3>

<p class=MsoNormal>The AUTH packet has no Payload.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901228"></a><a name="_Toc514848101"></a><a
name="_Toc511988705"></a><a name="_Toc473620261"></a><a name="_Toc471483724"></a><a
name="_Toc471282878"></a><a name="_Toc464635378"></a><a name="_Toc464548083">3.15.4
AUTH Actions</a></h3>

<p class=MsoNormal>Refer to <a href="#_Enhanced_authentication">section 4.12</a>
for more information about extended authentication.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc287332011"></a><a name="_Toc3901229"></a><a
name="_Toc514848102"></a><a name="_Toc511988706"></a><a name="_Toc473620262"></a><a
name="_Toc471483725"></a><a name="_Toc471282879"></a><a name="_Toc464635379"></a><a
name="_Toc464548084"></a><a name="_Toc462729196"></a><a
name="_Operational_behavior"></a>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Operational behavior</h1>

</div>

<h2><a name="_Toc473620263"></a><a name="_Toc471483726"></a><a
name="_Toc471282880"></a><a name="_Toc464635380"></a><a name="_Toc464548085"></a><a
name="_Toc462729197"></a><a name="_Toc442180909"></a><a name="_Toc385349832"></a><a
name="_Toc385349360"></a><a name="_Toc384800469"></a><a name="_Ref369188337"></a><a
name="_Ref369188335"></a><a name="_Ref369188333"></a><a name="_Toc3901230"></a><a
name="_Toc514848103"></a><a name="_Toc511988707"></a><a name="_Ref478634488"></a><a
name="_Session_State"></a>4.1 Session State</h2>

<p class=MsoNormal>In order to implement QoS 1 and QoS 2 protocol flows the
Client and Server need to associate state with the Client Identifier, this is
referred to as the Session State. The Server also stores the subscriptions as
part of the Session State.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The session can continue across a sequence of Network
Connections. It lasts as long as the latest Network Connection plus the Session
Expiry Interval.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Session State in the Client consists of:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>QoS 1 and QoS 2 messages which have been sent to the Server, but
have not been completely acknowledged.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>QoS 2 messages which have been received from the Server, but have
not been completely acknowledged.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Session State in the Server consists of:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The existence of a Session, even if the rest of the Session State
is empty.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The Clients subscriptions, including any Subscription
Identifiers.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>QoS 1 and QoS 2 messages which have been sent to the Client, but
have not been completely acknowledged.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>QoS 1 and QoS 2 messages pending transmission to the Client and
OPTIONALLY QoS 0 messages pending transmission to the Client.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>QoS 2 messages which have been received from the Client, but have
not been completely acknowledged.The Will Message and the Will Delay Interval</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>If the Session is currently not connected, the time at which the Session
will end and Session State will be discarded.</p>

<p class=MsoNormal></p>

<p class=MsoNormal>Retained messages do not form part of the Session State in
the Server, they are not deleted as a result of a Session ending.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901231"></a><a name="_Toc514848104"></a><a
name="_Toc511988708"></a><a name="_Ref478766591"></a><a
name="_Storing_Session_State"></a>4.1.1 Storing Session State</h3>

<p class=MsoNormal><span style='background:yellow'>The Client and Server MUST NOT
discard the Session State while the Network Connection is open</span> <span
style='color:red'>[MQTT-4.1.0-1]</span>. <span style='background:yellow'>The
Server MUST discard the Session State when the Network Connection is closed and
the Session Expiry Interval has passed</span> <span style='color:red'>[MQTT-4.1.0-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620264"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The storage capabilities of Client
and Server implementations will of course have limits in terms of capacity and
may be subject to administrative policies. Stored Session State can be
discarded as a result of an administrator action, including an automated
response to defined conditions. This has the effect of terminating the Session.
These actions might be prompted by resource constraints or for other
operational reasons. It is possible that hardware or software failures may
result in loss or corruption of Session State stored by the Client or Server. It
is prudent to evaluate the storage capabilities of the Client and Server to
ensure that they are sufficient.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<h3><a name="_Toc3901232"></a><a name="_Toc514848105"></a><a
name="_Toc511988709"></a><a name="_Toc473620268"></a><a name="_Toc471483727"></a><a
name="_Toc471282881"></a><a name="_Toc464635381"></a><a name="_Toc464548086"></a><a
name="_Toc462729198"></a><a name="_Toc442180910"></a><a name="_Toc385349833"></a><a
name="_Toc385349361"></a><a name="_Toc384800470"></a><a name="_Toc479577486"></a><a
name="_Toc479924989"></a><a name="_Toc479933098"></a><a name="_Toc479937271"></a><a
name="_Toc479577487"></a><a name="_Toc479924990"></a><a name="_Toc479933099"></a><a
name="_Toc479937272"></a><a name="_Toc479577488"></a><a name="_Toc479924991"></a><a
name="_Toc479933100"></a><a name="_Toc479937273"></a>4.1.2 Session State non-normative
examples</h3>

<p class=MsoNormal>For example, an electricity meter reading solution might use
QoS 1 messages to protect the readings against loss over the network. The
solution developer might have determined that the power supply is sufficiently
reliable that, in this case, the data in the Client and Server can be stored in
volatile memory without too much risk of its loss.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Conversely a parking meter payment application provider
might decide that the payment messages should never be lost due to a network or
Client failure. Thus, they require that all data be written to non-volatile
memory before it is transmitted across the network.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901233"></a><a name="_Toc514848106"></a><a
name="_Toc511988710"></a><a name="_Toc473620269"></a><a name="_Toc471483728"></a><a
name="_Toc471282882"></a><a name="_Toc464635382"></a><a name="_Toc464548087"></a><a
name="_Toc462729199"></a><a name="_Toc442180911"></a><a name="_Toc385349834"></a><a
name="_Toc385349362"></a><a name="_Toc384800471"></a><a name="_Ref368642907"></a><a
name="_Network_Connections"></a>4.2 Network Connections</h2>

<p class=MsoNormal>The MQTT protocol requires an underlying transport that
provides an ordered, lossless, stream of bytes from the Client to Server and
Server to Client. This specification does not require the support of any
specific transport protocol. A Client or Server MAY support any of the
transport protocols listed here, or any other transport protocol that meets the
requirements of this <a href="#_Network_Connections">section</a><span
class=MsoHyperlink>.</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Client or Server MUST
support the use of one or more underlying transport protocols that provide an
ordered, lossless, stream of bytes from the Client to Server and Server to
Client</span> <span style='color:red'>[MQTT-4.2-1]</span>.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620270"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>TCP/IP as defined in <a
href="#RFC793">[RFC0793]</a><span class=MsoHyperlink> </span><span
style='color:black'>can be used for MQTT v5.0. The f</span>ollowing transport
protocols are also suitable:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>TLS <a href="#RFC5246">[RFC5246]</a><a href="#RFC5246"></a></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>WebSocket <a href="#RFC6455">[RFC6455]</a> <a href="#RFC6455"></a></p>

<p class=MsoNormal><a name="_Toc473620271">&nbsp;</a></p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>TCP ports 8883 and 1883 are
registered with IANA for MQTT TLS and non-TLS communication respectively.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>Connectionless network transports
such as <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol"><span
style='color:windowtext'>User Datagram Protocol</span></a> (UDP) are not
suitable on their own because they might lose or reorder data. </p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901234"></a><a name="_Toc514848107"></a><a
name="_Toc511988711"></a><a name="_Toc473620272"></a><a name="_Toc471483729"></a><a
name="_Toc471282883"></a><a name="_Toc464635383"></a><a name="_Toc464548088"></a><a
name="_Toc462729200"></a><a name="_Toc442180912"></a><a name="_Toc385349835"></a><a
name="_Toc385349363"></a><a name="_Toc384800472"></a><a name="_Ref363045966"></a><a
name="_Quality_of_Service"></a>4.3 Quality of Service levels and protocol flows</h2>

<p class=MsoNormal>MQTT delivers Application Messages according to the Quality
of Service (QoS) levels defined in the following sections. The delivery
protocol is symmetric, in the description below the Client and Server can each
take the role of either sender or receiver. The delivery protocol is concerned
solely with the delivery of an application message from a single sender to a
single receiver. When the Server is delivering an Application Message to more
than one Client, each Client is treated independently. The QoS level used to
deliver an Application Message outbound to the Client could differ from that of
the inbound Application Message.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901235"></a><a name="_Toc514848108"></a><a
name="_Toc511988712"></a><a name="_Toc473620273"></a><a name="_Toc471483730"></a><a
name="_Toc471282884"></a><a name="_Toc464635384"></a><a name="_Toc464548089"></a><a
name="_Toc462729201"></a><a name="_Toc442180913"></a><a name="_Toc385349836"></a><a
name="_Toc385349364"></a><a name="_Toc384800473">4.3.1 QoS 0: At most once
delivery</a></h3>

<p class=MsoNormal>The message is delivered according to the capabilities of
the underlying network. No response is sent by the receiver and no retry is
performed by the sender. The message arrives at the receiver either once or not
at all. </p>

<p class=MsoNormal><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620274"><span style='background:yellow'>In
the QoS 0 delivery protocol, the sender</span></a></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>MUST send a PUBLISH packet with
QoS 0 and DUP flag set to 0</span> <span style='color:red'>[MQTT-4.3.1-1]</span>.</p>

<p class=MsoNormal style='margin-left:3.0pt'><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620275">In the QoS 0 delivery protocol, the receiver</a></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Accepts ownership of the message when it receives the PUBLISH
packet.</p>

<p class=MsoNormal style='margin-left:21.0pt'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc385349365"></a><a
name="_Figure_4.1_"></a>Figure 4.1  QoS 0 protocol flow diagram, non-normative
example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=583
 style='width:437.4pt;margin-left:.5in;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Sender Action</b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Control Packet</b></p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Receiver Action</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>PUBLISH QoS 0,
  DUP=0</p>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>----------&gt;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Deliver Application
  Message to appropriate onward recipient(s) </p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Toc471282885"></a><a name="_Toc464635385"></a><a
name="_Toc464548090"></a><a name="_Toc462729202"></a><a name="_Toc442180914"></a><a
name="_Toc385349837"></a><a name="_Toc385349366"></a><a name="_Toc384800474"></a><a
name="_Ref384138490">&nbsp;</a></p>

<h3><a name="_Toc3901236"></a><a name="_Toc514848109"></a><a
name="_Toc511988713"></a><a name="_Ref475108975"></a><a name="_Toc473620276"></a><a
name="_Toc471483731"></a><a name="_QoS_1:_At"></a>4.3.2 QoS 1: At least once
delivery</h3>

<p class=MsoNormal style='text-align:justify'>This Quality of Service level ensures
that the message arrives at the receiver at least once. A QoS 1 PUBLISH packet
has a Packet Identifier in its Variable Header and is acknowledged by a PUBACK packet.
<a href="#_Toc358219870">Section 2.2.1</a> provides more information about Packet
Identifiers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;text-autospace:none'><b><span lang=EN-GB style='font-size:9.0pt;
color:black'>&nbsp;</span></b></p>

<p class=MsoNormal><a name="_Toc473620277"><span style='background:yellow'>In
the QoS 1 delivery protocol, the sender</span></a></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>MUST assign an unused Packet
Identifier each time it has a new Application Message to publish</span> <span
style='color:red'>[MQTT-4.3.2-1]</span>. </p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>MUST send a PUBLISH packet
containing this Packet Identifier with QoS 1 and DUP flag set to 0</span> <span
style='color:red'>[MQTT-4.3.2-2]</span>.</p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>MUST treat the PUBLISH packet as
unacknowledged until it has received the corresponding PUBACK packet from the
receiver</span>. Refer to <a href="#_Message_delivery_retry">section 4.4</a>
for a discussion of unacknowledged messages <span style='color:red'>[MQTT-4.3.2-3]</span>.</p>

<p class=MsoNormal><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620278">The Packet Identifier becomes
available for reuse once the sender has received the PUBACK packet.</a> </p>

<p class=MsoNormal style='margin-left:3.0pt'><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'>Note that a sender is permitted to
send further PUBLISH packets with different Packet Identifiers while it is
waiting to receive acknowledgements.</p>

<p class=MsoNormal><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620279"><span style='background:yellow'>In
the QoS 1 delivery protocol, the receiver</span></a></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>MUST respond with a PUBACK
     packet containing the Packet Identifier from the incoming PUBLISH packet,
     having accepted ownership of the Application Message</span> <span
     style='color:red'>[MQTT-4.3.2-4]</span>. </li>
 <li class=MsoNormal><span style='background:yellow'>After it has sent a PUBACK
     packet the receiver MUST treat any incoming PUBLISH packet that contains
     the same Packet Identifier as being a new Application Message,
     irrespective of the setting of its DUP flag</span> <span style='color:
     red'>[MQTT-4.3.2-5]</span>.</li>
</ul>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc385349367"></a><a
name="_Figure_4.2_"></a>Figure 4.2  QoS 1 protocol flow diagram, non-normative
example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=583
 style='width:437.4pt;margin-left:.5in;border-collapse:collapse;border:none'>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Sender Action</b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>MQTT Control
  Packet</b></p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Receiver action</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Store message</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Send PUBLISH QoS 1, DUP=0, &lt;Packet Identifier&gt;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>----------&gt;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Initiate onward delivery of the Application Message<sup>1</sup></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&lt;----------</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>Send PUBACK
  &lt;Packet Identifier&gt;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Discard message</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>&nbsp;</b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><sup>&nbsp;</sup></p>

<p class=MsoNormal style='margin-left:.5in'><sup>1 </sup>The receiver does not
need to complete delivery of the Application Message before sending the PUBACK.
When its original sender receives the PUBACK packet, ownership of the Application
Message is transferred to the receiver.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h3><a name="_Toc3901237"></a><a name="_Toc514848110"></a><a
name="_Toc511988714"></a><a name="_Toc473620280"></a><a name="_Toc471483732"></a><a
name="_Toc471282886"></a><a name="_Toc464635386"></a><a name="_Toc464548091"></a><a
name="_Toc462729203"></a><a name="_Toc442180915"></a><a name="_Toc385349838"></a><a
name="_Toc385349368"></a><a name="_Toc384800475"></a><a name="_Ref384138988"></a><a
name="_Ref384138787"></a><a name="_Ref384138602"></a><a name="_QoS_2:_Exactly"></a>4.3.3
QoS 2: Exactly once delivery</h3>

<p class=MsoNormal>This is the highest Quality of Service level, for use when
neither loss nor duplication of messages are acceptable. There is an increased
overhead associated with QoS 2.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A QoS 2 message has a Packet Identifier in its Variable
Header. <a href="#_Toc358219870">Section 2.2.1</a> provides more information
about Packet Identifiers. The receiver of a QoS 2 PUBLISH packet acknowledges
receipt with a two-step acknowledgement process. </p>

<p class=MsoNormal><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620281"><span style='background:yellow'>In
the QoS 2 delivery protocol, the sender</span></a>:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>MUST assign an unused
     Packet Identifier when it has a new Application Message to publish</span><span
     style='color:red'> [MQTT-4.3.3-1]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST send a PUBLISH packet
     containing this Packet Identifier with QoS 2 and DUP flag set to 0</span> <span
     style='color:red'>[MQTT-4.3.3-2]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST treat the PUBLISH
     packet as unacknowledged until it has received the corresponding PUBREC
     packet from the receiver</span> <span style='color:red'>[MQTT-4.3.3-3]</span>.
     Refer to <a href="#_Figure_4.3_">section 4.4</a> for a discussion of
     unacknowledged messages.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST send a PUBREL packet
     when it receives a PUBREC packet from the receiver with a Reason Code
     value less than 0x80. This PUBREL packet MUST contain the same Packet
     Identifier as the original PUBLISH packet</span> <span style='color:red'>[MQTT-4.3.3-4]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST treat the PUBREL
     packet as unacknowledged until it has received the corresponding PUBCOMP
     packet from the receiver</span> <span style='color:red'>[MQTT-4.3.3-5]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST NOT re-send the
     PUBLISH once it has sent the corresponding PUBREL packet</span> <span
     style='color:red'>[MQTT-4.3.3-6]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST NOT apply Message
     expiry if a PUBLISH packet has been sent</span> <span style='color:red'>[MQTT-4.3.3-7]</span>.</li>
</ul>

<p class=MsoNormal style='margin-left:.5in'><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'>The Packet Identifier becomes
available for reuse once the sender has received the PUBCOMP packet or a PUBREC
with a Reason Code of 0x80 or greater. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;text-autospace:none'><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'>Note that a sender is permitted
to send further PUBLISH packets with different Packet Identifiers while it is
waiting to receive acknowledgements, subject to flow control as described in <a
href="#_Flow_Control">section 4.9</a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;text-autospace:none'><span style='background:yellow'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620282"><span style='background:yellow'>In
the QoS 2 delivery protocol, the receiver</span></a>:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>MUST respond with a PUBREC
     containing the Packet Identifier from the incoming PUBLISH packet, having
     accepted ownership of the Application Message</span> <span
     style='color:red'>[MQTT-4.3.3-8]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>If it has sent a PUBREC
     with a Reason Code of 0x80 or greater, the receiver MUST treat any
     subsequent PUBLISH packet that contains that Packet Identifier as being a
     new Application Message</span> <span style='color:red'>[MQTT-4.3.3-9]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>Until it has received the
     corresponding PUBREL packet, the receiver MUST acknowledge any subsequent
     PUBLISH packet with the same Packet Identifier by sending a PUBREC. It
     MUST NOT cause duplicate messages to be delivered to any onward recipients
     in this case</span> <span style='color:red'>[MQTT-4.3.3-10]</span>. </li>
 <li class=MsoNormal><span style='background:yellow'>MUST respond to a PUBREL
     packet by sending a PUBCOMP packet containing the same Packet Identifier
     as the PUBREL</span> <span style='color:red'>[MQTT-4.3.3-11]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>After it has sent a
     PUBCOMP, the receiver MUST treat any subsequent PUBLISH packet that
     contains that Packet Identifier as being a new Application Message</span> <span
     style='color:red'>[MQTT-4.3.3-12]</span>.</li>
 <li class=MsoNormal><span style='background:yellow'>MUST continue the QoS 2
     acknowledgement sequence even if it has applied message expiry </span><span
     style='color:red'>[MQTT-4.3.3-13]</span>.</li>
</ul>

<p class=MsoNormal style='margin-left:.25in'><span style='background:yellow'>&nbsp;</span></p>

<h2><a name="_Toc385349369"></a><a name="_Toc3901238"></a><a
name="_Toc514848111"></a><a name="_Toc511988715"></a><a name="_Ref479925776"></a><a
name="_Ref479925735"></a><a name="_Figure_4.3_"></a><a
name="_Message_delivery_retry"></a>4.4 Message delivery retry</h2>

<p class=MsoNormal><span style='background:yellow'>When a Client reconnects
with Clean Start set to 0 and a session is present, both the Client and Server
MUST resend any unacknowledged PUBLISH packets (where QoS &gt; 0) and PUBREL
packets using their original Packet Identifiers<span style='color:black'>.</span><span
style='color:red'> </span>This is the only circumstance where a Client or Server
is REQUIRED to resend messages. Clients and Servers MUST NOT resend messages at
any other time</span> <span style='color:red'>[MQTT-4.4.0-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If PUBACK or PUBREC is
received containing a Reason Code of 0x80 or greater the corresponding PUBLISH
packet is treated as acknowledged, and MUST NOT be retransmitted</span> <span
style='color:red'>[MQTT-4.4.0-2]</span>. </p>

<p class=MsoNormal style='margin-left:.4in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>Figure 4.3  QoS 2 protocol flow
diagram, non-normative example</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=583
 style='width:437.4pt;margin-left:.5in;border-collapse:collapse;border:none'>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Sender Action</b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>MQTT Control
  Packet</b></p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Receiver Action</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Store message</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBLISH QoS 2, DUP=0<br>
  &lt;Packet Identifier&gt;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>----------&gt;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Store &lt;Packet Identifier&gt; then Initiate onward
  delivery of the Application Message<sup>1 </sup></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREC &lt;Packet Identifier&gt;&lt;Reason Code&gt;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&lt;----------</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Discard message, Store PUBREC received &lt;Packet Identifier&gt;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PUBREL &lt;Packet Identifier&gt;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>----------&gt;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Discard &lt;Packet Identifier&gt;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Send PUBCOMP &lt;Packet Identifier&gt;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>&nbsp;</b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&lt;----------</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
 <tr>
  <td width=199 valign=top style='width:149.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Discard stored state</p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  </td>
  <td width=204 valign=top style='width:153.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:.5in'><sup>&nbsp;</sup></p>

<p class=MsoNormal style='margin-left:.5in'><sup>1 </sup>The receiver does not
need to complete delivery of the Application Message before sending the PUBREC
or PUBCOMP. When its original sender receives the PUBREC packet, ownership of
the Application Message is transferred to the receiver. However, the receiver
needs to perform all checks for conditions which might result in a forwarding
failure (e.g. quota exceeded, authorization, etc.) before accepting ownership.
The receiver indicates success or failure using the appropriate Reason Code in
the PUBREC.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h2><a name="_Toc3901239"></a><a name="_Toc514848112"></a><a
name="_Toc511988716"></a><a name="_Toc473620284"></a><a name="_Toc471483734"></a><a
name="_Toc471282888"></a><a name="_Toc464635388"></a><a name="_Toc464548093"></a><a
name="_Toc462729205"></a><a name="_Toc442180917"></a><a name="_Toc385349840"></a><a
name="_Toc385349371"></a><a name="_Toc384800477">4.5 Message receipt</a></h2>

<p class=MsoNormal><span style='background:yellow'>When a Server takes
ownership of an incoming Application Message it MUST add it to the Session
State for those Clients that have matching Subscriptions</span> <span
style='color:red'>[MQTT-4.5.0-1]</span>. Matching rules are defined in <a
href="#_Topic_Names_and">section 4.7.</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Under normal circumstances Clients receive messages in
response to Subscriptions they have created. A Client could also receive
messages that do not match any of its explicit Subscriptions. This can happen
if the Server automatically assigned a subscription to the Client. A Client
could also receive messages while an UNSUBSCRIBE operation is in progress. <span
style='background:yellow'>The Client MUST acknowledge any Publish packet it
receives according to the applicable QoS rules regardless of whether it elects
to process the Application Message that it contains</span> <span
style='color:red'>[MQTT-4.5.0-2]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901240"></a><a name="_Toc514848113"></a><a
name="_Toc511988717"></a><a name="_Toc473620285"></a><a name="_Toc471483735"></a><a
name="_Toc471282889"></a><a name="_Toc464635389"></a><a name="_Toc464548094"></a><a
name="_Toc462729206"></a><a name="_Toc442180918"></a><a name="_Toc385349841"></a><a
name="_Toc385349372"></a><a name="_Toc384800478">4.6 Message ordering</a></h2>

<p class=MsoNormal>The following these rules apply to the Client when
implementing the protocol flows defined in <a href="#_Quality_of_Service">section
4.3.</a></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><span style='background:yellow'>When the Client re-sends
     any PUBLISH packets, it MUST re-send them in the order in which the
     original PUBLISH packets were sent (this applies to QoS 1 and QoS 2
     messages)</span> <span style='color:red'>[MQTT-4.6.0-1]</span></li>
 <li class=MsoNormal><span style='background:yellow'>The Client MUST send
     PUBACK packets in the order in which the corresponding PUBLISH packets
     were received (QoS 1 messages)</span> <span style='color:red'>[MQTT-4.6.0-2]</span></li>
 <li class=MsoNormal><span style='background:yellow'>The Client MUST send
     PUBREC packets in the order in which the corresponding PUBLISH packets
     were received (QoS 2 messages)</span> <span style='color:red'>[MQTT-4.6.0-3]</span></li>
 <li class=MsoNormal><span style='background:yellow'>The Client MUST send
     PUBREL packets in the order in which the corresponding PUBREC packets were
     received (QoS 2 messages)</span> <span style='color:red'>[MQTT-4.6.0-4]</span></li>
</ul>

<p class=MsoNormal style='margin-left:.25in'>&nbsp;</p>

<p class=MsoNormal>An Ordered Topic is a Topic where the Client can be certain
that the Application Messages in that Topic from the same Client and at the
same QoS are received are in the order they were published. <span
style='background:yellow'>When a Server processes a message that has been
published to an Ordered Topic, it MUST send PUBLISH packets to consumers (for
the same Topic and QoS) in the order that they were received from any given
Client </span><span style='color:red'>[MQTT-4.6.0-5]</span>. This is addition
to the rules listed above.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>By default, a Server MUST treat
every Topic as an Ordered Topic when it is forwarding messages on Non&#8209;shared
Subscriptions.</span><span style='color:red'> [MQTT-4.6.0-6]</span>. A Server MAY
provide an administrative or other mechanism to allow one or more Topics to not
be treated as an Ordered Topic.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620286"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The rules listed above ensure that
when a stream of messages is published and subscribed to an Ordered Topic with
QoS 1, the final copy of each message received by the subscribers will be in
the order that they were published. If the message is re-sent the duplicate
message can be received after one of the earlier messages is received. For
example, a publisher might send messages in the order 1,2,3,4 but the
subscriber might receive them in the order 1,2,3,2,3,4 if there is a network
disconnection after message 3 has been sent.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><span style='color:black'>If both
Client and Server set Receive Maximum to 1, they make sure that no more than
one message is in-flight at any one time. In this case no QoS 1 message will
be received after any later one even on re-connection. For example a subscriber
might receive them in the order 1,2,3,3,4 but not 1,2,3,2,3,4. </span>Refer to <a
href="#_Flow_Control">section 4.9</a> Flow Control for details of how the
Receive Maximum is used.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h2><a name="_Toc3901241"></a><a name="_Toc514848114"></a><a
name="_Toc511988718"></a><a name="_Toc473620287"></a><a name="_Toc471483736"></a><a
name="_Toc471282890"></a><a name="_Toc464635390"></a><a name="_Toc464548095"></a><a
name="_Toc462729207"></a><a name="_Toc442180919"></a><a name="_Toc385349842"></a><a
name="_Toc385349373"></a><a name="_Toc384800479"></a><a name="_Ref374621403"></a><a
name="_Topic_Names_and"></a>4.7 Topic Names and Topic Filters</h2>

<h3><a name="_Toc3901242"></a><a name="_Toc514848115"></a><a
name="_Toc511988719"></a><a name="_Toc473620288"></a><a name="_Toc471483737"></a><a
name="_Toc471282891"></a><a name="_Toc464635391"></a><a name="_Toc464548096"></a><a
name="_Toc462729208"></a><a name="_Toc442180920"></a><a name="_Toc385349843"></a><a
name="_Toc385349374"></a><a name="_Toc384800480"></a><a name="_Ref363571212"></a><a
name="_Topic_wildcards"></a>4.7.1 Topic wildcards</h3>

<p class=MsoNormal>The topic level separator is used to introduce structure
into the Topic Name. If present, it divides the Topic Name into multiple topic
levels.</p>

<p class=MsoNormal>A subscriptions Topic Filter can contain special wildcard
characters, which allow a Client to subscribe to multiple topics at once.</p>

<p class=MsoNormal><span style='background:yellow'>The wildcard characters can
be used in Topic Filters, but MUST NOT be used within a Topic Name</span> <span
style='color:red'>[MQTT-4.7.0-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901243"></a><a name="_Toc514848116"></a><a
name="_Toc511988720"></a><a name="_Toc473620289"></a><a name="_Toc471483738"></a><a
name="_Toc471282892"></a><a name="_Toc464635392"></a><a name="_Toc464548097"></a><a
name="_Toc462729209"></a><a name="_Toc385349375">4.7.1.1 Topic level separator</a></h4>

<p class=MsoNormal>The forward slash (/ U+002F) is used to separate each
level within a topic tree and provide a hierarchical structure to the Topic
Names. The use of the topic level separator is significant when either of the
two wildcard characters is encountered in Topic Filters specified by
subscribing Clients. Topic level separators can appear anywhere in a Topic
Filter or Topic Name. Adjacent Topic level separators indicate a zero-length
topic level. </p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901244"></a><a name="_Toc514848117"></a><a
name="_Toc511988721"></a><a name="_Toc473620290"></a><a name="_Toc471483739"></a><a
name="_Toc471282893"></a><a name="_Toc464635393"></a><a name="_Toc464548098"></a><a
name="_Toc462729210"></a><a name="_Toc385349376">4.7.1.2 Multi-level wildcard</a></h4>

<p class=MsoNormal>The number sign (# U+0023) is a wildcard character that
matches any number of levels within a topic. The multi-level wildcard
represents the parent and any number of child levels. <span style='background:
yellow'>The multi-level wildcard character MUST be specified either on its own
or following a topic level separator. In either case it MUST be the last
character specified in the Topic Filter</span> <span style='color:red'>[MQTT-4.7.1-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620291"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>For example, if a Client subscribes
to sport/tennis/player1/#, it would receive messages published using these Topic
Names:</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/tennis/player1</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/tennis/player1/ranking</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/tennis/player1/score/wimbledon</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620292"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/# also matches the singular sport, since # includes the
parent level. </p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span># is valid and will receive every Application Message</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/tennis/# is valid </p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/tennis# is not valid</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/tennis/#/ranking is not valid</p>

<p class=MsoNormal style='margin-left:.75in'>&nbsp;</p>

<h4><a name="_Toc3901245"></a><a name="_Toc514848118"></a><a
name="_Toc511988722"></a><a name="_Toc473620293"></a><a name="_Toc471483740"></a><a
name="_Toc471282894"></a><a name="_Toc464635394"></a><a name="_Toc464548099"></a><a
name="_Toc462729211"></a><a name="_Toc385349377">4.7.1.3 Single-level wildcard</a></h4>

<p class=MsoNormal>The plus sign (+ U+002B) is a wildcard character that
matches only one topic level. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The single-level wildcard
can be used at any level in the Topic Filter, including first and last levels.
Where it is used, it MUST occupy an entire level of the filter</span> <span
style='color:red'>[MQTT-4.7.1-2]</span>. It can be used at more than one level
in the Topic Filter and can be used in conjunction with the multi-level
wildcard.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620294"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>For example, sport/tennis/+
matches sport/tennis/player1 and sport/tennis/player2, but not
sport/tennis/player1/ranking. Also, because the single-level wildcard matches
only a single level, sport/+ does not match sport but it does match
sport/.</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>+ is valid</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>+/tennis/# is valid</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport+ is not valid</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>sport/+/player1 is valid</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>/finance matches +/+ and /+, but not +</p>

<p class=MsoNormal style='margin-left:1.0in'>&nbsp;</p>

<h3>4.7.2 <a name="_Toc3901246"></a><a name="_Toc514848119"></a><a
name="_Toc511988723"></a><a name="_Toc473620296"></a><a name="_Toc471483741"></a><a
name="_Toc471282895"></a><a name="_Toc464635395"></a><a name="_Toc464548100"></a><a
name="_Toc462729212"></a><a name="_Toc442180921"></a><a name="_Toc385349844"></a><a
name="_Toc385349378"></a><a name="_Toc384800481">Topics beginning with $</a></h3>

<p class=MsoNormal><span style='background:yellow'>The Server MUST NOT match
Topic Filters starting with a wildcard character (# or +) with Topic Names
beginning with a $ character</span> <span style='color:red'>[MQTT-4.7.2-1]</span>.
The Server SHOULD prevent Clients from using such Topic Names to exchange
messages with other Clients. Server implementations MAY use Topic Names that
start with a leading $ character for other purposes.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620297"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>$SYS/ has been widely adopted as a prefix to topics that contain
Server-specific information or control APIs</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Applications cannot use a topic with a leading $ character for
their own purposes</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620298"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A subscription to # will not receive any messages published to
a topic beginning with a $</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A subscription to +/monitor/Clients will not receive any
messages published to $SYS/monitor/Clients</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A subscription to $SYS/# will receive messages published to
topics beginning with $SYS/</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A subscription to $SYS/monitor/+ will receive messages
published to $SYS/monitor/Clients</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>For a Client to receive messages from topics that begin with
$SYS/ and from topics that dont begin with a $, it has to subscribe to both #
and $SYS/#</p>

<p class=MsoNormal style='margin-left:.75in'>&nbsp;</p>

<h3><a name="_Toc3901247"></a><a name="_Toc514848120"></a><a
name="_Toc511988724"></a><a name="_Toc473620299"></a><a name="_Toc471483742"></a><a
name="_Toc471282896"></a><a name="_Toc464635396"></a><a name="_Toc464548101"></a><a
name="_Toc462729213"></a><a name="_Toc442180922"></a><a name="_Toc385349845"></a><a
name="_Toc385349379"></a><a name="_Toc384800482">4.7.3 Topic semantic and usage</a></h3>

<p class=MsoNormal>The following rules apply to Topic Names and Topic Filters:</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>All Topic Names and Topic Filters
MUST be at least one character long</span> <span style='color:red'>[MQTT-4.7.3-1]</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Topic Names and Topic Filters are case sensitive </p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Topic Names and Topic Filters can include the space character</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A leading or trailing / creates a distinct Topic Name or Topic
Filter </p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A Topic Name or Topic Filter consisting only of the / character
is valid</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>Topic Names and Topic Filters
MUST NOT include the null character (Unicode U+0000)</span><span class=Refterm><span
style='font-family:"Arial,Arial Unicode MS",serif'> </span></span><a
href="#Unicode">[Unicode]</a><span class=MsoHyperlink> </span><span
style='color:red'>[MQTT-4.7.3-2]</span><a href="#Unicode"></a></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>Topic Names and Topic Filters are
UTF-8 Encoded Strings; they MUST NOT encode to more than 65,535 bytes</span> <span
style='color:red'>[MQTT-4.7.3-3]</span>. Refer to <a
href="#_UTF-8_Encoded_String">section 1.5.4</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>There is no limit to the number of levels in a Topic Name or
Topic Filter, other than that imposed by the overall length of a UTF-8 Encoded
String.</p>

<p class=MsoNormal><span style='font-size:7.0pt;color:black;background:white'>&nbsp;</span></p>

<p class=MsoNormal><span style='background:yellow'>When it performs
subscription matching the Server MUST NOT perform any normalization of Topic
Names or Topic Filters, or any modification or substitution of unrecognized
characters</span> <span style='color:red'>[MQTT-4.7.3-4]</span>. Each
non-wildcarded level in the Topic Filter has to match the corresponding level
in the Topic Name character for character for the match to succeed.</p>

<p class=MsoNormal><span style='font-size:7.0pt;color:black;background:white'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620300"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The UTF-8 encoding rules mean that
the comparison of Topic Filter and Topic Name could be performed either by
comparing the encoded UTF-8 bytes, or by comparing decoded Unicode characters</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620301"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>ACCOUNTS and Accounts are two different Topic Names</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Accounts payable is a valid Topic Name</p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>/finance is different from finance</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal>An Application Message is sent to each Client Subscription
whose Topic Filter matches the Topic Name attached to an Application Message.
The topic resource MAY be either predefined in the Server by an administrator
or it MAY be dynamically created by the Server when it receives the first
subscription or an Application Message with that Topic Name. The Server MAY
also use a security component to authorize particular actions on the topic
resource for a given Client.</p>

<p class=MsoNormal><a name="_Toc442180923"></a><a name="_Toc385349846"></a><a
name="_Toc385349380"></a><a name="_Toc384800483"></a><a name="_Ref381955543">&nbsp;</a></p>

<h2><a name="_Ref463221052"></a><a name="_Toc462729214"></a><a
name="_Toc3901248"></a><a name="_Toc514848121"></a><a name="_Toc511988725"></a><a
name="_Toc473620302"></a><a name="_Toc471483743"></a><a name="_Toc471282897"></a><a
name="_Toc464635397"></a><a name="_Toc464548102"></a><a name="_Ref463515087"></a><a
name="_Subscriptions"></a>4.8 Subscriptions</h2>

<p class=MsoNormal>MQTT provides two kinds of Subscription, Shared and Non&#8209;shared.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>In earlier versions of MQTT all
Subscriptions are Non&#8209;shared.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<h3><a name="_Toc473620303"></a><a name="_Toc471483744"></a><a
name="_Toc471282898"></a><a name="_Toc464635398"></a><a name="_Toc464548103"></a><a
name="_Toc3901249"></a><a name="_Toc514848122"></a><a name="_Toc511988726">4.8.1
Non&#8209;shared Subscriptions</a></h3>

<p class=MsoNormal>A Non&#8209;shared Subscription is associated only with the
MQTT Session that created it. Each Subscription includes a Topic Filter,
indicating the topic(s) for which messages are to be delivered on that Session,
and Subscription Options. The Server is responsible for collecting messages
that match the filter and transmitting them on the Session's MQTT connection if
and when that connection is active.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Session cannot have more than one Non&#8209;shared
Subscription with the same Topic Filter, so the Topic Filter can be used as a key
to identify the subscription within that Session.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If there are multiple Clients, each with its own Non&#8209;shared
Subscription to the same Topic, each Client gets its own copy of the
Application Messages that are published on that Topic. This means that the Non&#8209;shared
Subscriptions cannot be used to load-balance Application Messages across
multiple consuming Clients as in such cases every message is delivered to every
subscribing Client.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901250"></a><a name="_Toc514848123"></a><a
name="_Toc511988727"></a><a name="_Toc473620304"></a><a name="_Toc471483745"></a><a
name="_Toc471282899"></a><a name="_Toc464635399"></a><a name="_Toc464548104"></a><a
name="_Shared_Subscriptions"></a>4.8.2 Shared Subscriptions</h3>

<p class=MsoNormal>A Shared Subscription can be associated with multiple
subscribing MQTT Sessions. Like a Non&#8209;shared Subscription, it has a Topic
Filter and Subscription Options; however, a publication that matches its Topic
Filter is only sent to one of its subscribing Sessions. Shared Subscriptions
are useful where several consuming Clients share the processing of the
publications in parallel.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Shared Subscription is identified using a special style of
Topic Filter. The format of this filter is:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-family:"Courier New"'>$share/{ShareName}/{filter}</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>$share is a literal string that marks the Topic Filter as being
a Shared Subscription Topic Filter.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>{ShareName} is a character string that does not include
&quot;/&quot;, &quot;+&quot; or &quot;#&quot;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>{filter} The remainder of the string has the same syntax and
semantics as a Topic Filter in a non-shared subscription. Refer to <a
href="#_Topic_Names_and">section 4.7</a>.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>A Shared Subscription's
Topic Filter MUST start with $share/ and MUST contain a ShareName that is at
least one character long</span> <span style='color:red'>[MQTT-4.8.2-1]</span>. <span
style='background:yellow'>The ShareName MUST NOT contain the characters
&quot;/&quot;, &quot;+&quot; or &quot;#&quot;, but MUST be followed by a
&quot;/&quot; character. This &quot;/&quot; character MUST be followed by a
Topic Filter</span> <span style='color:red'>[MQTT-4.8.2-2]</span> as described
in <a href="#_Topic_Names_and">section 4.7</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620305"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Shared Subscriptions are defined at
the scope of the MQTT Server, rather than of a Session. A ShareName is included
in the Shared Subscription's Topic Filter so that there can be more than one
Shared Subscription on a Server that has the same {filter} component. Typically,
applications use the ShareName to represent the group of subscribing Sessions
that are sharing the subscription.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>Examples:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Shared subscriptions &quot;$share/consumer1/sport/tennis/+&quot;
and &quot;$share/consumer2/sport/tennis/+&quot; are distinct shared
subscriptions and so can be associated with different groups of Sessions. Both
of them match the same topics as a non-shared subscription to sport/tennis/+ .</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in'>If a message were
to be published that matches sport/tennis/+ then a copy would be sent to
exactly one of the Sessions subscribed to $share/consumer1/sport/tennis/+ , a
separate copy of the message would be sent to exactly one of the Sessions
subscribed to $share/consumer2/sport/tennis/+ and further copies would be sent
to any Clients with non-shared subscriptions to sport/tennis/+</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.75in'>&nbsp;</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Shared subscription &quot;$share/consumer1//finance&quot; matches
the same topics as a non-shared subscription to /finance.<br>
<br>
Note that &quot;$share/consumer1//finance&quot; and &quot;$share/consumer1/sport/tennis/+&quot;
are distinct shared subscriptions, even though they have the same ShareName.
While they might be related in some way, no specific relationship between them
is implied by them having the same ShareName.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Shared Subscription is created by using a Shared
Subscription Topic Filter in a SUBSCRIBE request. So long as only one Session
subscribes to a particular Shared Subscription, the shared subscription behaves
like a non-shared subscription, except that:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The $share and {ShareName} portions of the Topic Filter are not
taken into account when matching against publications.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>No Retained Messages are sent to the Session when it first
subscribes. It will be sent other matching messages as they are published.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in'>&nbsp;</p>

<p class=MsoNormal>Once a Shared Subscription exists, it is possible for other
Sessions to subscribe with the same Shared Subscription Topic Filter. The new Session
is associated with the Shared Subscription as an additional subscriber.
Retained messages are not sent to this new subscriber. Each subsequent
Application Message that matches the Shared Subscription is now sent to one and
only one of the Sessions that are subscribed to the Shared Subscription.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Session can explicitly detach itself from a Shared
Subscription by sending an UNSUBSCRIBE Packet that contains the full Shared
Subscription Topic Filter. Sessions are also detached from the Shared Subscription
when they terminate.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Shared Subscription lasts for as long as it is associated
with at least one Session (i.e. a Session that has issued a successful
SUBSCRIBE request to its Topic Filter and that has not completed a
corresponding UNSUBSCRIBE). A Shared Subscription survives when the Session
that originally created it unsubscribes, unless there are no other Sessions
left when this happens. A Shared Subscription ends, and any undelivered
messages associated with it are deleted, when there are no longer any Sessions
subscribed to it.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620306">Notes on Shared Subscriptions</a></p>

<p class=MsoListParagraphCxSpFirst style='margin-top:4.0pt;margin-right:0in;
margin-bottom:6.0pt;margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>If there's more than one Session subscribed to the Shared
Subscription, the Server implementation is free to choose, on a message by
message basis, which Session to use and what criteria it uses to make this
selection.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Different subscribing Clients are permitted to ask for different
Requested QoS levels in their SUBSCRIBE packets. The Server decides which
Maximum QoS to grant to each Client, and it is permitted to grant different
Maximum QoS levels to different subscribers. When sending an Application
Message to a Client, <span style='background:yellow'>the Server MUST respect
the granted QoS for the Client's subscription</span> <span style='color:red'>[MQTT-4.8.2-3]</span>,
in the same that it does when sending a message to a &#8209;Subscriber.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>If the Server is in the process of sending a QoS 2 message to its
chosen subscribing Client and the connection to the Client breaks before
delivery is complete<span style='background:yellow'>, the Server MUST complete
the delivery of the message to that Client when it reconnects</span> <span
style='color:red'>[MQTT-4.8.2-4] </span>as described in <a
href="#_QoS_2:_Exactly">section 4.3.3</a>. <span style='background:yellow'>If
the Client's Session terminates before the Client reconnects, the Server MUST
NOT send the Application Message to any other subscribed Client</span> <span
style='color:red'>[MQTT-4.8.2-5]</span>.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>If the Server is in the process of sending a QoS 1 message to its
chosen subscribing Client and the connection to that Client breaks before the Server
has received an acknowledgement from the Client, the Server MAY wait for the
Client to reconnect and retransmit the message to that Client. If the Client'sSession
terminates before the Client reconnects, the Server SHOULD send the Application
Message to another Client that is subscribed to the same Shared Subscription.
It MAY attempt to send the message to another Client as soon as it loses its
connection to the first Client.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>If a Client responds with a PUBACK
or PUBREC containing a Reason Code of 0x80 or greater to a PUBLISH packet from
the Server, the Server MUST discard the Application Message and not attempt to
send it to any other Subscriber</span> <span style='color:red'>[MQTT-4.8.2-6]</span>.<br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A Client is permitted to submit a second SUBSCRIBE request to a
Shared Subscription on a Session that's already subscribed to that Shared
Subscription. For example, it might do this to change the Requested QoS for its
subscription or because it was uncertain that the previous subscribe completed
before the previous connection was closed. This does not increase the number of
times that the Session is associated with the Shared Subscription, so the Session
will leave the Shared Subscription on its first UNSUBSCRIBE.<br>
<br>
</p>

<p class=MsoListParagraphCxSpLast style='margin-top:4.0pt;margin-right:0in;
margin-bottom:6.0pt;margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Each Shared Subscription is independent from any other. It is possible
to have two Shared Subscriptions with overlapping filters. In such cases a
message that matches both Shared Subscriptions will be processed separately by
both of them. If a Client has a Shared Subscription and a Non&#8209;shared Subscription
and a message matches both of them, the Client will receive a copy of the
message by virtue of it having the Non&#8209;shared Subscription. A second copy
of the message will be delivered to one of the subscribers to the Shared
Subscription, and this could result in a second copy being sent to this Client.</p>

<p class=MsoNormal style='margin-bottom:6.0pt'>&nbsp;</p>

<h2><a name="_Toc3901251"></a><a name="_Toc514848124"></a><a
name="_Toc511988728"></a><a name="_Ref485800075"></a><a name="_Ref485719841"></a><a
name="_Ref484156252"></a><a name="_Ref479241401"></a><a name="_Toc473620307"></a><a
name="_Toc471483746"></a><a name="_Toc471282900"></a><a name="_Toc464635400"></a><a
name="_Toc464548105"></a><a name="_Flow_Control"></a>4.9 Flow Control</h2>

<p class=MsoNormal><a name="_Hlk484158938">Clients and Servers control the
number of unacknowledged PUBLISH packets they receive by using a Receive
Maximum value as described in </a><a href="#_Receive_Maximum">section
3.1.2.11.4</a> and <a href="#_Receive_Maximum_1">section 3.2.2.3.2</a>. The Receive
Maximum establishes a send quota which is used to limit the number of PUBLISH
QOS &gt; 0 packets which can be sent without receiving an PUBACK (for QoS 1) or
PUBCOMP (for QoS 2). The PUBACK and PUBCOMP replenish the quota in the manner
described below. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client or Server MUST
set its initial send quota to a non-zero value not exceeding the Receive
Maximum</span> <span style='color:red'>[MQTT-4.9.0-1]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>Each time the Client or
Server sends a PUBLISH packet at QoS &gt; 0, it decrements the send quota. If
the send quota reaches zero, the Client or Server MUST NOT send any more
PUBLISH packets with QoS &gt; 0</span> <span style='color:red'>[MQTT-4.9.0-2]</span>.
It MAY continue to send PUBLISH packets with QoS 0, or it MAY choose to suspend
sending these as well. <span style='background:yellow'>The Client and Server
MUST continue to process and respond to all other MQTT Control Packets even if
the quota is zero</span> <span style='color:red'>[MQTT-4.9.0-3]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The send quota is incremented by 1: </p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Each time a PUBACK or PUBCOMP packet is received, regardless of
whether the PUBACK or PUBCOMP carried an error code. </p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Each time a PUBREC packet is received with a Return Code of 0x80
or greater. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The send quota is not incremented if it is already equal to
the initial send quota. The attempt to increment above the initial send quota
might be caused by the re-transmission of a PUBREL packet after a new Network
Connection is established. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <a href="#_PUBLISH_Actions">section 3.3.4</a> for a
description of how Clients and Servers react if they are sent more PUBLISH
packets than the Receive Maximum allows. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The send quota and Receive Maximum value are not preserved
across Network Connections, and are re-initialized with each new Network
Connection as described above. They are not part of the session state.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc462729215"></a><a name="_Toc3901252"></a><a
name="_Toc514848125"></a><a name="_Toc511988729"></a><a name="_Toc473620308"></a><a
name="_Toc471483747"></a><a name="_Toc471282901"></a><a name="_Toc464635401"></a><a
name="_Toc464548106"></a><a name="_Ref463275433"></a><a
name="_Request_/_Response"></a>4.10 Request / Response</h2>

<p class=MsoNormal><a name="_Toc464564287"></a>Some applications or standards
might wish to run a Request/Response interaction over MQTT. This version of
MQTT includes three properties that can be used for this purpose:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Response Topic, described in <a href="#_Response_Topic">section
3.3.2.3.5</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Correlation Data, described in <a href="#_Correlation_Data">section
3.3.2.3.6</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Request Response Information, described in <a
href="#_Request_Response_Information">section 3.1.2.11.7</a></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Response Information, described in <a
href="#_Response_Information">section 3.2.2.3.14</a></p>

<p class=MsoNormal>The following non-normative sections describe how these
properties can be used. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Client sends a Request Message by publishing an
Application Message which has a Response Topic set as described in <a
href="#_Toc463595993">section 3.3.2.3.5</a>. The Request can include a
Correlation Data property as described in <a href="#_Correlation_Data">section
3.3.2.3.6</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901253"></a><a name="_Toc514848126"></a><a
name="_Toc511988730"></a><a name="_Toc473620309"></a><a name="_Toc471483748"></a><a
name="_Toc471282902">4.10.1 Basic Request Response (non-normative)</a></h3>

<p class=MsoNormal>Request/Response interaction proceeds as follows:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:39.0pt;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>An MQTT
Client (the Requester) publishes a Request Message to a topic. A Request
Message is an Application Message with a Response Topic.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:39.0pt;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Another
MQTT Client (the Responder) has subscribed to a Topic Filter which matches the
Topic Name used when the Request Message was published. As a result, it receives
the Request Message. There could be multiple Responders subscribed to this
Topic Name or there could be none.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:39.0pt;text-indent:-.25in'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The
Responder takes the appropriate action based on the Request Message, and then
publishes a Response Message to the Topic Name in the Response Topic property
that was carried in the Request Message.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:39.0pt;text-indent:-.25in'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>In typical
usage the Requester has subscribed to the Response Topic and thereby receives
the Response Message. However, some other Client might be subscribed to the
Response Topic in which case the Response Message will also be received and
processed by that Client. As with the Request Message, the topic on which the
Response Message is sent could be subscribed to by multiple Clients, or by
none.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Request Message contains a Correlation Data property,
the Responder copies this property into the Response Message and this is used
by the receiver of the Response Message to associate the Response Message with
the original request. The Response Message does not include a Response Topic
property.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The MQTT Server forwards the Response Topic and Correlation
Data Property in the Request Message and the Correlation Data in the Response
Message. The Server treats the Request Message and the Response Message like
any other Application Message.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Requester normally subscribes to the Response Topic
before publishing a Request Message. If there are no subscribers to the
Response Topic when the Response Message is sent, the Response Message will not
be delivered to any Client.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Request Message and Response Message can be of any QoS,
and the Responder can be using a Session with a non-zero Session Expiry
Interval. It is common to send Request Messages at QoS 0 and only when the
Responder is expected to be connected. However, this is not necessary.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Responder can use a Shared Subscription to allow for a
pool of responding Clients. Note however that when using Shared Subscriptions
that the order of message delivery is not guaranteed between multiple Clients.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>It is the responsibility of the Requester to make sure it
has the necessary authority to publish to the request topic, and to subscribe
to the Topic Name that it sets in the Response Topic property. It is the
responsibility of the Responder to make sure it has the authority to subscribe
to the request topic and publish to the Response Topic. While topic
authorization is outside of this specification, it is recommended that Servers
implement such authorization. </p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901254"></a><a name="_Toc514848127"></a><a
name="_Toc511988731"></a><a name="_Toc473620310"></a><a name="_Toc471483749"></a><a
name="_Toc471282903">4.10.2 Determining a Response Topic value (non-normative)</a></h3>

<p class=MsoNormal>Requesters can determine a Topic Name to use as their
Response Topic in any manner they choose including via local configuration. To
avoid clashes between different Requesters, it is desirable that the Response
Topic used by a Requester Client be unique to that Client. As the Requester and
Responder commonly need to be authorized to these topics, it can be an
authorization challenge to use a random Topic Name.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>To help with this problem, this specification defines a
property in the CONNACK packet called Response Information. The Server can use
this property to guide the Client in its choice for the Response Topic to use.
This mechanism is optional for both the Client and the Server. At connect time,
the Client requests that the Server send a Response Information by setting the
Request Response Information property in the CONNECT packet. This causes the
Server to insert a Response Information property (a UTF-8 Encoded String) sent
in the CONNACK packet. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This specification does not define the contents of the
Response Information but it could be used to pass a globally unique portion of
the topic tree which is reserved for that Client for at least the lifetime of
its Session. Using this mechanism allows this configuration to be done once in
the Server rather than in each Client.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620311">Refer to </a><a
href="#_Response_Information">section 3.1.2.11.7</a> for the definition of the
Response Information.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901255"></a><a name="_Toc514848128"></a><a
name="_Toc511988732"></a><a name="_Toc473620312"></a><a name="_Toc471483750"></a><a
name="_Toc471282904"></a><a name="_Toc464635402"></a><a name="_Toc464548107"></a><a
name="_Ref464221156"></a><a name="_Server_redirection"></a>4.11 Server redirection</h2>

<p class=MsoNormal>A Server can request that the Client uses another Server by
sending CONNACK or DISCONNECT with Reason Codes 0x9C (Use another server), or
0x9D (Server moved) as described in <a href="#S4_13_Errors">section 4.13</a>.
When sending one of these Reason Codes, the Server MAY also include a Server
Reference property to indicate the location of the Server or Servers the Client
SHOULD use.</p>

<p class=MsoNormal><a name="_Ref463302325">&nbsp;</a></p>

<p class=MsoNormal>The Reason Code 0x9C (Use another server) specifies that the
Client SHOULD temporarily switch to using another Server. The other Server is
either already known to the Client, or is specified using a Server Reference.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Reason Code 0x9D (Server moved) specifies that the
Client SHOULD permanently switch to using another Server. The other Server is
either already known to the Client, or is specified using a Server Reference.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server Reference is a UTF-8 Encoded String. The value of
this string is a space separated list of references. The format of references
is not specified here. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620313"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>It is recommended that each
reference consists of a name optionally followed by a colon and a port number.
If the name contains a colon the name string can be enclosed within square
brackets ([ and ]). A name enclosed by square brackets cannot contain the
right square bracket (]) character. This is used to represent an IPv6 literal
address which uses colon separators. <a name="_Toc473620314">This is a
simplified version of an URI authority as described in </a><a href="#RFC3986">[RFC3986]</a>.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>The name within a Server Reference
commonly represents a host name, DNS name <a href="#RFC1035">[RFC1035]</a>, SRV
name <a href="#RFC2782">[RFC2782]</a> , or literal IP address. The value
following the colon separator is commonly a port number in decimal. This is not
needed where the port information comes from the name resolution (such as with
SRV) or is defaulted.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><b>Non-normative comment</b></p>

<p class=MsoNormal style='margin-left:.5in'>If multiple references are given,
the expectation is that that Client will choose one of them.</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620315"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>Examples of the Server Reference
are:</p>

<p class=MsoListParagraphCxSpFirst><span style='font-family:"Courier New"'>myserver.xyz.org
</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Courier New"'>myserver.xyz.org:8883</span></p>

<p class=MsoListParagraphCxSpLast><span style='font-family:"Courier New"'>10.10.151.22:8883
[fe80::9610:3eff:fe1c]:1883</span></p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal>The Server is allowed to not ever send a Server Reference,
and the Client is allowed to ignore a Server Reference. This feature can be
used to allow for load balancing, Server relocation, and Client provisioning to
a Server.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901256"></a><a name="_Toc514848129"></a><a
name="_Toc511988733"></a><a name="_Toc473620316"></a><a name="_Toc471483751"></a><a
name="_Toc471282905"></a><a name="_Toc464635403"></a><a name="_Toc464548108"></a><a
name="_Ref464248960"></a><a name="_Enhanced_authentication"></a>4.12 Enhanced
authentication</h2>

<p class=MsoNormal>The MQTT CONNECT packet supports basic authentication of a
Network Connection using the User Name and Password fields. While these fields
are named for a simple password authentication, they can be used to carry other
forms of authentication such as passing a token as the Password.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Enhanced authentication extends this basic authentication to
include challenge / response style authentication. It might involve the
exchange of AUTH packets between the Client and the Server after the CONNECT
and before the CONNACK packets.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>To begin an enhanced authentication, the Client includes an
Authentication Method in the CONNECT packet. This specifies the authentication
method to use. <span style='background:yellow'>If the Server does not support
the Authentication Method supplied by the Client, it MAY send a CONNACK with a
Reason Code of 0x8C (Bad authentication method) or 0x87 (Not Authorized) as
described in </span><a href="#S4_13_Errors"><span style='background:yellow'>section
4.13</span></a><span style='background:yellow'> and MUST close the Network
Connection </span><span style='color:red'>[MQTT-4.12.0-1]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Authentication Method is an agreement between the Client
and Server about the meaning of the data sent in the Authentication Data and
any of the other fields in CONNECT, and the exchanges and processing needed by
the Client and Server to complete the authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620317"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The Authentication Method is commonly
a SASL mechanism, and using such a registered name aids interchange. However,
the Authentication Method is not constrained to using registered SASL
mechanisms.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Authentication Method selected by the Client
specifies that the Client sends data first, the Client SHOULD include an
Authentication Data property in the CONNECT packet. This property can be used
to provide data as specified by the Authentication Method. The contents of the
Authentication Data are defined by the authentication method.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the Server requires
additional information to complete the authentication, it can send an AUTH
packet to the Client. This packet MUST contain a Reason Code of 0x18 (Continue
authentication)</span> <span style='color:red'>[MQTT-4.12.0-2]</span>. If the
authentication method requires the Server to send authentication data to the
Client, it is sent in the Authentication Data.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The Client responds to an
AUTH packet from the Server by sending a further AUTH packet. This packet MUST
contain a Reason Code of 0x18 (Continue authentication)</span> <span
style='color:red'>[MQTT-4.12.0-3]</span>. If the authentication method requires
the Client to send authentication data for the Server, it is sent in the Authentication
Data. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client and Server exchange AUTH packets as needed until
the Server accepts the authentication by sending a CONNACK with a Reason Code
of 0. If the acceptance of the authentication requires data to be sent to the
Client, it is sent in the Authentication Data. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Client can close the connection at any point in this
process. It MAY send a DISCONNECT packet before doing so. <span
style='background:yellow'>The Server can reject the authentication at any point
in this process. It MAY send a CONNACK with a Reason Code of 0x80 or above as
described in </span><a href="#S4_13_Errors"><span style='background:yellow'>section
4.13</span></a><span style='background:yellow'>, and MUST close the Network
Connection</span> <span style='color:red'>[MQTT-4.12.0-4]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the initial CONNECT
packet included an Authentication Method property then all AUTH packets, and
any successful CONNACK packet MUST include an Authentication Method Property
with the same value as in the CONNECT packet</span> <span style='color:red'>[MQTT-4.12.0-5]</span>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The implementation of enhanced authentication is OPTIONAL
for both Clients and Servers. <span style='background:yellow'>If the Client
does not include an Authentication Method in the CONNECT, the Server MUST NOT send
an AUTH packet, and it MUST NOT send an Authentication Method in the CONNACK
packet</span> <span style='color:red'>[MQTT-4.12.0-6]</span>. <span
style='background:yellow'>If the Client does not include an Authentication
Method in the CONNECT, the Client MUST NOT send an AUTH packet to the Server</span>
<span style='color:red'>[MQTT-4.12.0-7]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Client does not include an Authentication Method in
the CONNECT packet, the Server SHOULD authenticate using some or all of the
information in the CONNECT packet, TLS session, and Network Connection.</p>

<p class=MsoNormal style='margin-left:31.5pt'><a name="_Toc473620318"></a><a
name="_Toc464635404"></a><a name="_Toc464548109"><b>&nbsp;</b></a></p>

<p class=MsoNormal style='margin-left:31.5pt'><b>Non-normative example showing
a SCRAM challenge</b><b> </b></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Client to Server: CONNECT Authentication
Method=&quot;SCRAM-SHA-1&quot; Authentication Data=client-first-data </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Server to Client: AUTH rc=0x18 Authentication
Method=&quot;SCRAM-SHA-1&quot; Authentication Data=server-first-data</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Client to Server AUTH rc=0x18 Authentication Method=&quot;SCRAM-SHA-1&quot;
Authentication Data=client-final-data</p>

<p class=MsoListParagraphCxSpLast style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Server to Client CONNACK rc=0 Authentication
Method=&quot;SCRAM-SHA-1&quot; Authentication Data=server-final-data</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:31.5pt'><a name="_Toc473620319"></a><a
name="_Toc464635405"></a><a name="_Toc464548110"><b>Non-normative example
showing a Kerberos challenge</b></a><b> </b></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Client to Server CONNECT Authentication Method=&quot;GS2-KRB5&quot;
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Server to Client AUTH rc=0x18 Authentication Method=&quot;GS2-KRB5&quot;
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Client to Server AUTH rc=0x18 Authentication Method=&quot;GS2-KRB5&quot;
Authentication Data=initial context token</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Server to Client AUTH rc=0x18 Authentication Method=&quot;GS2-KRB5&quot;
Authentication Data=reply context token</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Client to Server AUTH rc=0x18 Authentication
Method=&quot;GS2-KRB5&quot; </p>

<p class=MsoListParagraphCxSpLast style='margin-left:49.5pt;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Server to Client CONNACK rc=0 Authentication Method=&quot;GS2-KRB5&quot;
Authentication Data=outcome of authentication</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901257"></a><a name="_Toc514848130"></a><a
name="_Toc511988734"></a><a name="_Toc473620320"></a><a name="_Toc471483752"></a><a
name="_Toc471282906"></a><a name="_Re-authentication"></a>4.12.1 Re-authentication</h3>

<p class=MsoNormal><span style='background:yellow'>If the Client supplied an
Authentication Method in the CONNECT packet it can initiate a re-authentication
at any time after receiving a CONNACK. It does this by sending an AUTH packet
with a Reason Code of 0x19 (Re-authentication). The Client MUST set the Authentication
Method to the same value as the Authentication Method originally used to
authenticate the Network Connection</span> <span style='color:red'>[MQTT-4.12.1-1]</span>.
If the authentication method requires Client data first, this AUTH packet
contains the first piece of authentication data as the Authentication Data. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Server responds to this re-authentication request by
sending an AUTH packet to the Client with a Reason Code of 0x00 (Success) to
indicate that the re-authentication is complete, or a Reason Code of 0x18
(Continue authentication) to indicate that more authentication data is needed.
The Client can respond with additional authentication data by sending an AUTH
packet with a Reason Code of 0x18 (Continue authentication). This flow
continues as with the original authentication until the re-authentication is complete
or the re-authentication fails.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>If the re-authentication
fails, the Client or Server SHOULD send DISCONNECT with an appropriate Reason
Code as described in </span><a href="#S4_13_Errors"><span style='background:
yellow'>section 4.13</span></a><span style='background:yellow'>, and MUST close
the Network Connection</span> <span style='color:red'>[MQTT-4.12.1-2]</span>. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>During this re-authentication sequence, the flow of other
packets between the Client and Server can continue using the previous
authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'><a name="_Toc473620321"><b>Non-normative
comment</b></a></p>

<p class=MsoNormal style='margin-left:.5in'>The Server might limit the scope of
the changes the Client can attempt in a re-authentication by rejecting the
re-authentication. For instance, if the Server does not allow the User Name to
be changed it can fail any re-authentication attempt which changes the User
Name.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901258"></a><a name="_Toc514848131"></a><a
name="_Toc511988735"></a><a name="_Toc473620322"></a><a name="_Toc471483753"></a><a
name="_Toc471282907"></a><a name="_Toc464635406"></a><a name="_Toc464548111"></a><a
name="_Ref464489170"></a><a name="_Ref464489169"></a><a name="S4_13_Errors"></a><a
name="_Handling_errors"></a>4.13 Handling errors</h2>

<h3><a name="_Toc3901259"></a><a name="_Toc514848132"></a><a
name="_Toc511988736"></a><a name="_Ref477790493">4.13.1 Malformed Packet and
Protocol Errors</a></h3>

<p class=MsoNormal>Definitions of Malformed Packet and Protocol Errors are
contained in <a href="#_Terminology">section 1.2</a> Terminology, some but not
all, of these error cases are noted throughout the specification. The rigor with
which a Client or Server checks an MQTT Control Packet it has received will be
a compromise between: </p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The size of the Client or Server implementation. </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The capabilities that the implementation supports.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The degree to which the receiver trusts the sender to send
correct MQTT Control Packets.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The degree to which the receiver trusts the network to deliver
MQTT Control Packets correctly.</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The consequences of continuing to process a packet that is
incorrect. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the sender is compliant with this specification it will
not send Malformed Packets or cause Protocol Errors. However, if a Client sends
MQTT Control Packets before it receives CONNACK, it might cause a Protocol
Error because it made an incorrect assumption about the Server capabilities. Refer
<a href="#_CONNECT_Actions">to section 3.1.4</a> CONNECT Actions.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The Reason Codes used for Malformed Packet and Protocol
Errors are: </p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x81 Malformed Packet</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x82 Protocol Error</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x93 Receive Maximum exceeded</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x95 Packet too large</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x9A Retain not supported</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x9B QoS not supported</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0x9E Shared Subscriptions not supported</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0xA1 Subscription Identifiers not supported</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>0xA2 Wildcard Subscriptions not supported</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>When a Client detects a Malformed Packet or Protocol Error, and
a Reason Code is given in the specification, it SHOULD close the Network
Connection. In the case of an error in a AUTH packet it MAY send a DISCONNECT packet
containing the reason code, before closing the Network Connection. In the case
of an error in any other packet it SHOULD send a DISCONNECT packet containing
the reason code before closing the Network Connection. Use Reason Code 0x81
(Malformed Packet) or 0x82 (Protocol Error) unless a more specific Reason Code
has been defined in section 3.14.2.1 <a href="#_Disconnect_Reason_Code">Disconnect
Reason Code</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>When a Server detects a
Malformed Packet or Protocol Error, and a Reason Code is given in the
specification, it MUST close the Network Connection</span> <span
style='color:red'>[MQTT-4.13.1-1]</span>. In the case of an error in a CONNECT
packet it MAY send a CONNACK packet containing the Reason Code, before closing
the Network Connection. In the case of an error in any other packet it SHOULD
send a DISCONNECT packet containing the Reason Code before closing the Network
Connection. Use Reason Code 0x81 (Malformed Packet) or 0x82 (Protocol Error)
unless a more specific Reason Code has been defined in<a
href="#_Connect_Reason_Code"> section 3.2.2.2 - Connect Reason Code</a> or in
section <a href="#_Disconnect_Return_codes">3.14.2.1  Disconnect Reason Code</a>.
There are no consequences for other Sessions.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If either the Server or Client omits to check some feature
of an MQTT Control Packet, it might fail to detect an error, consequently it
might allow data to be damaged.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901260"></a><a name="_Toc514848133"></a><a
name="_Toc511988737">4.13.2 Other errors</a></h3>

<p class=MsoNormal>Errors other than Malformed Packet and Protocol Errors
cannot be anticipated by the sender because the receiver might have constraints
which it has not communicated to the sender. A receiving Client or Server might
encounter a transient error, such as a shortage of memory, that prevents
successful processing of an individual MQTT Control Packet. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Acknowledgment packets PUBACK, PUBREC, PUBREL, PUBCOMP,
SUBACK, UNSUBACK with a Reason Code of 0x80 or greater indicate that the
received packet, identified by a Packet Identifier, was in error. There are no
consequences for other Sessions or other Packets flowing on the same Session. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='background:yellow'>The CONNACK and DISCONNECT
packets allow a Reason Code of 0x80 or greater to indicate that the Network
Connection will be closed. If a Reason Code of 0x80 or greater is specified,
then the Network Connection MUST be closed whether or not the CONNACK or
DISCONNECT is sent</span> <span style='color:red'>[MQTT-4.13.2-1]</span>.
Sending of one of these Reason Codes does not have consequence for any other
Session.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Control Packet contains multiple errors the receiver
of the Packet can validate the Packet in any order and take the appropriate
action for any of the errors found.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Refer to <span class=MsoHyperlink>section </span><span class=MsoHyperlink>5.4.9</span><span style='color:black'> for information about
handling Disallowed Unicode code points.</span></p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc3901261"></a><a name="_Toc514848134"></a><a
name="_Toc511988738"></a><a name="_Toc473620323"></a><a name="_Toc471483754"></a><a
name="_Toc471282908"></a><a name="_Ref467854993"></a><a name="_Ref467854942"></a><a
name="_Ref467854938"></a><a name="_Toc464635407"></a><a name="_Toc464548112"></a><a
name="_Ref463518718"></a><a name="_Ref463518670"></a><a name="_Ref463518659"></a><a
name="_Toc462729216"></a><a name="_Security"></a>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Security (non-normative)</h1>

</div>

<h2><a name="_Toc3901262"></a><a name="_Toc514848135"></a><a
name="_Toc511988739"></a><a name="_Toc473620324"></a><a name="_Toc471483755"></a><a
name="_Toc471282909"></a><a name="_Toc464635408"></a><a name="_Toc464548113"></a><a
name="_Toc462729217"></a><a name="_Toc442180925"></a><a name="_Toc385349848"></a><a
name="_Toc385349382"></a><a name="_Toc384800485">5.1 Introduction</a></h2>

<p class=MsoNormal>MQTT is a transport protocol specification for message
transmission, allowing implementers a choice of network, privacy,
authentication and authorization technologies. Since the exact security
technologies chosen will be context specific, it is the implementer's responsibility
to include the appropriate features as part of their design.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>MQTT Implementations will likely need to keep pace with an
evolving security landscape.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This Chapter provides general implementation guidance so as
not to restrict choices available and is therefore non-normative. This should
not detract from its importance.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>It is strongly recommended that Server implementations that
offer TLS<span style='font-size:10.5pt;color:#333333;background:white'> </span><a
href="#RFC5246">[RFC5246]</a><span class=MsoHyperlink> </span>should use TCP
port 8883 (IANA service name: secure-mqtt).</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>There are a number of threats that solution providers should
consider. For example:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Devices could be compromised</li>
 <li class=MsoNormal>Data at rest in Clients and Servers might be accessible</li>
 <li class=MsoNormal>Protocol behaviors could have side effects (e.g. timing
     attacks)</li>
 <li class=MsoNormal>Denial of Service (DoS) attacks</li>
 <li class=MsoNormal>Communications could be intercepted, altered, re-routed or
     disclosed</li>
 <li class=MsoNormal>Injection of spoofed MQTT Control Packets</li>
</ul>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal>MQTT solutions are often deployed in hostile communication
environments. In such cases, implementations will often need to provide
mechanisms for:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Authentication of users and devices</li>
 <li class=MsoNormal>Authorization of access to Server resources</li>
 <li class=MsoNormal>Integrity of MQTT Control Packets and application data
     contained therein</li>
 <li class=MsoNormal>Privacy of MQTT Control Packets and application data
     contained therein</li>
</ul>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal>In addition to technical security issues there could also be
geographic (e.g. U.S.-EU Privacy Shield Framework <a href="#USEUPRIVSH">[USEUPRIVSH]</a>),
industry specific (e.g. PCI DSS <a href="#PCIDSS"><span style='font-family:
"Arial Unicode MS",sans-serif'>[</span>PCIDSS<span style='font-family:"Arial Unicode MS",sans-serif'>]</span></a>)
and regulatory considerations (e.g. Sarbanes-Oxley <a href="#SARBANES">[SARBANES]</a>).</p>

<p class=MsoNormal><a href="#USEUSAFEHARB"></a><a href="#PCIDSS"></a><a
href="#SARBANES"></a></p>

<h2><a name="_Toc3901263"></a><a name="_Toc514848136"></a><a
name="_Toc511988740"></a><a name="_Toc473620325"></a><a name="_Toc471483756"></a><a
name="_Toc471282910"></a><a name="_Toc464635409"></a><a name="_Toc464548114"></a><a
name="_Toc462729218"></a><a name="_Toc442180926"></a><a name="_Toc385349849"></a><a
name="_Toc385349383"></a><a name="_Toc384800486">5.2 MQTT solutions: security
and certification</a></h2>

<p class=MsoNormal>An implementation might want to provide conformance with
specific industry security standards such as NIST Cyber Security Framework <a
href="#NISTCSF">[NISTCSF]</a>, PCI-DSS <a href="#PCIDSS">[PCIDSS]</a>),
FIPS-140-2 <a href="#FIPS1402">[FIPS1402]</a> and NSA Suite B <a href="#NSAB">[NSAB]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'>.</span></span></p>

<p class=MsoNormal><a href="#NISTCSF"></a><a href="#PCIDSS"></a><a
href="#FIPS1402"></a><a href="#NSAB"></a></p>

<p class=MsoNormal>Guidance on using MQTT within the NIST Cyber Security
Framework <a href="#NISTCSF">[NISTCSF]</a><span class=Refterm><span
style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>can be found
in the MQTT supplemental publication, MQTT and the NIST Framework for Improving
Critical Infrastructure Cybersecurity <a href="#MQTTNIST">[MQTTNIST]</a>. The
use of industry proven, independently verified and certified technologies will
he<a name="_Toc473620326"></a><a name="_Toc471483757"></a><a
name="_Toc471282911"></a><a name="_Toc464635410"></a><a name="_Toc464548115"></a><a
name="_Toc462729219"></a><a name="_Toc442180927"></a><a name="_Toc385349850"></a><a
name="_Toc385349384"></a><a name="_Toc384800487">lp meet compliance
requirements.</a></p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901264"></a><a name="_Toc514848137"></a><a
name="_Toc511988741">5.3 Lightweight crytography and constrained devices</a></h2>

<p class=MsoNormal>Advanced Encryption Standard <a href="#AES">[AES]</a> is the
most widely adopted encryption algorithm. There is hardware support for AES in
many processors, but not commonly for embedded processors. The encryption algorithm
ChaCha20 [<a href="#CHACHA20">CHACHA20</a>] encrypts and decrypts much faster
in software, but is not as widely available as AES.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>ISO 29192 <a href="#ISO29192">[ISO29192]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>makes
recommendations for cryptographic primitives specifically tuned to perform on
constrained low end devices.</p>

<p class=MsoNormal><a href="#ISO29192"></a></p>

<h2><a name="_Toc3901265"></a><a name="_Toc514848138"></a><a
name="_Toc511988742"></a><a name="_Toc473620327"></a><a name="_Toc471483758"></a><a
name="_Toc471282912"></a><a name="_Toc464635411"></a><a name="_Toc464548116"></a><a
name="_Toc462729220"></a><a name="_Toc442180928"></a><a name="_Toc385349851"></a><a
name="_Toc385349385"></a><a name="_Toc384800488">5.4 Implementation notes</a></h2>

<p class=MsoNormal>There are many security concerns to consider when
implementing or using MQTT. The following section should not be considered a
check list. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An implementation might want to achieve some, or all, of the
following:</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901266"></a><a name="_Toc514848139"></a><a
name="_Toc511988743"></a><a name="_Toc473620328"></a><a name="_Toc471483759"></a><a
name="_Toc471282913"></a><a name="_Toc464635412"></a><a name="_Toc464548117"></a><a
name="_Toc462729221"></a><a name="_Toc442180929"></a><a name="_Toc385349852"></a><a
name="_Toc385349386"></a><a name="_Toc384800489">5.4.1 Authentication of
Clients by the Server</a></h3>

<p class=MsoNormal>The CONNECT packet contains User Name and Password fields.
Implementations can choose how to make use of the content of these fields. They
may provide their own authentication mechanism, use an external authentication
system such as LDAP <a href="#RFC4511">[RFC4511]</a> or OAuth <a href="#RFC6749">[RFC6749]</a>
tokens, or leverage operating system authentication mechanisms.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>MQTT v5.0 provides an enhanced authentication mechanism as
described in <a href="#_Enhanced_authentication">section 4.12</a>. Using this
requires support for it in both the Client and Server.<a href="#RFC4511"></a><a
href="#RFC6749"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Implementations passing authentication data in clear text,
obfuscating such data elements or requiring no authentication data should be
aware this can give rise to Man-in-the-Middle and replay attacks. <a
href="#_Privacy_of_Application">Section 5.4.5</a> introduces approaches to
ensure data privacy.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A Virtual Private Network (VPN) between the Clients and
Servers can provide confidence that data is only being received from authorized
Clients.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Where TLS <a href="#RFC5246">[RFC5246]</a> is used, TLS
Certificates sent from the Client can be used by the Server to authenticate the
Client.<a href="#RFC5246"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An implementation might allow for authentication where the
credentials are sent in an Application Message from the Client to the Server.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901267"></a><a name="_Toc514848140"></a><a
name="_Toc511988744"></a><a name="_Toc473620329"></a><a name="_Toc471483760"></a><a
name="_Toc471282914"></a><a name="_Toc464635413"></a><a name="_Toc464548118"></a><a
name="_Toc462729222"></a><a name="_Toc442180930"></a><a name="_Toc385349853"></a><a
name="_Toc385349387"></a><a name="_Toc384800490">5.4.2 Authorization of Clients
by the Server</a></h3>

<p class=MsoNormal><a name="_Toc462729223"></a><a name="_Toc442180931"></a><a
name="_Toc385349854"></a><a name="_Toc385349388"></a><a name="_Toc384800491">If
a Client has been successfully authenticated, a Server implementation should
check that it is authorized before accepting its connection. </a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Authorization may be based on information provided by the
Client such as User Name, the hostname/IP address of the Client, or the outcome
of authentication mechanisms. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>In particular, the implementation should check that the
Client is authorized to use the Client Identifier as this gives access to the
MQTT Session State (described in <a href="#_Session_State">section 4.1</a>).
This authorization check is to protect against the case where one Client,
accidentally or maliciously, provides a Client Identifier that is already being
used by some other Client. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An implementation should provide access controls that take
place after CONNECT to restrict the Clients ability to publish to particular
Topics or to subscribe using particular Topic Filters. An implementation should
consider limiting access to Topic Filters that have broad scope, such as the #
Topic Filter.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901268"></a><a name="_Toc514848141"></a><a
name="_Toc511988745"></a><a name="_Toc473620330"></a><a name="_Toc471483761"></a><a
name="_Toc471282915"></a><a name="_Toc464635414"></a><a name="_Toc464548119">5.4.3
Authentication of the Server by the Client</a></h3>

<p class=MsoNormal>The MQTT protocol is not trust symmetrical. When using basic
authentication, there is no mechanism for the Client to authenticate the
Server. Some forms of extended authentication do allow for mutual
authentication.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Where TLS <a href="#RFC5246">[RFC5246]</a> is used, TLS
Certificates sent from the Server can be used by the Client to authenticate the
Server. Implementations providing MQTT service for multiple hostnames from a
single IP address should be aware of the Server Name Indication extension to TLS
defined in section 3 of <a href="#RFC6066">[RFC6066]</a>.This allows a Client
to tell the Server the hostname of the Server it is trying to connect to.<a
href="#RFC5246"></a><a href="#RFC6066"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An implementation might allow for authentication where the
credentials are sent in an Application Message from the Server to the Client. MQTT
v5.0 provides an enhanced authentication mechanism as described in <a
href="#_Enhanced_authentication">section 4.12</a>., which can be used to Authenticate
the Server to the Client. Using this requires support for it in both the Client
and Server.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A VPN between Clients and Servers can provide confidence
that Clients are connecting to the intended Server.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901269"></a><a name="_Toc514848142"></a><a
name="_Toc511988746"></a><a name="_Toc473620331"></a><a name="_Toc471483762"></a><a
name="_Toc471282916"></a><a name="_Toc464635415"></a><a name="_Toc464548120"></a><a
name="_Toc462729224"></a><a name="_Toc442180932"></a><a name="_Toc385349855"></a><a
name="_Toc385349389"></a><a name="_Toc384800492">5.4.4 Integrity of Application
Messages and MQTT Control Packets</a></h3>

<p class=MsoNormal>Applications can independently include hash values in their
Application Messages. This can provide integrity of the contents of Publish packets
across the network and at rest. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620332">TLS </a><a href="#RFC5246">[RFC5246]</a>
provides hash algorithms to verify the integrity of data sent over the network.<a
href="#RFC5246"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The use of VPNs to connect Clients and Servers can provide
integrity of data across the section of the network covered by a VPN.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901270"></a><a name="_Toc514848143"></a><a
name="_Toc511988747"></a><a name="_Toc473620333"></a><a name="_Toc471483763"></a><a
name="_Toc471282917"></a><a name="_Toc464635416"></a><a name="_Toc464548121"></a><a
name="_Toc462729225"></a><a name="_Toc442180933"></a><a name="_Toc385349856"></a><a
name="_Toc385349390"></a><a name="_Toc384800493"></a><a name="_Ref374028308"></a><a
name="_Privacy_of_Application"></a>5.4.5 Privacy of Application Messages and MQTT
Control Packets</h3>

<p class=MsoNormal>TLS <a href="#RFC5246">[RFC5246]</a> can provide encryption
of data sent over the network. There are valid TLS cipher suites that include a
NULL encryption algorithm that does not encrypt data. To ensure privacy Clients
and Servers should avoid these cipher suites.<a href="#RFC5246"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An application might independently encrypt the contents of
its Application Messages. This could provide privacy of the Application Message
both over the network and at rest. This would not provide privacy for other Properties
of the Application Message such as Topic Name. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Client and Server implementations can provide encrypted
storage for data at rest such as Application Messages stored as part of a
Session.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The use of VPNs to connect Clients and Servers can provide
privacy of data across the section of the network covered by a VPN.</p>

<p class=MsoNormal>&nbsp;</p>

<h3>5.4.6 <a name="_Toc3901271"></a><a name="_Toc514848144"></a><a
name="_Toc511988748"></a><a name="_Toc473620334"></a><a name="_Toc471483764"></a><a
name="_Toc471282918"></a><a name="_Toc464635417"></a><a name="_Toc464548122"></a><a
name="_Toc462729226"></a><a name="_Toc442180934"></a><a name="_Toc385349857"></a><a
name="_Toc385349391"></a><a name="_Toc384800494">Non-repudiation of message
transmission</a></h3>

<p class=MsoNormal>Application designers might need to consider appropriate
strategies to achieve end to end non-repudiation.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901272"></a><a name="_Toc514848145"></a><a
name="_Toc511988749"></a><a name="_Toc473620335"></a><a name="_Toc471483765"></a><a
name="_Toc471282919"></a><a name="_Toc464635418"></a><a name="_Toc464548123"></a><a
name="_Toc462729227"></a><a name="_Toc442180935"></a><a name="_Toc385349858"></a><a
name="_Toc385349392"></a><a name="_Toc384800495">5.4.7 Detecting compromise of
Clients and Servers</a></h3>

<p class=MsoNormal>Client and Server implementations using TLS <a
href="#RFC5246">[RFC5246]</a><span class=MsoHyperlink> </span>should provide
capabilities to ensure that any TLS certificates provided when initiating a TLS<span
class=MsoHyperlink> </span>connection are associated with the hostname of the
Client connecting or Server being connected to.<a href="#RFC5246"></a><a
href="#RFC5246"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Client and Server implementations using TLS can choose to
provide capabilities to check Certificate Revocation Lists (CRLs <a
href="#RFC5280">[RFC5280]</a>) and Online Certificate Status Protocol (OSCP<span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'>) </span></span><a
href="#RFC6960">[RFC6960]</a><span class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'>
t</span></span>o prevent revoked certificates from being used.<a href="#RFC5246"></a><a
href="#RFC5280"></a><a href="#RFC6960"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Physical deployments might combine tamper-proof hardware
with the transmission of specific data in Application Messages. For example, a
meter might have an embedded GPS to ensure it is not used in an unauthorized
location<span class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'>.
</span></span><a href="#IEEE8021AR">[IEEE8021AR]</a> is a standard for implementing
mechanisms to authenticate a devices identity using a cryptographically bound
identifier.</p>

<p class=MsoNormal><a href="#IEEE8021AR"></a></p>

<h3><a name="_Toc3901273"></a><a name="_Toc514848146"></a><a
name="_Toc511988750"></a><a name="_Toc473620336"></a><a name="_Toc471483766"></a><a
name="_Toc471282920"></a><a name="_Toc464635419"></a><a name="_Toc464548124"></a><a
name="_Toc462729228"></a><a name="_Toc442180936"></a><a name="_Toc385349859"></a><a
name="_Toc385349393"></a><a name="_Toc384800496">5.4.8 Detecting abnormal
behaviors</a></h3>

<p class=MsoNormal>Server implementations might monitor Client behavior to
detect potential security incidents. For example:</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Repeated connection attempts</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Repeated authentication attempts</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Abnormal termination of connections</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Topic scanning (attempts to send or subscribe to many topics)</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Sending undeliverable messages (no subscribers to the topics)</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Clients that connect but do not send data</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><a name="_Toc473620337">Server implementations might close
the Network Connection of Clients that breach its security rules.</a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Server implementations detecting unwelcome behavior might
implement a dynamic block list based on identifiers such as IP address or Client
Identifier.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Deployments might use network-level controls (where
available) to implement rate limiting or blocking based on IP address or other
information.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901274"></a><a name="_Toc514848147"></a><a
name="_Toc511988751"></a><a name="_Ref511139597"></a><a name="_Toc506976561"></a><a
name="_Handling_of_Disallowed"></a>5.4.9 Handling of Disallowed Unicode code
points</h3>

<p class=MsoNormal><span class=MsoHyperlink>Section </span><span class=MsoHyperlink>1.5.4</span><span class=MsoHyperlink> </span>describes the
Disallowed Unicode code points, which should not be included in a UTF-8 Encoded
String. A Client or Server implementation can choose whether to validate that
these code points are not used in UTF-8 Encoded Strings such as the Topic Name
or Properties.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>If the Server does not validate the code points in a UTF-8
Encoded String but a subscribing Client does, then a second Client might be
able to cause the subscribing Client to close the Network Connection by
publishing on a Topic Name or using Properties that contain a Disallowed
Unicode code point. This section recommends some steps that can be taken to
prevent this problem.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>A similar problem can occur when the Client validates that
the payload matches the Payload Format Indicator and the Server does not. The
considerations and remedies for this are similar to those for handling
Disallowed Unicode code points.<a name="_Toc287336980"></a><a
name="_Toc287337063"></a><a name="_Toc506976563"></a></p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901275"></a><a name="_Toc514848148"></a><a
name="_Toc511988752">5.4.9.1 Considerations for the use of Disallowed Unicode
code points</a></h4>

<p class=MsoNormal>An implementation would normally choose to validate UTF-8
Encoded strings, checking that the Disallowed Unicode code points are not used.
This avoids implementation difficulties such as the use of libraries that are
sensitive to these code points, it also protects applications from having to
process them. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Validating that these code points are not used removes some
security exposures. There are possible security exploits which use control
characters in log files to mask entries in the logs or confuse the tools which
process log files. The Unicode Noncharacters are commonly used as special
markers and allowing them into UTF-8 Encoded Strings could permit such
exploits. </p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h4><a name="_Toc3901276"></a><a name="_Toc514848149"></a><a
name="_Toc511988753"></a><a name="_Toc506976564">5.4.9.2 Interactions between
Publishers and Subscribers</a></h4>

<p class=MsoNormal>The publisher of an Application Message normally expects
that the Servers will forward the message to subscribers, and that these
subscribers are capable of processing the messages.</p>

<p class=MsoNormal>These are some conditions under which a publishing Client
can cause the subscribing Client to close the Network Connection. Consider a
situation where: </p>

<p class=MsoListParagraphCxSpFirst style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A Client publishes an Application Message using a Topic Name
containing one of the Disallowed Unicode code points. </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The publishing Client library allows the Disallowed Unicode code
point to be used in a Topic Name rather than rejecting it.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The publishing Client is authorized to send the publication.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>A subscribing Client is authorized to use a Topic Filter which
matches the Topic Name. Note that the Disallowed Unicode code point might occur
in a part of the Topic Name matching a wildcard character in the Topic Filter.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The Server forwards the message to the matching subscriber rather
than disconnecting the publisher. </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>In this case the subscribing Client might: </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:1.0in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Close the Network Connection because it does not allow the use of
Disallowed Unicode code points, possibly sending a DISCONNECT before doing so.
For QoS 1 and QoS 2 messages this might cause the Server to send the message
again, causing the Client to close the Network Connection again.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:1.0in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Reject the Application Message by sending a Reason Code greater
than or equal to 0x80 in a PUBACK (QoS 1) or PUBREC (QoS 2). </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:1.0in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Accept the Application Message but fail to process it because it
contains one of the Disallowed Unicode code points. </p>

<p class=MsoListParagraphCxSpLast style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:1.0in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Successfully process the Application Message.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The potential for the Client to close the Network Connection
might go unnoticed until a publisher uses one of the Disallowed Unicode code
points. </p>

<p class=MsoNormal>&nbsp;</p>

<h4>5.4.9.3 <a name="_Toc3901277"></a><a name="_Toc514848150"></a><a
name="_Toc511988754"></a><a name="_Toc287336981"></a><a name="_Toc287337064"></a><a
name="_Toc506976565">Remedies</a></h4>

<p class=MsoNormal>If there is a possibility that a Disallowed Unicode code
point could be included in a Topic Name or other Properties delivered to a
Client, the solution owner can adopt one of the following suggestions:</p>

<p class=MsoListParagraphCxSpFirst style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'>1)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>Change the
Server implementation to one that rejects UTF-8 Encoded Strings containing a
Disallowed Unicode code point either by sending a Reason Code greater than or
equal to 0x80 or closing the Network Connection.</p>

<p class=MsoListParagraphCxSpLast style='margin-top:0in;margin-right:0in;
margin-bottom:8.0pt;margin-left:.5in;text-indent:-.25in'>2)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>Change the
Client library used by the subscribers to one that tolerates the use of
Disallowed Code points. The client can either process or discard messages with
UTF-8 Encoded Strings that contain Disallowed Unicode code points so long as it
continues the protocol.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901278"></a><a name="_Toc514848151"></a><a
name="_Toc511988755"></a><a name="_Toc473620338"></a><a name="_Toc471483767"></a><a
name="_Toc471282921"></a><a name="_Toc464635420"></a><a name="_Toc464548125"></a><a
name="_Toc462729229"></a><a name="_Toc442180937"></a><a name="_Toc385349860"></a><a
name="_Toc385349394"></a><a name="_Toc384800497">5.4.10 Other security
considerations</a></h3>

<p class=MsoNormal>If Client or Server TLS certificates are lost or it is
considered that they might be compromised they should be revoked (utilizing
CRLs <a href="#RFC5280">[RFC5280]</a> and/or OSCP <a href="#RFC6960">[RFC6960]</a>).<a
href="#RFC5280"></a><a href="#RFC6960"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Client or Server authentication credentials, such as User
Name and Password, that are lost or considered compromised should be revoked
and/or reissued.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>In the case of long lasting connections:</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Client and Server implementations using TLS <a href="#RFC5246">[RFC5246]</a>
should allow for session renegotiation to establish new cryptographic
parameters (replace session keys, change cipher suites, change authentication
credentials).<a href="#RFC5246"></a></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Servers may close the Network Connection of Clients and require
them to re-authenticate with new credentials. </p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Servers may require their Client to reauthenticate periodically
using the mechanism described in <a href="#_Re-authentication">section 4.12.1</a>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Constrained devices and Clients on constrained networks can
make use of TLS <a href="#RFC5246">[RFC5246]</a> session resumption, in order
to reduce the costs of reconnecting TLS <a href="#RFC5246">[RFC5246]</a>
sessions.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Clients connected to a Server have a transitive trust
relationship with other Clients connected to the same Server and who have
authority to publish data on the same topics.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901279"></a><a name="_Toc514848152"></a><a
name="_Toc511988756"></a><a name="_Toc473620339"></a><a name="_Toc471483768"></a><a
name="_Toc471282922"></a><a name="_Toc464635421"></a><a name="_Toc464548126"></a><a
name="_Toc462729230"></a><a name="_Toc442180938"></a><a name="_Toc385349861"></a><a
name="_Toc385349395"></a><a name="_Toc384800498">5.4.11 Use of SOCKS</a></h3>

<p class=MsoNormal>Implementations of Clients should be aware that some
environments will require the use of SOCKSv5 <a href="#RFC1928">[RFC1928]</a>
proxies to make outbound Network Connections. Some MQTT implementations could
make use of alternative secured tunnels (e.g. SSH) through the use of SOCKS.
Where implementations choose to use SOCKS, they should support both anonymous
and User Name, Password authenticating SOCKS proxies. In the latter case,
implementations should be aware that SOCKS authentication might occur in
plain-text and so should avoid using the same credentials for connection to a
MQTT Server.</p>

<p class=MsoNormal><a href="#RFC1928"></a></p>

<h3><a name="_Toc3901280"></a><a name="_Toc514848153"></a><a
name="_Toc511988757"></a><a name="_Toc473620340"></a><a name="_Toc471483769"></a><a
name="_Toc471282923"></a><a name="_Toc464635422"></a><a name="_Toc464548127"></a><a
name="_Toc462729231"></a><a name="_Toc442180939"></a><a name="_Toc385349862"></a><a
name="_Toc385349396"></a><a name="_Toc384800499">5.4.12 Security profiles</a></h3>

<p class=MsoNormal>Implementers and solution designers might wish to consider
security as a set of profiles which can be applied to the MQTT protocol. An
example of a layered security hierarchy is presented below.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901281"></a><a name="_Toc514848154"></a><a
name="_Toc511988758"></a><a name="_Toc473620341"></a><a name="_Toc471483770"></a><a
name="_Toc471282924"></a><a name="_Toc464635423"></a><a name="_Toc464548128"></a><a
name="_Toc462729232"></a><a name="_Toc385349397">5.4.12.1 Clear communication
profile</a></h4>

<p class=MsoNormal>When using the clear communication profile, the MQTT
protocol runs over an open network with no additional secure communication
mechanisms in place.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901282"></a><a name="_Toc514848155"></a><a
name="_Toc511988759"></a><a name="_Toc473620342"></a><a name="_Toc471483771"></a><a
name="_Toc471282925"></a><a name="_Toc464635424"></a><a name="_Toc464548129"></a><a
name="_Toc462729233"></a><a name="_Toc385349398">5.4.12.2 Secured network
communication profile</a></h4>

<p class=MsoNormal>When using the secured network communication profile, the
MQTT protocol runs over a physical or virtual network which has security
controls e.g., VPNs or physically secure network.</p>

<p class=MsoNormal>&nbsp;</p>

<h4><a name="_Toc3901283"></a><a name="_Toc514848156"></a><a
name="_Toc511988760"></a><a name="_Toc473620343"></a><a name="_Toc471483772"></a><a
name="_Toc471282926"></a><a name="_Toc464635425"></a><a name="_Toc464548130"></a><a
name="_Toc462729234"></a><a name="_Toc385349399">5.4.12.3 Secured transport
profile</a></h4>

<p class=MsoNormal>When using the secured transport profile, the MQTT protocol
runs over a physical or virtual network and using TLS <a href="#RFC5246">[RFC5246]</a>
which provides authentication, integrity and privacy.<a href="#RFC5246"></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>TLS <a href="#RFC5246">[RFC5246]</a><span class=Refterm><span
style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>Client authentication
can be used in addition to  or in place of  MQTT Client authentication as
provided by the User Name and Password fields.</p>

<p class=MsoNormal><a href="#RFC5246"></a></p>

<h4><a name="_Toc3901284"></a><a name="_Toc514848157"></a><a
name="_Toc511988761"></a><a name="_Toc473620344"></a><a name="_Toc471483773"></a><a
name="_Toc471282927"></a><a name="_Toc464635426"></a><a name="_Toc464548131"></a><a
name="_Toc462729235"></a><a name="_Toc385349400">5.4.12.4 Industry specific security
profiles</a></h4>

<p class=MsoNormal>It is anticipated that the MQTT protocol will be designed
into industry specific application profiles, each defining a threat model and
the specific security mechanisms to be used to address these threats. Recommendations
for specific security mechanisms will often be taken from existing works
including:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><a href="#NISTCSF">[NISTCSF]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>NIST
Cyber Security Framework</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><a href="#NIST7628">[NIST7628]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>NISTIR
7628 Guidelines for Smart Grid Cyber Security</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><a href="#FIPS1402">[FIPS1402]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>Security
Requirements for Cryptographic Modules (FIPS PUB 140-2)</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><a href="#PCIDSS">[PCIDSS]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>PCI-DSS
Payment Card Industry Data Security Standard</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><a href="#NSAB">[NSAB]</a><span
class=Refterm><span style='font-family:"Arial,Arial Unicode MS",serif'> </span></span>NSA
Suite B Cryptography<a href="#NIST7628"></a><a href="#FIPS1402"></a><a
href="#PCIDSS"></a><a href="#NSAB"></a></p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc3901285"></a><a name="_Toc514848158"></a><a
name="_Toc511988762"></a><a name="_Toc473620345"></a><a name="_Toc471483774"></a><a
name="_Toc471282928"></a><a name="_Toc464635427"></a><a name="_Toc464548132"></a><a
name="_Toc462729236"></a><a name="_Using_WebSocket_as"></a>6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Using
WebSocket as a network transport</h1>

</div>

<p class=MsoNormal><span style='background:white'>If MQTT is transported over a
WebSocket </span><a href="#RFC6455"><span style='background:white'>[RFC6455]</span></a><span
style='background:white'> connection, the following conditions apply: </span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>MQTT Control Packets MUST be sent
in WebSocket binary data frames. If any other type of data frame is received
the recipient MUST close the Network Connection</span> <span style='color:red'>[MQTT-6.0.0-1]</span>.</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>A single WebSocket data frame can
contain multiple or partial MQTT Control Packets. The receiver MUST NOT assume
that MQTT Control Packets are aligned on WebSocket frame boundaries</span> <span
style='color:red'>[MQTT-6.0.0-2]</span>.</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>The Client MUST include mqtt in
the list of WebSocket Sub Protocols it offers</span> <span style='color:red'>[MQTT-6.0.0-3]</span>.
</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>The WebSocket Subprotocol name
selected and returned by the Server MUST be mqtt</span> <span
style='color:red'>[MQTT-6.0.0-4]</span>.</p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:white'>The WebSocket URI used to connect
the Client and Server has no impact on the MQTT protocol. </span></p>

<p class=MsoNormal><span style='background:white'>&nbsp;</span></p>

<h2>6.1 <a name="_Toc3901286"></a><a name="_Toc514848159"></a><a
name="_Toc511988763"></a><a name="_Toc473620346"></a><a name="_Toc471483775"></a><a
name="_Toc471282929"></a><a name="_Toc464635428"></a><a name="_Toc464548133"></a><a
name="_Toc462729237"></a><a name="_Toc442180941"></a><a name="_Toc385349864"></a><a
name="_Toc385349402"></a><a name="_Toc384800501">IANA considerations</a></h2>

<p class=MsoNormal style='margin-left:3.0pt'><span lang=EN-GB>This
specification requests IANA to modify the registration of the WebSocket MQTT
sub-protocol under the WebSocket Subprotocol Name registry with the following
data:</span></p>

<p class=MsoNormal style='margin-left:3.0pt'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc385349403">Figure 6.</a>6&#8209;1
- IANA WebSocket Identifier</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:3.0pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=207 valign=top style='width:155.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-left:.25in'><span style='background:white'>Subprotocol
  Identifier</span></p>
  </td>
  <td width=427 valign=top style='width:4.45in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-left:.25in'><span style='background:white'>mqtt</span></p>
  </td>
 </tr>
 <tr>
  <td width=207 valign=top style='width:155.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-left:.25in'><span style='background:white'>Subprotocol
  Common Name</span></p>
  </td>
  <td width=427 valign=top style='width:4.45in;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-left:.25in'><span style='background:white'>mqtt</span></p>
  </td>
 </tr>
 <tr>
  <td width=207 valign=top style='width:155.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-left:.25in'><span style='background:white'>Subprotocol
  Definition</span></p>
  </td>
  <td width=427 valign=top style='width:4.45in;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-left:.25in'><span style='background:white'>http://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1><a name="_Toc3901287"></a><a name="_Toc514848160"></a><a
name="_Toc511988764"></a><a name="_Ref483238056"></a><a name="_Toc473620347"></a><a
name="_Toc471483776"></a><a name="_Toc471282930"></a><a name="_Toc464635429"></a><a
name="_Toc464548134"></a><a name="_Toc462729238"></a><a name="_Conformance"></a>7<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Conformance</h1>

</div>

<p class=MsoNormal>The MQTT specification defines conformance for MQTT Client
implementations and MQTT Server implementations. An MQTT implementation can
conform as both an MQTT Client and an MQTT Server.</p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc3901288"></a><a name="_Toc514848161"></a><a
name="_Toc511988765"></a><a name="_Toc473620348"></a><a name="_Toc471483777"></a><a
name="_Toc471282931"></a><a name="_Toc464635430"></a><a name="_Toc464548135"></a><a
name="_Toc462729239"></a><a name="_Toc442180943"></a><a name="_Toc385349866"></a><a
name="_Toc385349405"></a><a name="_Toc384800503">7.1 Conformance </a>clauses</h2>

<h3><a name="_Toc3901289"></a><a name="_Toc514848162"></a><a
name="_Toc511988766"></a><a name="_Toc473620349"></a><a name="_Toc471483778"></a><a
name="_Toc471282932"></a><a name="_Toc464635431"></a><a name="_Toc464548136"></a><a
name="_Toc462729240"></a><a name="_Toc442180944"></a><a name="_Toc385349867"></a><a
name="_Toc385349406"></a><a name="_Toc384800504">7.1.1 MQTT Server</a>
conformance clause</h3>

<p class=MsoNormal>Refer to <a href="#Server">Server</a> in the Terminology
section for a definition of Server.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An MQTT Server conforms to this specification only if it
satisfies all the statements below:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The format
of all MQTT Control Packets that the Server sends matches the format described
in <a href="#_MQTT_Control_Packet">Chapter 2</a> and <a
href="#_MQTT_Control_Packets">Chapter 3</a>.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>It follows
the Topic matching rules described in <a href="#_Topic_Names_and">section 4.7</a>
and the Subscription rules in <a href="#_Subscriptions">section 4.8</a>.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
class=apple-converted-space>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>It satisfies the MUST level requirements in the following
chapters that are identified except for those that only apply to the Client<span
class=apple-converted-space><span style='font-size:7.0pt;color:black;
background:white'>:</span></span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Introduction">Chapter 1 - Introduction</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_MQTT_Control_Packet">Chapter 2 - MQTT Control Packet
format</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_MQTT_Control_Packets">Chapter 3 - MQTT Control Packets</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Operational_behavior">Chapter 4 - Operational behavior</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Using_WebSocket_as">Chapter 6 - Using WebSocket as a
network transport</a> </p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>It does
not require the use of any extensions defined outside of the specification in
order to interoperate with any other conformant implementation.</p>

<p class=MsoNormal>&nbsp;</p>

<h3><a name="_Toc3901290"></a><a name="_Toc514848163"></a><a
name="_Toc511988767"></a><a name="_Toc473620350"></a><a name="_Toc471483779"></a><a
name="_Toc471282933"></a><a name="_Toc464635432"></a><a name="_Toc464548137"></a><a
name="_Toc462729241"></a><a name="_Toc442180945"></a><a name="_Toc385349868"></a><a
name="_Toc385349407"></a><a name="_Toc384800505">7.1.2 MQTT Client</a>
conformance clause</h3>

<p class=MsoNormal>Refer to <a href="#Client">Client</a> in the Terminology
section for a definition of Client.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>An MQTT Client conforms to this specification only if it
satisfies all the statements below:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The format
of all MQTT Control Packets that the Client sends matches the format described
in <a href="#_MQTT_Control_Packet">Chapter 2</a> and <a
href="#_MQTT_Control_Packets">Chapter 3</a>.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
class=apple-converted-space>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>It satisfies the MUST level requirements in the following
chapters that are identified except for those that only apply to the Server<span
class=apple-converted-space><span style='font-size:7.0pt;color:black;
background:white'>:</span></span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Introduction">Chapter 1 - Introduction</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_MQTT_Control_Packet">Chapter 2 - MQTT Control Packet
format</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_MQTT_Control_Packets">Chapter 3 - MQTT Control Packets</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Operational_behavior">Chapter 4 - Operational behavior</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_Using_WebSocket_as">Chapter 6 - Using WebSocket as a
network</a> transport </p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>It does
not require the use of any extensions defined outside of the specification in
order to interoperate with any other conformant implementation.</p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<p class=AppendixHeading1><a name="_Toc3901291"></a><a name="_Toc514848164"></a><a
name="_Toc511988768"></a><a name="_Toc473620351"></a><a name="_Toc471483780"></a><a
name="_Toc471282934"></a><a name="_Toc464635433"></a><a name="_Toc464548138"></a><a
name="_Toc462729242"></a><a name="_Toc287332012"></a><a name="_Toc85472897"></a><a
name=AppendixA></a>Appendix A. Acknowledgments</p>

</div>

<p class=Titlepageinfo><span style='color:windowtext;font-weight:normal'>The TC
owes special thanks to Dr. Andy Stanford-Clark and Arlen Nipper as the original
inventors of the MQTT protocol and for their continued support with the
standardization process.</span></p>

<p class=TitlepageinfodescriptionCxSpFirst>&nbsp;</p>

<p class=TitlepageinfodescriptionCxSpLast style='margin-left:0in'>The TC wishes
to thank Brian Raymor (formerly of Microsoft) for his work as co-chairman of
the MQTT TC during much of the development of the version 5.0 standard.</p>

<p class=Titlepageinfo><span style='color:windowtext;font-weight:normal'>&nbsp;</span></p>

<p class=Titlepageinfo><span style='color:windowtext;font-weight:normal'>The
following individuals were members of the OASIS Technical Committee during the
creation of this standard and their contributions are gratefully acknowledged:</span></p>

<p class=Titlepageinfo><span style='color:windowtext;font-weight:normal'>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc473620352"><b>Participants:</b></a></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Senthil Nathan Balasubramaniam (Infiswift)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Dr. Andrew Banks, editor (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Ken Borgendale, editor (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Ed Briggs, editor (Microsoft)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Raphael Cohn (Individual)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Richard Coppen, chairman (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>William Cox (Individual)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Ian Craggs , secretary (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Konstantin Dotchkoff (Microsoft)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Derek Fu (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Rahul Gupta, editor (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Stefan Hagen (Individual)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>David Horton (Solace Systems)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Alex Kritikos (Software AG, Inc.)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Jonathan Levell (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Shawn McAllister (Solace Systems)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>William McLane (TIBCO Software Inc.)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Peter Niblett (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Dominik Obermaier (dc-square GmbH)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Nicholas O'Leary (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Brian Raymor (Microsoft)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Andrew Schofield (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Tobias Sommer (Cumulocity)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Joe Speed (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Dr Andy Stanford-Clark (IBM)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Allan Stockdill-Mander (IBM)</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
style='font-family:Symbol'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Stehan Vaillant (Cumulocity)</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>For a list of those who contributed to earlier versions of
MQTT refer to Appendix A in the MQTT v3.1.1 specification <span
class=MsoHyperlink><b><span style='color:black'>[MQTTV311</span></b></span><b>]</b>.
</p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<p class=AppendixHeading1><a name="_Toc3901292"></a><a name="_Toc514848165"></a><a
name="_Toc511988769"></a><a name=AppendixB></a>Appendix B. Mandatory normative
statement (non-normative)</p>

</div>

<p class=MsoNormal>This Appendix is non-normative and is provided as a
convenient summary of the numbered conformance statements found in the main
body of this document. Refer to <a href="#_Conformance">Chapter 7</a> for a
definitive list of conformance requirements.</p>

<p class=MsoNormal>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=660
 style='width:494.75pt;margin-left:5.65pt;border-collapse:collapse'>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><b><span style='color:black'>Normative Statement Number</span></b></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border:solid windowtext 1.0pt;
  border-left:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:
  28.5pt'>
  <p class=MsoNormal><b><span style='color:black'>Normative Statement</span></b></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-1.5.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The character data in a UTF-8
  Encoded String MUST be well-formed UTF-8 as defined by the Unicode
  specification [Unicode] and restated in RFC 3629 [RFC3629]. In particular,
  the character data MUST NOT include encodings of code points between U+D800
  and U+DFFF.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-1.5.4-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A UTF-8 Encoded String MUST NOT
  include an encoding of the null character U+0000.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-1.5.4-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A UTF-8 encoded sequence 0xEF
  0xBB 0xBF is always interpreted as U+FEFF (&quot;ZERO WIDTH NO-BREAK
  SPACE&quot;) wherever it appears in a string and MUST NOT be skipped over or
  stripped off by a packet receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-1.5.5-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The encoded value MUST use the
  minimum number of bytes necessary to represent the value.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-1.5.7-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Both strings MUST comply with
  the requirements for UTF-8 Encoded Strings.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.1.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Where a flag bit is marked as
  Reserved it is reserved for future use and MUST be set to the value listed.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.2.1-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A PUBLISH packet MUST NOT
  contain a Packet Identifier if its QoS value is set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.2.1-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Each time a Client sends a new
  SUBSCRIBE, UNSUBSCRIBE,or PUBLISH (where QoS &gt; 0) MQTT Control Packet it
  MUST assign it a non-zero Packet Identifier that is currently unused.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.2.1-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Each time a Server sends a new
  PUBLISH (with QoS &gt; 0) MQTT Control Packet it MUST assign it a non zero
  Packet Identifier that is currently unused.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.2.1-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A PUBACK, PUBREC, PUBREL, or
  PUBCOMP packet MUST contain the same Packet Identifier as the PUBLISH packet
  that was originally sent.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.2.1-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A SUBACK and UNSUBACK MUST
  contain the Packet Identifier that was used in the corresponding SUBSCRIBE
  and UNSUBSCRIBE packet respectively.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-2.2.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If there are no properties, this
  MUST be indicated by including a Property Length of zero.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>After a Network Connection is
  established by a Client to a Server, the first packet sent from the Client to
  the Server MUST be a CONNECT packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST process a second
  CONNECT packet sent from a Client as a Protocol Error and close the Network
  Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The protocol name MUST be the
  UTF-8 String &quot;MQTT&quot;. If the Server does not want to accept the CONNECT,
  and wishes to reveal that it is an MQTT Server it MAY send a CONNACK packet
  with Reason Code of 0x84 (Unsupported Protocol Version), and then it MUST
  close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Protocol Version is not 5
  and the Server does not want to accept the CONNECT packet, the Server MAY
  send a CONNACK packet with Reason Code 0x84 (Unsupported Protocol Version)
  and then MUST close the Network Connection</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST validate that
  the reserved flag in the CONNECT packet is set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a CONNECT packet is received
  with Clean Start is set to 1, the Client and Server MUST discard any existing
  Session and start a new Session.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a CONNECT packet is received
  with Clean Start set to 0 and there is a Session associated with the Client
  Identifier, the Server MUST resume communications with the Client based on
  state from the existing Session.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a CONNECT packet is received
  with Clean Start set to 0 and there is no Session associated with the Client
  Identifier, the Server MUST create a new Session.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 1
  this indicates that, a Will Message MUST be stored on the Server and associated
  with the Session.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Will Message MUST be published
  after the Network Connection is subsequently closed and either the Will Delay
  Interval has elapsed or the Session ends, unless the Will Message has been
  deleted by the Server on receipt of a DISCONNECT packet with Reason Code 0x00
  (Normal disconnection) or a new Network Connection for the ClientID is opened
  before the Will Delay Interval has elapsed.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 1,
  the Will QoS and Will Retain fields in the Connect Flags will be used by the
  Server, and the Will Properties, Will Topic and Will Message fields MUST be
  present in the Payload.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Will Message MUST be removed
  from the stored Session State in the Server once it has been published or the
  Server has received a DISCONNECT packet with a Reason Code of 0x00 (Normal
  disconnection) from the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-11]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 0,
  then the Will QoS MUST be set to 0 (0x00).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-12]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 1, the
  value of Will QoS can be 0 (0x00), 1 (0x01), or 2 (0x02).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-13]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 0,
  then Will Retain MUST be set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-14]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 1 and
  Will Retain is set to 0, the Server MUST publish the Will Message as a
  non-retained message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-15]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Will Flag is set to 1 and
  Will Retain is set to 1, the Server MUST publish the Will Message as a
  retained message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-16]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the User Name Flag is set to
  0, a User Name MUST NOT be present in the Payload.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-17]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the User Name Flag is set to
  1, a User Name MUST be present in the Payload.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-18]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Password Flag is set to
  0, a Password MUST NOT be present in the Payload.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-19]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Password Flag is set to
  1, a Password MUST be present in the Payload.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-20]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If Keep Alive is non-zero and in
  the absence of sending any other MQTT Control Packets, the Client MUST send a
  PINGREQ packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-21]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server returns a Server
  Keep Alive on the CONNACK packet, the Client MUST use that value instead of
  the value it sent as the Keep Alive.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-22]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Keep Alive value is
  non-zero and the Server does not receive an MQTT Control Packet from the
  Client within one and a half times the Keep Alive time period, it MUST close
  the Network Connection to the Client as if the network had failed.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-23]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client and Server MUST store
  the Session State after the Network Connection is closed if the Session
  Expiry Interval is greater than 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-24]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span lang=EN-GB style='color:black'>The Server MUST NOT
  send packets exceeding Maximum Packet Size to the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-25]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span lang=EN-GB style='color:black'>Where a Packet is too
  large to send, the Server MUST discard it without sending it and then behave
  as if it had completed sending that Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-26]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send a Topic
  Alias in a PUBLISH packet to the Client greater than Topic Alias Maximum.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-27]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If Topic Alias Maximum is absent
  or zero, the Server MUST NOT send any Topic Aliases to the.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-28]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A value of 0 indicates that the
  Server MUST NOT return Response Information.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-29]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the value of Request Problem
  Information is 0, the Server MAY return a Reason String or User Properties on
  a CONNACK or DISCONNECT packet, but MUST NOT send a Reason String or User
  Properties on any packet other than PUBLISH, CONNACK, or DISCONNECT.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.2-30]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Client sets an
  Authentication Method in the CONNECT, the Client MUST NOT send any packets
  other than AUTH or DISCONNECT packets until it has received a CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Payload of the CONNECT
  packet contains one or more length-prefixed fields, whose presence is
  determined by the flags in the Variable Header. These fields, if present,
  MUST appear in the order Client Identifier, Will Topic, Will Message, User
  Name, Password.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The ClientID MUST be used by
  Clients and by Servers to identify state that they hold relating to this MQTT
  Session between the Client and the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The ClientID MUST be present and
  is the first field in the CONNECT packet Payload.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The ClientID MUST be a UTF-8
  Encoded String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST allow ClientIDs
  which are between 1 and 23 UTF-8 encoded bytes in length, and that contain
  only the characters<br>
  &quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MAY allow a Client to
  supply a ClientID that has a length of zero bytes, however if it does so the
  Server MUST treat this as a special case and assign a unique ClientID to that
  Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>It MUST then process the CONNECT
  packet as if the Client had provided that unique ClientID, and MUST return
  the Assigned Client Identifier in the CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server rejects the ClientID
  it MAY respond to the CONNECT packet with a CONNACK using Reason Code 0x85
  (Client Identifier not valid) as described in section 4.13 Handling errors,
  and then it MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a new Network Connection to
  this Session is made before the Will Delay Interval has passed, the Server MUST
  NOT send the Will Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST maintain the
  order of User Properties when forwarding the Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-11]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Will Topic MUST be a UTF-8 Encoded
  String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.3-12]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the User Name Flag is set to 1,
  the User Name is the next field in the Payload. The User Name MUST be a UTF-8
  Encoded String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST validate that
  the CONNECT packet matches the format described in section 3.1 and close the
  Network Connection if it does not match.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.4-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MAY check that the
  contents of the CONNECT packet meet any further restrictions and SHOULD
  perform authentication and authorization checks. If any of these checks fail,
  it MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.4-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the ClientID represents a
  Client already connected to the Server, the Server sends a DISCONNECT packet
  to the existing Client with Reason Code of 0x8E (Session taken over) as
  described in section 4.13 and MUST close the Network Connection of the
  existing Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.4-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST perform the
  processing of Clean Start.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.4-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST acknowledge the
  CONNECT packet with a CONNACK packet containing a 0x00 (Success) Reason Code.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.1.4-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server rejects the
  CONNECT, it MUST NOT process any data sent by the Client after the CONNECT
  packet except AUTH packets.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST send a CONNACK
  with a 0x00 (Success) Reason Code before sending any Packet other than AUTH.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send more
  than one CONNACK in a Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Byte 1 is the &quot;Connect Acknowledge
  Flags&quot;. Bits 7-1 are reserved and MUST be set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server accepts a
  connection with Clean Start set to 1, the Server MUST set Session Present to
  0 in the CONNACK packet in addition to setting a 0x00 (Success) Reason Code
  in the CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server accepts a
  connection with Clean Start set to 0 and the Server has Session State for the
  ClientID, it MUST set Session Present to 1 in the CONNACK packet, otherwise
  it MUST set Session Present to 0 in the CONNACK packet. In both cases it MUST
  set a 0x00 (Success) Reason Code in the CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client does not have
  Session State and receives Session Present set to 1 it MUST close the Network
  Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client does have Session
  State and receives Session Present set to 0 it MUST discard its Session State
  if it continues with the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server sends a CONNACK
  packet containing a non-zero Reason Code it MUST set Session Present to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server sends a CONNACK
  packet containing a Reason code of 0x80 or greater it MUST then close the
  Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server sending the CONNACK
  packet MUST use one of the Connect Reason Code values.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server does not support QoS
  1 or QoS 2 PUBLISH packets it MUST send a Maximum QoS in the CONNACK packet
  specifying the highest QoS it supports.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server that does not support
  QoS 1 or QoS 2 PUBLISH packets MUST still accept SUBSCRIBE packets containing
  a Requested QoS of 0, 1 or 2.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-11]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Client receives a Maximum
  QoS from a Server, it MUST NOT send PUBLISH packets at a QoS level exceeding
  the Maximum QoS level specified.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-12]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server receives a CONNECT
  packet containing a Will QoS that exceeds its capabilities, it MUST reject
  the connection. It SHOULD use a CONNACK packet with Reason Code 0x9B (QoS not
  supported) as described in section 4.13 Handling errors, and MUST close the Network
  Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-13]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server receives a CONNECT
  packet containing a Will Message with the Will Retain 1, and it does not
  support retained messages, the Server MUST reject the connection request. It
  SHOULD send CONNACK with Reason Code 0x9A (Retain not supported) and then it
  MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-14]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Client receiving Retain Available
  set to 0 from the Server MUST NOT send a PUBLISH packet with the RETAIN flag
  set to 1.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-15]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST NOT send packets
  exceeding Maximum Packet Size to the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-16]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client connects using a
  zero length Client Identifier, the Server MUST respond with a CONNACK
  containing an Assigned Client Identifier. The Assigned Client Identifier MUST
  be a new Client Identifier not used by any other Session currently in the
  Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-17]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST NOT send a Topic
  Alias in a PUBLISH packet to the Server greater than this value.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-18]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Topic Alias Maximum is absent,
  the Client MUST NOT send any Topic Aliases on to the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-19]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send this
  property if it would increase the size of the CONNACK packet beyond the
  Maximum Packet Size specified by the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-20]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send this
  property if it would increase the size of the CONNACK packet beyond the
  Maximum Packet Size specified by the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-21]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server sends a Server
  Keep Alive on the CONNACK packet, the Client MUST use this value instead of
  the Keep Alive value the Client sent on CONNECT.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.2.2-22]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server does not send the
  Server Keep Alive, the Server MUST use the Keep Alive value set by the Client
  on CONNECT.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The DUP flag MUST be set to 1 by
  the Client or Server when it attempts to re-deliver a PUBLISH packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The DUP flag MUST be set to 0
  for all QoS 0 messages.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The DUP flag in the outgoing
  PUBLISH packet is set independently to the incoming PUBLISH packet, its value
  MUST be determined solely by whether the outgoing PUBLISH packet is a
  retransmission.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A PUBLISH Packet MUST NOT have
  both QoS bits set to 1.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the RETAIN flag is set to 1
  in a PUBLISH packet sent by a Client to a Server, the Server MUST replace any
  existing retained message for this topic and store the Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Payload contains zero bytes
  it is processed normally by the Server but any retained message with the same
  topic name MUST be removed and any future subscribers for the topic will not
  receive a retained message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A retained message with a
  Payload containing zero bytes MUST NOT be stored as a retained message on the
  Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the RETAIN flag is 0 in a
  PUBLISH packet sent by a Client to a Server, the Server MUST NOT store the
  message as a retained message and MUST NOT remove or replace any existing retained
  message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal>If Retain Handling is set to 0 the Server MUST send the
  retained messages matching the Topic Filter of the subscription to the Client.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If Retain Handling is set to 1 then
  if the subscription did already exist, the Server MUST send all retained
  message matching the Topic Filter of the subscription to the Client, and if
  the subscription did not exist, the Server MUST NOT send the retained
  messages.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-11]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If Retain Handling is set to 2,
  the Server MUST NOT send the retained </span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-12]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the value of Retain As Published
  subscription option is set to 0, the Server MUST set the RETAIN flag to 0
  when forwarding an Application Message regardless of how the RETAIN flag was
  set in the received PUBLISH packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.1-13]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the value of Retain As
  Published subscription option is set to 1, the Server MUST set the RETAIN
  flag equal to the RETAIN flag in the received PUBLISH packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Topic Name MUST be present
  as the first field in the PUBLISH packet Variable Header. It MUST be a UTF-8
  Encoded String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Topic Name in the PUBLISH
  packet MUST NOT contain wildcard characters.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Topic Name in a PUBLISH
  packet sent by a Server to a subscribing Client MUST match the Subscriptions
  Topic Filter.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MUST send the Payload
  Format Indicator unaltered to all subscribers receiving the message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Message Expiry Interval
  has passed and the Server has not managed to start onward delivery to a
  matching subscriber, then it MUST delete the copy of the message for that
  subscriber.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The PUBLISH packet sent to a
  Client by the Server MUST contain a Message Expiry Interval set to the
  received value minus the time that the message has been waiting in the
  Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A receiver MUST NOT carry
  forward any Topic Alias mappings from one Network Connection to another.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A sender MUST NOT send a PUBLISH
  packet containing a Topic Alias which has the value 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Client MUST NOT send a PUBLISH
  packet with a Topic Alias greater than the Topic Alias Maximum value returned
  by the Server in the CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Client MUST accept all Topic
  Alias values greater than 0 and less than or equal to the Topic Alias Maximum
  value that it sent in the CONNECT packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-11]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MUST NOT send a PUBLISH
  packet with a Topic Alias greater than the Topic Alias Maximum value sent by
  the Client in the CONNECT packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-12]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MUST accept all Topic
  Alias values greater than 0 and less than or equal to the Topic Alias Maximum
  value that it returned in the CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-13]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Response Topic MUST be a
  UTF-8 Encoded String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-14]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Response Topic MUST NOT
  contain wildcard characters.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-15]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST send the
  Response Topic unaltered to all subscribers receiving the Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-16]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST send the
  Correlation Data unaltered to all subscribers receiving the Application
  Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-17]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST send all User
  Properties unaltered in a PUBLISH packet when forwarding the Application
  Message to a Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-18]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST maintain the
  order of User Properties when forwarding the Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-19]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Content Type MUST be a UTF-8
  Encoded String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.2-20]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MUST send the Content
  Type unaltered to all subscribers receiving the Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The receiver of a PUBLISH Packet
  MUST respond with the packet as determined by the QoS in the PUBLISH Packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In this case the Server MUST
  deliver the message to the Client respecting the maximum QoS of all the
  matching subscriptions.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client specified a
  Subscription Identifier for any of the overlapping subscriptions the Server
  MUST send those Subscription Identifiers in the message which is published as
  the result of the subscriptions.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server sends a single
  copy of the message it MUST include in the PUBLISH packet the Subscription
  Identifiers for all matching subscriptions which have a Subscription
  Identifiers, their order is not significant.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server sends multiple
  PUBLISH packets it MUST send, in each of them, the Subscription Identifier of
  the matching subscription if it has a Subscription Identifier.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A PUBLISH packet sent from a
  Client to a Server MUST NOT contain a Subscription Identifier.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST NOT send more
  than Receive Maximum QoS 1 and QoS 2 PUBLISH packets for which it has not
  received PUBACK, PUBCOMP, or PUBREC with a Reason Code of 128 or greater from
  the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST NOT delay the
  sending of any packets other than PUBLISH packets due to having sent Receive
  Maximum PUBLISH packets without receiving acknowledgements for them.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send more
  than Receive Maximum QoS 1 and QoS 2 PUBLISH packets for which it has not
  received PUBACK, PUBCOMP, or PUBREC with a Reason Code of 128 or greater from
  the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.3.4-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal>The Server MUST NOT delay the sending of any packets other
  than PUBLISH packets due to having sent Receive Maximum PUBLISH packets
  without receiving acknowledgements for them. </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.4.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server sending the
  PUBACK packet MUST use one of the PUBACK Reason Codes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.4.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the PUBACK packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.4.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the PUBACK packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.5.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server sending the
  PUBREC packet MUST use one of the PUBREC Reason Codes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.5.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this property
  if it would increase the size of the PUBREC packet beyond the Maximum Packet
  Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.5.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the PUBREC packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.6.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Bits 3,2,1 and 0 of the Fixed
  Header in the PUBREL packet are reserved and MUST be set to 0,0,1 and 0
  respectively. The Server MUST treat any other value as malformed and close
  the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.6.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server sending the
  PUBREL packet MUST use one of the PUBREL Reason Codes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.6.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  Property if it would increase the size of the PUBREL packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.6.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the PUBREL packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.7.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server sending the
  PUBCOMP packets MUST use one of the PUBCOMP Reason Codes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.7.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT use this
  Property if it would increase the size of the PUBCOMP packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.7.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the PUBCOMP packet beyond the
  Maximum Packet Size specified by receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Bits 3,2,1 and 0 of the Fixed
  Header of the SUBSCRIBE packet are reserved and MUST be set to 0,0,1 and 0
  respectively. The Server MUST treat any other value as malformed and close
  the Network Connection</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Topic Filters MUST be a
  UTF-8 Encoded String.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Payload MUST contain at
  least one Topic Filter and Subscription Options pair.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.3-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Bit 2 of the Subscription Options
  represents the No Local option. If the value is 1, Application Messages MUST
  NOT be forwarded to a connection with a ClientID equal to the ClientID of the
  publishing connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.3-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>It is a Protocol Error to set
  the No Local bit to 1 on a Shared Subscription.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.3-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST treat a
  SUBSCRIBE packet as malformed if any of Reserved bits in the Payload are
  non-zero.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When the Server receives a SUBSCRIBE
  packet from a Client, the Server MUST respond with a SUBACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The SUBACK packet MUST have the
  same Packet Identifier as the SUBSCRIBE packet that it is acknowledging.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server receives a SUBSCRIBE
  packet containing a Topic Filter that is identical to a Non&#8209;shared
  Subscriptions Topic Filter for the current Session then it MUST replace that
  existing Subscription with a new Subscription.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Retain Handling option is
  0, any existing retained messages matching the Topic Filter MUST be re-sent, </span>but
  Application Messages MUST NOT be lost due to replacing the Subscription<span
  style='color:black'>.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server receives a SUBSCRIBE
  packet that contains multiple Topic Filters it MUST handle that packet as if it
  had received a sequence of multiple SUBSCRIBE packets, except that it
  combines their responses into a single SUBACK response.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The SUBACK packet sent by the
  Server to the Client MUST contain a Reason Code for each Topic
  Filter/Subscription Option pair.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>This Reason Code MUST either
  show the maximum QoS that was granted for that Subscription or indicate that
  the subscription failed.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.8.4-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The QoS of Payload Messages sent
  in response to a Subscription MUST be the minimum of the QoS of the
  originally published message and the Maximum QoS granted by the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.9.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send this
  Property if it would increase the size of the SUBACK packet beyond the
  Maximum Packet Size specified by the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.9.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send this
  property if it would increase the size of the SUBACK packet beyond the
  Maximum Packet Size specified by the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.9.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The order of Reason Codes in the
  SUBACK packet MUST match the order of Topic Filters in the SUBSCRIBE packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.9.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server sending the SUBACK
  packet MUST send one of the Subscribe Reason Code values for each Topic
  Filter received.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Bits 3,2,1 and 0 of the Fixed
  Header of the UNSUBSCRIBE packet are reserved and MUST be set to 0,0,1 and 0
  respectively. The Server MUST treat any other value as malformed and close
  the Network Connection</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Topic Filters in an
  UNSUBSCRIBE packet MUST be UTF-8 Encoded Strings.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Payload of an UNSUBSCRIBE
  packet MUST contain at least one Topic Filter.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Topic Filters (whether they
  contain wildcards or not) supplied in an UNSUBSCRIBE packet MUST be compared
  character-by-character with the current set of Topic Filters held by the
  Server for the Client. If any filter matches exactly then its owning
  Subscription MUST be deleted.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.4-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When a Server receives
  UNSUBSCRIBE It MUST stop adding any new messages which match the Topic
  Filters, for delivery to the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.4-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When a Server receives
  UNSUBSCRIBE It MUST complete the delivery of any QoS 1 or QoS 2 messages
  which match the Topic Filters and it has started to send to the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.4-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST respond to an
  UNSUBSCRIBE request by sending an UNSUBACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.4-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The UNSUBACK packet MUST have
  the same Packet Identifier as the UNSUBSCRIBE packet. Even where no Topic
  Subscriptions are deleted, the Server MUST respond with an UNSUBACK.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.10.4-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Server receives an UNSUBSCRIBE
  packet that contains multiple Topic Filters, it MUST process that packet as
  if it had received a sequence of multiple UNSUBSCRIBE packets, except that it
  sends just one UNSUBACK response.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.11.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send this
  Property if it would increase the size of the UNSUBACK packet beyond the
  Maximum Packet Size specified by the Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.11.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT send this
  property if it would increase the size of the UNSUBACK packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.11.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The order of Reason Codes in the
  UNSUBACK packet MUST match the order of Topic Filters in the UNSUBSCRIBE
  packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.11.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server sending the UNSUBACK
  packet MUST use one of the UNSUBSCRIBE Reason Code values for each Topic
  Filter received.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.12.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST send a PINGRESP
  packet in response to a PINGREQ packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MUST NOT send a
  DISCONNECT until after it has sent a CONNACK with Reason Code of less than
  0x80.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server MUST
  validate that reserved bits are set to 0. If they are not zero it sends a
  DISCONNECT packet with a Reason code of 0x81 (Malformed Packet).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server sending the
  DISCONNECT packet MUST use one of the DISCONNECT Reason Codes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Session Expiry Interval MUST
  NOT be sent on a DISCONNECT by the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT use this
  Property if it would increase the size of the DISCONNECT packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.2-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the DISCONNECT packet beyond the
  Maximum Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.4-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>After sending a DISCONNECT
  packet the sender MUST NOT send any more MQTT Control Packets on that Network
  Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.4-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>After sending a DISCONNECT
  packet the sender MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.14.4-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>On receipt of DISCONNECT with a
  Reason Code of 0x00 (Success) the Server MUST discard any Will Message
  associated with the current Connection without publishing it.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.15.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Bits 3,2,1 and 0 of the Fixed
  Header of the AUTH packet are reserved and MUST all be set to 0. The Client
  or Server MUST treat any other value as malformed and close the Network
  Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.15.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender of the AUTH Packet
  MUST use one of the Authenticate Reason Codes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.15.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal>The sender MUST NOT send this property if it would
  increase the size of the AUTH packet beyond the Maximum Packet Size specified
  by the receiver </p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-3.15.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The sender MUST NOT send this
  property if it would increase the size of the AUTH packet beyond the Maximum
  Packet Size specified by the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.1.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client and Server MUST NOT
  discard the Session State while the Network Connection is open.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.2.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Client or Server MUST support
  the use of one or more underlying transport protocols that provide an
  ordered, lossless, stream of bytes from the Client to Server and Server to
  Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.1.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST discard the
  Session State when the Network Connection is closed and the Session Expiry
  Interval has passed.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 0 delivery protocol,
  the sender MUST send a PUBLISH packet with QoS 0 and DUP flag set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 1 delivery protocol,
  the sender MUST assign an unused Packet Identifier each time it has a new
  Application Message to publish.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 1 delivery protocol,
  the sender MUST send a PUBLISH packet containing this Packet Identifier with
  QoS 1 and DUP flag set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 1 delivery protocol,
  the sender MUST treat the PUBLISH packet as unacknowledged until it has
  received the corresponding PUBACK packet from the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.2-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 1 delivery protocol,
  the receiver MUST respond with a PUBACK packet containing the Packet
  Identifier from the incoming PUBLISH packet, having accepted ownership of the
  Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.2-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 1 delivery protocol,
  the receiver after it has sent a PUBACK packet the receiver MUST treat any
  incoming PUBLISH packet that contains the same Packet Identifier as being a
  new Application Message, irrespective of the setting of its DUP flag.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST assign an unused Packet Identifier when it has a new
  Application Message to publish.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST send a PUBLISH packet containing this Packet Identifier with
  QoS 2 and DUP flag set to 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST treat the PUBLISH packet as unacknowledged until it has
  received the corresponding PUBREC packet from the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST send a PUBREL packet when it receives a PUBREC packet from the
  receiver with a Reason Code value less than 0x80. This PUBREL packet MUST
  contain the same Packet Identifier as the original PUBLISH packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST treat the PUBREL packet as unacknowledged until it has
  received the corresponding PUBCOMP packet from the receiver.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST NOT re-send the PUBLISH once it has sent the corresponding
  PUBREL packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the sender MUST NOT apply Application Message expiry if a PUBLISH packet has
  been sent.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-8]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the receiver MUST respond with a PUBREC containing the Packet Identifier from
  the incoming PUBLISH packet, having accepted ownership of the Application
  Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-9]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the receiver if it has sent a PUBREC with a Reason Code of 0x80 or greater,
  the receiver MUST treat any subsequent PUBLISH packet that contains that
  Packet Identifier as being a new Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-10]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the receiver until it has received the corresponding PUBREL packet, the
  receiver MUST acknowledge any subsequent PUBLISH packet with the same Packet
  Identifier by sending a PUBREC. It MUST NOT cause duplicate messages to be
  delivered to any onward recipients in this case.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-11]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the receiver MUST respond to a PUBREL packet by sending a PUBCOMP packet
  containing the same Packet Identifier as the PUBREL.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-12]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the receiver After it has sent a PUBCOMP, the receiver MUST treat any
  subsequent PUBLISH packet that contains that Packet Identifier as being a new
  Application Message.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.3.3-13]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>In the QoS 2 delivery protocol,
  the receiver </span>MUST continue the QoS 2 acknowledgement sequence even if
  it has applied Application Message expiry.</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.4.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When a Client reconnects with
  Clean Start set to 0 and a session is present, both the Client and Server
  MUST resend any unacknowledged PUBLISH packets (where QoS &gt; 0) and PUBREL
  packets using their original Packet Identifiers. This is the only
  circumstance where a Client or Server is REQUIRED to resend messages. Clients
  and Servers MUST NOT resend messages at any other time.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.4.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If PUBACK or PUBREC is received
  containing a Reason Code of 0x80 or greater the corresponding PUBLISH packet
  is treated as acknowledged, and MUST NOT be retransmitted.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.5.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When a Server takes ownership of
  an incoming Application Message it MUST add it to the Session State for those
  Clients that have matching Subscriptions.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.5.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST acknowledge any
  Publish packet it receives according to the applicable QoS rules regardless
  of whether it elects to process the Application Message that it contains.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.6.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When the Client re-sends any
  PUBLISH packets, it MUST re-send them in the order in which the original PUBLISH
  packets were sent (this applies to QoS 1 and QoS 2 messages).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.6.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST send PUBACK
  packets in the order in which the corresponding PUBLISH packets were received
  (QoS 1 messages).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.6.0-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST send PUBREC packets
  in the order in which the corresponding PUBLISH packets were received (QoS 2
  messages).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.6.0-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST send PUBREL
  packets in the order in which the corresponding PUBREC packets were received
  (QoS 2 messages).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.6.0-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When a Server processes a message
  that has been published to an Ordered Topic, it MUST send PUBLISH packets to
  consumers (for the same Topic and QoS) in the order that they were received
  from any given Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.6.0-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Server MUST treat every, Topic
  as an Ordered Topic when it is forwarding messages on Non&#8209;shared
  Subscriptions.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The wildcard characters can be
  used in Topic Filters, but MUST NOT be used within a Topic Name.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The multi-level wildcard
  character MUST be specified either on its own or following a topic level
  separator. In either case it MUST be the last character specified in the
  Topic Filter.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.1-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The single-level wildcard can be
  used at any level in the Topic Filter, including first and last levels. Where
  it is used, it MUST occupy an entire level of the filter.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST NOT match Topic
  Filters starting with a wildcard character (# or +) with Topic Names
  beginning with a $ character.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.3-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>All Topic Names and Topic
  Filters MUST be at least one character long.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.3-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Topic Names and Topic Filters
  MUST NOT include the null character (Unicode U+0000).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.3-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Topic Names and Topic Filters
  are UTF-8 Encoded Strings; they MUST NOT encode to more than 65,535 bytes.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.7.3-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When it performs subscription
  matching the Server MUST NOT perform any normalization of Topic Names or
  Topic Filters, or any modification or substitution of unrecognized
  characters.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.8.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A Shared Subscription's Topic
  Filter MUST start with $share/ and MUST contain a ShareName that is at least
  one character long.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.8.2-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The ShareName MUST NOT contain
  the characters &quot;/&quot;, &quot;+&quot; or &quot;#&quot;, but MUST be
  followed by a &quot;/&quot; character. This &quot;/&quot; character MUST be
  followed by a Topic Filter.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.8.2-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST respect the
  granted QoS for the Clients subscription.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.8.2-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server MUST complete the
  delivery of the message to that Client when it reconnects.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.8.2-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Clients Session
  terminates before the Client reconnects, the Server MUST NOT send the
  Application Message to any other subscribed Client.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.8.2-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If a Client responds with a
  PUBACK or PUBREC containing a Reason Code of 0x80 or greater to a PUBLISH
  packet from the Server, the Server MUST discard the Application Message and
  not attempt to send it to any other Subscriber.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.9.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client or Server MUST set
  its initial send quota to a non-zero value not exceeding the Receive Maximum.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.9.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>Each time the Client or Server
  sends a PUBLISH packet at QoS &gt; 0, it decrements the send quota. If the
  send quota reaches zero, the Client or Server MUST NOT send any more PUBLISH
  packets with QoS &gt; 0.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.9.0-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client and Server MUST
  continue to process and respond to all other MQTT Control Packets even if the
  quota is zero.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server does not support
  the Authentication Method supplied by the Client, it MAY send a CONNACK with
  a Reason Code of 0x8C (Bad authentication method) or 0x87 (Not Authorized) as
  described in section 4.13 and MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Server requires
  additional information to complete the authorization, it can send an AUTH
  packet to the Client. This packet MUST contain a Reason Code of 0x18 (Continue
  authentication).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client responds to an AUTH packet
  from the Server by sending a further AUTH packet. This packet MUST contain a
  Reason Code of 0x18 (Continue authentication).</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Server can reject the
  authentication at any point in this process. It MAY send a CONNACK with a
  Reason Code of 0x80 or above as described in section 4.13, and MUST close the
  Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-5]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the initial CONNECT packet included
  an Authentication Method property then all AUTH packets, and any successful
  CONNACK packet MUST include an Authentication Method Property with the same
  value as in the CONNECT packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-6]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client does not include
  an Authentication Method in the CONNECT, the Server MUST NOT send an AUTH
  packet, and it MUST NOT send an Authentication Method in the CONNACK packet.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.0-7]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client does not include
  an Authentication Method in the CONNECT, the Client MUST NOT send an AUTH
  packet to the Server.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the Client supplied an
  Authentication Method in the CONNECT packet it can initiate a
  re-authentication at any time after receiving a CONNACK. It does this by
  sending an AUTH packet with a Reason Code of 0x19 (Re-authentication). The
  Client MUST set the Authentication Method to the same value as the
  Authentication Method originally used to authenticate the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.12.1-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>If the re-authentication fails,
  the Client or Server SHOULD send DISCONNECT with an appropriate Reason Code
  and MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.13.1-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>When a Server detects a Malformed
  Packet or Protocol Error, and a Reason Code is given in the specification, it
  MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-4.13.2-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The CONNACK and DISCONNECT
  packets allow a Reason Code of 0x80 or greater to indicate that the Network
  Connection will be closed. If a Reason Code of 0x80 or greater is specified,
  then the Network Connection MUST be closed whether or not the CONNACK or DISCONNECT
  is sent.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-6.0.0-1]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>MQTT Control Packets MUST be
  sent in WebSocket binary data frames. If any other type of data frame is
  received the recipient MUST close the Network Connection.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-6.0.0-2]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>A single WebSocket data frame
  can contain multiple or partial MQTT Control Packets. The receiver MUST NOT
  assume that MQTT Control Packets are aligned on WebSocket frame boundaries.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-6.0.0-3]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The Client MUST include mqtt
  in the list of WebSocket Sub Protocols it offers.</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid;height:28.5pt'>
  <td width=117 valign=top style='width:88.0pt;border:solid windowtext 1.0pt;
  border-top:none;background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>[MQTT-6.0.0-4]</span></p>
  </td>
  <td width=542 valign=top style='width:406.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:white;padding:.75pt 5.4pt .75pt 5.4pt;height:28.5pt'>
  <p class=MsoNormal><span style='color:black'>The WebSocket Subprotocol name
  selected and returned by the Server MUST be mqtt.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<p class=AppendixHeading1><a name="_Toc473620354"></a><a name="_Toc471483781"></a><a
name="_Toc471282935"></a><a name="_Toc464635434"></a><a name="_Toc464548139"></a><a
name="_Toc462729244"></a><a name="_Toc287332014"></a><a name="_Toc85472898"></a><a
name="_Toc3901293"></a><a name="_Toc514848166"></a><a name="_Toc511988770"></a><a
name="_Ref479582932"></a><a name=AppendixC></a>Appendix C. Summary of new
features in MQTT v5.0 (non-normative)</p>

</div>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>The following new features are added to MQTT v5.0</span></p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Session expiry</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Split the Clean Session flag into a Clean Start flag which
indicates that the session should start without using an existing session, and
a Session Expiry interval which says how long to retain the session after a
disconnect. The session expiry interval can be modified at disconnect. Setting
of Clean Start to 1 and Session Expiry Interval to 0 is equivalent in MQTT v3.1.1
of setting Clean Session to 1.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Message expiry</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow an expiry interval to be set when a message is
published.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Reason code on all ACKs</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Change all response packets to contain a reason code. This
include CONNACK, PUBACK, PUBREC, PUBREL, PUBCOMP, SUBACK, UNSUBACK, DISCONNECT,
and AUTH. This allows the invoker to determine whether the requested function
succeeded.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Reason string on all ACKs</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Change most packets with a reason code to also allow an
optional reason string. This is designed for problem determination and is not
intended to be parsed by the receiver.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Server disconnect</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow DISCONNECT to be sent by the Server to indicate the
reason the connection is closed. </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Payload format and content type</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow the payload format (binary, text) and a MIME style
content type to be specified when a message is published. These are forwarded
on to the receiver of the message.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Request / Response</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Formalize the request/response pattern within MQTT and
provide the Response Topic and Correlation Data properties to allow response
messages to be routed back to the publisher of a request. Also, add the ability
for the Client to get configuration information from the Server about how to
construct the response topics.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Shared Subscriptions</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Add shared subscription support allowing for load balanced
consumers of a subscription</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Subscription ID</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow a numeric subscription identifier to be specified on
a SUBSCRIBE, and returned on the message when it is delivered. This allows the
Client to determine which subscription or subscriptions caused the message to
be delivered.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Topic Alias</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Decrease the size of the MQTT packet overhead by allowing
the topic name to be abbreviated to a small integer. The Client and Server
independently specify how many topic aliases they allow.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Flow control</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow the Client and Server to independently specify the
number of outstanding reliable messages (QoS&gt;0) they allow. The sender pauses
sending such messages to stay below this quota. This is used to limit the rate
of reliable messages, and to limit how many are in flight at one time.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>User properties</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Add User Properties to most packets. User properties on
PUBLISH are included with the message and are defined by the Client
applications. The user properties on PUBLISH and Will Properties are forwarded
by the Server to the receiver of the message. <a name="_Hlk484510056">User
properties on the CONNECT, SUBSCRIBE, and UNSUBSCRIBE packets are defined by
the Server implementation. The user properties on CONNACK PUBACK, PUBREC,
PUBREL, PUBCOMP, SUBACK, UNSUBACK and AUTH packets are defined by the sender,
and are unique to the sender implementation. The meaning of user properties is
not defined by MQTT.</a></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Maximum Packet Size</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow the Client and Server to independently specify the
maximum packet size they support. It is an error for the session partner to
send a larger packet.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Optional Server feature availability</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Define a set of features which the Server does not allow
and provide a mechanism for the Server to specify this to the Client. The
features which can be specified in this way are: Maximum QoS, Retain Available,
Wildcard Subscription Available, Subscription Identifier Available, and Shared
Subscription Available. It is an error for the Client to use features that the
Server has declared are not available. </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>It is possible in earlier versions of MQTT for a Server to
not implement a feature by declaring that the Client is not authorized for that
function. This feature allows such optional behavior to be declared and adds
specific Reason Codes when the Client uses one of these features anyway.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Enhanced authentication</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Provide a mechanism to enable challenge/response style authentication
including mutual authentication. This allows SASL style authentication to be
used if supported by both Client and Server, and includes the ability for a
Client to re-authenticate within a connection.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Subscription options</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Provide subscription options primarily defined to allow for
message bridge applications. These include an option to not send messages
originating on this Client (noLocal), and options for handling retained
messages on subscribe.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Will delay</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Add the ability to specify a delay between the end of the
connection and sending the will message. This is designed so that if a
connection to the session is re-established then the will message is not sent.
This allows for brief interruptions of the connection without notification to
others.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Server Keep Alive</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>Allow the Server to specify the value it wishes the Client
to use as a keep alive. This allows the Server to set a maximum allowed
keepalive and still have the Client honor it.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Assigned ClientID</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>In cases where the ClientID is assigned by the Server,
return the assigned ClientID. This also lifts the restriction that Server
assigned ClientIDs can only be used with Clean Session=1 connections.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-autospace:none'><span
style='color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;text-autospace:none'><span
style='font-size:11.0pt;font-family:Symbol;color:black'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='color:black'>Server reference </span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='color:black'>Allow
the Server to specify an alternate Server to use on CONNACK or DISCONNECT. This
can be used as a redirect or to do provisioning.</span></p>

<p class=MsoListParagraph style='margin-left:0in'>&nbsp;</p>

</div>

</body>

</html>
